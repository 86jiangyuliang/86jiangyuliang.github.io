<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.10.1","exturl":false,"sidebar":{"position":"left","width":500,"display":"always","padding":1,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="Blog01-Linux">
<meta property="og:url" content="http://example.com/2000/01/01/Blog01-Linux/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Linux">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2000/01/01/Blog01-Linux/%E7%94%A8%E6%88%B7%E8%BF%9B%E7%A8%8B%E5%AF%B9%E6%96%87%E4%BB%B6%E7%9A%84%E8%AE%BF%E9%97%AE.png">
<meta property="og:image" content="http://example.com/2000/01/01/Blog01-Linux/%E6%96%87%E4%BB%B6%E8%A1%A8.jpg">
<meta property="og:image" content="http://example.com/2000/01/01/Blog01-Linux/netfilter%E6%B5%81%E7%A8%8B.jpg">
<meta property="article:published_time" content="1999-12-31T16:00:01.000Z">
<meta property="article:modified_time" content="2024-09-10T16:13:08.877Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2000/01/01/Blog01-Linux/%E7%94%A8%E6%88%B7%E8%BF%9B%E7%A8%8B%E5%AF%B9%E6%96%87%E4%BB%B6%E7%9A%84%E8%AE%BF%E9%97%AE.png">


<link rel="canonical" href="http://example.com/2000/01/01/Blog01-Linux/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2000/01/01/Blog01-Linux/","path":"2000/01/01/Blog01-Linux/","title":"Blog01-Linux"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Blog01-Linux | Hexo</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Hexo</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Blog01-Linux"><span class="nav-text">Blog01-Linux</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%AE%E5%8A%A9"><span class="nav-text">帮助</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%86%85%E5%AE%B9"><span class="nav-text">内容</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter01-Linux-%E5%9F%BA%E7%A1%80"><span class="nav-text">Chapter01 Linux 基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-Linux-%E5%B8%AE%E5%8A%A9"><span class="nav-text">1.1 Linux 帮助</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ahelp-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：help 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aman-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：man 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ainfo-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：info 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ainfo-%E5%86%85%E9%83%A8%E6%93%8D%E4%BD%9C"><span class="nav-text">知识点：info 内部操作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-Linux-%E6%A6%82%E5%BF%B5"><span class="nav-text">1.2 Linux 概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="nav-text">知识点：文件描述符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-Linux-%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84"><span class="nav-text">1.3 Linux 用户和组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Auseradd-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：useradd 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Auserdel-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：userdel 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ausermod-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：usermod 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Agroupadd-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：groupadd 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Agroupdel-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：groupdel 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A-x2F-etc-x2F-passwd%E3%80%81-x2F-etc-x2F-group%E3%80%81-x2F-etc-x2F-shadow"><span class="nav-text">知识点：&#x2F;etc&#x2F;passwd、&#x2F;etc&#x2F;group、&#x2F;etc&#x2F;shadow</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Apasswd-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：passwd 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Achage-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：chage 指令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter02-shell-%E8%84%9A%E6%9C%AC"><span class="nav-text">Chapter02 shell 脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC%E6%8C%87%E4%BB%A4"><span class="nav-text">2.1 常用脚本指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aenv-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：env 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aexpr-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：expr 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-%E5%AD%97%E8%8A%82%E6%B5%81%E6%8C%87%E4%BB%A4"><span class="nav-text">2.2 字节流指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Acat-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：cat 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Agrep-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：grep 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aprintf-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：printf 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aprintf-%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E6%A0%87%E8%AE%B0"><span class="nav-text">知识点：printf 格式转换标记</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Asort-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：sort 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Auniq-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：uniq 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Adate-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：date 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Abc-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：bc 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Adiff-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：diff 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Arecode-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：recode 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aiconv-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：iconv 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-Sed"><span class="nav-text">2.3 Sed</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ased-%E4%BB%8B%E7%BB%8D"><span class="nav-text">知识点：sed 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ased-Command"><span class="nav-text">知识点：sed Command</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ased-Command-%E8%A1%8C%E5%AE%9A%E4%BD%8D"><span class="nav-text">知识点：sed Command 行定位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ased-%E6%9B%BF%E6%8D%A2%E5%91%BD%E4%BB%A4"><span class="nav-text">知识点：sed 替换命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ased-%E6%AD%A3%E5%88%99"><span class="nav-text">知识点：sed 正则</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-Awk"><span class="nav-text">2.4 Awk</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aawk-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：awk 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aawk-%E5%8F%98%E9%87%8F"><span class="nav-text">知识点：awk 变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aawk-%E6%95%B0%E7%BB%84"><span class="nav-text">知识点：awk 数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aawk-%E7%A8%8B%E5%BA%8F%E8%AF%AD%E6%B3%95"><span class="nav-text">知识点：awk 程序语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aawk-PATTERN"><span class="nav-text">知识点：awk PATTERN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aawk-%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-text">知识点：awk 操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aawk-%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E8%AF%AD%E5%8F%A5"><span class="nav-text">知识点：awk 输入输出语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aawk-%E6%8E%A7%E5%88%B6%E6%B5%81%E8%AF%AD%E5%8F%A5"><span class="nav-text">知识点：awk 控制流语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aawk-%E7%AE%97%E6%9C%AF%E5%87%BD%E6%95%B0"><span class="nav-text">知识点：awk 算术函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aawk-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="nav-text">知识点：awk 字符串函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aawk-%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0"><span class="nav-text">知识点：awk 时间函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aawk-%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="nav-text">知识点：awk 用户自定义函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-Vim"><span class="nav-text">2.5 Vim</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Avim-%E4%BB%8B%E7%BB%8D"><span class="nav-text">知识点：vim 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Avim-%E9%80%89%E9%A1%B9"><span class="nav-text">知识点：vim 选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Avim-Command-%E6%A0%BC%E5%BC%8F"><span class="nav-text">知识点：vim Command 格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Avim-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C-Command"><span class="nav-text">知识点：vim 基本操作 Command</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Avim-%E7%BC%96%E8%BE%91%E6%93%8D%E4%BD%9C-Command"><span class="nav-text">知识点：vim 编辑操作 Command</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Avim-%E7%A7%BB%E5%8A%A8%E5%85%89%E6%A0%87-Motion"><span class="nav-text">知识点：vim 移动光标 Motion</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Avim-%E5%90%84%E7%A7%8D%E6%A8%A1%E5%BC%8F%E4%B8%AD%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-text">知识点：vim 各种模式中的操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Avim-%E6%9F%A5%E6%89%BE%E6%9B%BF%E6%8D%A2%E6%93%8D%E4%BD%9C"><span class="nav-text">知识点：vim 查找替换操作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-6-Bash"><span class="nav-text">2.6 Bash</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Abash-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：bash 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Abash-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%92%8C%E6%89%A7%E8%A1%8C%E7%8E%AF%E5%A2%83"><span class="nav-text">知识点：bash 命令执行和执行环境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Abash-%E5%91%BD%E4%BB%A4%E6%89%A9%E5%B1%95"><span class="nav-text">知识点：bash 命令扩展</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Abash-%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-text">知识点：bash 重定向</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Abash-%E9%87%8D%E5%AE%9A%E5%90%91%E7%94%A8%E6%B3%95%E4%B9%8B%E5%B5%8C%E5%85%A5%E6%96%87%E6%A1%A3-Here-Document"><span class="nav-text">知识点：bash 重定向用法之嵌入文档 Here Document</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ashell-%E8%AF%AD%E6%B3%95%E4%BB%8B%E7%BB%8D"><span class="nav-text">知识点：shell 语法介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ashell-%E5%91%BD%E4%BB%A4"><span class="nav-text">知识点：shell 命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ashell-%E7%BB%84%E5%90%88%E5%91%BD%E4%BB%A4"><span class="nav-text">知识点：shell 组合命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ashell-%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">知识点：shell 条件表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ashell-%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E6%B3%95%E5%88%99"><span class="nav-text">知识点：shell 算数运算法则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ashell-%E5%AD%97%E7%AC%A6%E5%8C%B9%E9%85%8D%E5%8E%9F%E5%88%99"><span class="nav-text">知识点：shell 字符匹配原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ashell-%E5%87%BD%E6%95%B0"><span class="nav-text">知识点：shell 函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-7-Bash-%E5%8F%98%E9%87%8F"><span class="nav-text">2.7 Bash 变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ashell-%E5%8F%98%E9%87%8F"><span class="nav-text">知识点：shell 变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ashell-%E6%95%B0%E7%BB%84"><span class="nav-text">知识点：shell 数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ashell-%E4%BD%8D%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="nav-text">知识点：shell 位置参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ashell-%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F"><span class="nav-text">知识点：shell 特殊变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ashell-%E5%8F%98%E9%87%8F%E6%89%A9%E5%B1%95"><span class="nav-text">知识点：shell 变量扩展</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Adeclare%E3%80%81local-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：declare、local 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aexport-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：export 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ashift-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：shift 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aunset-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：unset 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-8-Bash-%E4%BD%9C%E4%B8%9A"><span class="nav-text">2.8 Bash 作业</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Abash-%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6"><span class="nav-text">知识点：bash 作业控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ajobs-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：jobs 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Afg%E3%80%81bg-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：fg、bg 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Adisown-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：disown 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Anohup-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：nohup 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Asleep-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：sleep 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Await-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：wait 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-9-BashBuiltin"><span class="nav-text">2.9 BashBuiltin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aalias-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：alias 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aecho-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：echo 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aread-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：read 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Abreak%E3%80%81continue-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：break、continue 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Atest%E3%80%81true%E3%80%81false-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：test、true、false 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aexit%E3%80%81logout%E3%80%81return-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：exit、logout、return 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aset-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：set 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Asource-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：source 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aulimit-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：ulimit 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aumask-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：umask 指令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter06-%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="nav-text">Chapter06 软件管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86%E4%BB%8B%E7%BB%8D"><span class="nav-text">6.1 软件管理介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9ALinux-%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8%E4%B8%8E%E5%9C%A8%E7%BA%BF%E5%AE%89%E8%A3%85%E6%9C%BA%E5%88%B6"><span class="nav-text">知识点：Linux 的软件包管理器与在线安装机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Awhich-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：which 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Atype-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：type 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Awhereis-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：whereis 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-rpm"><span class="nav-text">6.2 rpm</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Arpm-%E5%92%8C-srpm"><span class="nav-text">知识点：rpm 和 srpm</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Arpm-%E5%8C%85"><span class="nav-text">知识点：rpm 包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Arpm-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：rpm 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-yum"><span class="nav-text">6.3 yum</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ayum-%E4%BB%8B%E7%BB%8D"><span class="nav-text">知识点：yum 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ayum-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：yum 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ayum-repo-%E9%85%8D%E7%BD%AE%E8%8C%83%E4%BE%8B"><span class="nav-text">知识点：yum repo 配置范例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ayumdownloader-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：yumdownloader 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-4-dpkg"><span class="nav-text">6.4 dpkg</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Adpkg-%E4%BB%8B%E7%BB%8D"><span class="nav-text">知识点：dpkg 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Adeb-%E5%8C%85"><span class="nav-text">知识点：deb 包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Adpkg-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：dpkg 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Adpkg-query-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：dpkg-query 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Adpkg-deb-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：dpkg-deb 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-5-apt"><span class="nav-text">6.5 apt</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aapt-%E4%BB%8B%E7%BB%8D"><span class="nav-text">知识点：apt 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Asource-list"><span class="nav-text">知识点：source.list</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aapt-get-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：apt-get 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aapt-cache-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：apt-cache 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aapt-file-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：apt-file 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-6-repo"><span class="nav-text">6.6 repo</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A%E5%B8%B8%E7%94%A8-repo"><span class="nav-text">知识点：常用 repo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Areposync"><span class="nav-text">知识点：reposync</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Acreaterepo"><span class="nav-text">知识点：createrepo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aapt-mirror"><span class="nav-text">知识点：apt-mirror</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter07-ssh"><span class="nav-text">Chapter07 ssh</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-ssh"><span class="nav-text">7.1 ssh</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Assh-%E7%9B%B8%E5%85%B3%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="nav-text">知识点：ssh 相关软件包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2-sshd"><span class="nav-text">7.2 sshd</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3-ssh-%E5%91%A8%E8%BE%B9%E6%8C%87%E4%BB%A4"><span class="nav-text">7.3 ssh 周边指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Apssh-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：pssh 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Asshpass-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：sshpass 指令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter08-%E7%BD%91%E7%BB%9C"><span class="nav-text">Chapter08 网络</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#8-1-%E7%BD%91%E7%BB%9C%E4%BB%8B%E7%BB%8D"><span class="nav-text">8.1 网络介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3%E5%8C%85"><span class="nav-text">知识点：网络相关包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-2-%E4%B8%BB%E6%9C%BA%E5%90%8D"><span class="nav-text">8.2 主机名</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A%E4%B8%BB%E6%9C%BA%E5%90%8D"><span class="nav-text">知识点：主机名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ahostname-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：hostname 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ahostmanectl-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：hostmanectl 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-3-DNS"><span class="nav-text">8.3 DNS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9ADNS-%E4%BB%8B%E7%BB%8D"><span class="nav-text">知识点：DNS 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Adig-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：dig 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-4-NetworkManager"><span class="nav-text">8.4 NetworkManager</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-5-netplan"><span class="nav-text">8.5 netplan</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-6-%E7%BD%91%E7%BB%9C%E5%B7%A5%E5%85%B7"><span class="nav-text">8.6 网络工具</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aifconfig-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：ifconfig 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Anetstat-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：netstat 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Anetstat-%E6%8C%87%E4%BB%A4%E8%BE%93%E5%87%BA%E4%BF%A1%E6%81%AF"><span class="nav-text">知识点：netstat 指令输出信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ass-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：ss 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ass-%E6%8C%87%E4%BB%A4%E9%AB%98%E7%BA%A7"><span class="nav-text">知识点：ss 指令高级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ass-%E6%8C%87%E4%BB%A4%E5%85%B6%E4%BB%96"><span class="nav-text">知识点：ss 指令其他</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aping-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：ping 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Anetcat-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：netcat 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ancat-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：ncat 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Awget-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：wget 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Acurl-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：curl 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-7-iptables"><span class="nav-text">8.7 iptables</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Anetfilter-%E4%BB%8B%E7%BB%8D"><span class="nav-text">知识点：netfilter 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aiptables-%E4%BB%8B%E7%BB%8D"><span class="nav-text">知识点：iptables 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aiptables-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：iptables 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aiptables-rule-%E6%A0%BC%E5%BC%8F"><span class="nav-text">知识点：iptables rule 格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aiptables-match-extension"><span class="nav-text">知识点：iptables match extension</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aiptables-target-extension"><span class="nav-text">知识点：iptables target extension</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Afirewall-cmd-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：firewall-cmd 指令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter09-%E8%BF%9B%E7%A8%8B"><span class="nav-text">Chapter09 进程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#9-1-%E8%BF%9B%E7%A8%8B%E4%BB%8B%E7%BB%8D"><span class="nav-text">9.1 进程介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9ALinux-%E5%86%85%E5%AD%98%E7%B1%BB%E5%9E%8B"><span class="nav-text">知识点：Linux 内存类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-2-%E8%BF%9B%E7%A8%8B%E6%8C%87%E4%BB%A4"><span class="nav-text">9.2 进程指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Awatch-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：watch 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aps-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：ps 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aps-%E6%8C%87%E4%BB%A4%E9%80%89%E9%A1%B9"><span class="nav-text">知识点：ps 指令选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aps-%E6%8C%87%E4%BB%A4%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F%E6%8E%A7%E5%88%B6"><span class="nav-text">知识点：ps 指令输出格式控制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-3-IO"><span class="nav-text">9.3 IO</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9AIO-%E4%BB%8B%E7%BB%8D"><span class="nav-text">知识点：IO 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aiostat-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：iostat 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Alsof-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：lsof 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-4-%E8%BF%9B%E7%A8%8B%E7%9B%91%E6%8E%A7"><span class="nav-text">9.4 进程监控</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Atop-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：top 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Atop-%E5%86%85%E9%83%A8%E6%93%8D%E4%BD%9C"><span class="nav-text">知识点：top 内部操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Apidstat-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：pidstat 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ampstat-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：mpstat 指令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter10-%E6%96%87%E4%BB%B6"><span class="nav-text">Chapter10 文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#10-1-%E6%96%87%E4%BB%B6"><span class="nav-text">10.1 文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A%E6%96%87%E4%BB%B6"><span class="nav-text">知识点：文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A%E9%93%BE%E6%8E%A5"><span class="nav-text">知识点：链接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Als-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：ls 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Adircolors-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：dircolors 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Afile-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：file 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Astat-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：stat 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-2-%E7%9B%AE%E5%BD%95"><span class="nav-text">10.2 目录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Acd-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：cd 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Apwd-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：pwd 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Amkdir-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：mkdir 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Armdir-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：rmdir 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Abasename%E3%80%81dirname-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：basename、dirname 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-3-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="nav-text">10.3 文件操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A%E5%A4%87%E4%BB%BD%E9%80%89%E9%A1%B9"><span class="nav-text">知识点：备份选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Acp-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：cp 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aln-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：ln 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Amv-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：mv 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Arm-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：rm 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-4-%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6"><span class="nav-text">10.4 查找文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Alocate-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：locate 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Afind-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：find 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Afind-%E6%8C%87%E4%BB%A4-Expression"><span class="nav-text">知识点：find 指令 Expression</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Afind-%E6%8C%87%E4%BB%A4-Expression-%E4%B9%8B-Test"><span class="nav-text">知识点：find 指令 Expression 之 Test</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Afind-%E6%8C%87%E4%BB%A4-Expression-%E4%B9%8B-Action"><span class="nav-text">知识点：find 指令 Expression 之 Action</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Axargs-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：xargs 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-5-%E6%9D%83%E9%99%90%E5%92%8C%E5%B1%9E%E6%80%A7"><span class="nav-text">10.5 权限和属性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A%E6%96%87%E4%BB%B6%E7%9A%84%E6%9D%83%E9%99%90"><span class="nav-text">知识点：文件的权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A%E6%96%87%E4%BB%B6%E7%9A%84%E6%97%B6%E9%97%B4"><span class="nav-text">知识点：文件的时间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Atouch-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：touch 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aumask-%E6%8C%87%E4%BB%A4-1"><span class="nav-text">知识点：umask 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Achmod-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：chmod 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Achown-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：chown 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-6-%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90%E5%92%8C%E9%9A%90%E8%97%8F%E5%B1%9E%E6%80%A7"><span class="nav-text">10.6 特殊权限和隐藏属性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A%E6%96%87%E4%BB%B6%E7%9A%84%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90"><span class="nav-text">知识点：文件的特殊权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A%E6%96%87%E4%BB%B6%E7%9A%84%E9%9A%90%E8%97%8F%E5%B1%9E%E6%80%A7"><span class="nav-text">知识点：文件的隐藏属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Alsattr-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：lsattr 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Achattr-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：chattr 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-7-%E5%8E%8B%E7%BC%A9"><span class="nav-text">10.7 压缩</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Atar-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：tar 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aunzip-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：unzip 指令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter11-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-text">Chapter11 文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#11-1-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-text">11.1 文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Adf-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：df 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Adu-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：du 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Alsblk-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：lsblk 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ablkid-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：blkid 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-2-%E6%8C%82%E8%BD%BD"><span class="nav-text">11.2 挂载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-3-EXT4-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-text">11.3 EXT4 文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A%E7%B4%A2%E5%BC%95%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-text">知识点：索引式文件系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A%E6%97%A5%E5%BF%97%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-text">知识点：日志式文件系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aext4-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-text">知识点：ext4 文件系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Adumpe2fs-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：dumpe2fs 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-4-XFS-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-text">11.4 XFS 文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Axfs-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-text">知识点：xfs 文件系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Amkfs-xfs-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：mkfs.xfs 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Axfs-growfs-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：xfs_growfs 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-5-NFS"><span class="nav-text">11.5 NFS</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter12-%E7%A3%81%E7%9B%98%E5%92%8C%E5%88%86%E5%8C%BA"><span class="nav-text">Chapter12 磁盘和分区</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#12-1-%E5%88%86%E5%8C%BA"><span class="nav-text">12.1 分区</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9AMBR"><span class="nav-text">知识点：MBR</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9AGPT"><span class="nav-text">知识点：GPT</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Apartprobe-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：partprobe 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Afdisk-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：fdisk 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aparted-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：parted 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-2-SWAP"><span class="nav-text">12.2 SWAP</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter13-systemd"><span class="nav-text">Chapter13 systemd</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#13-1-systemd-%E4%BB%8B%E7%BB%8D"><span class="nav-text">13.1 systemd 介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B-daemon"><span class="nav-text">知识点：守护进程 daemon</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Asystemd"><span class="nav-text">知识点：systemd</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-2-unit"><span class="nav-text">13.2 unit</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aunit-%E4%BB%8B%E7%BB%8D"><span class="nav-text">知识点：unit 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aunit-%E5%9D%97"><span class="nav-text">知识点：unit 块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ainstall-%E5%9D%97"><span class="nav-text">知识点：install 块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aunit-%E4%BE%9D%E8%B5%96"><span class="nav-text">知识点：unit 依赖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aunit-%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="nav-text">知识点：unit 占位符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aunit-%E9%87%8D%E5%90%AF%E6%8E%A7%E5%88%B6"><span class="nav-text">知识点：unit 重启控制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-3-service"><span class="nav-text">13.3 service</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aservice"><span class="nav-text">知识点：service</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aservice-%E5%90%AF%E5%8A%A8%E5%92%8C%E5%81%9C%E6%AD%A2%E5%92%8C%E9%87%8D%E5%90%AF"><span class="nav-text">知识点：service 启动和停止和重启</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aservice-%E6%89%A7%E8%A1%8C%E7%8E%AF%E5%A2%83"><span class="nav-text">知识点：service 执行环境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aservice-%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6"><span class="nav-text">知识点：service 资源限制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-4-journal"><span class="nav-text">13.4 journal</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ajournal"><span class="nav-text">知识点：journal</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Ajournalctl-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：journalctl 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-5-systemd-%E6%8C%87%E4%BB%A4"><span class="nav-text">13.5 systemd 指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Asystemctl-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：systemctl 指令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter14-%E5%B8%B8%E7%94%A8%E6%9C%8D%E5%8A%A1"><span class="nav-text">Chapter14 常用服务</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#14-1-crontab"><span class="nav-text">14.1 crontab</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Acrontab"><span class="nav-text">知识点：crontab</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Aat-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：at 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-2-ntpd-%E5%92%8C-chronyd"><span class="nav-text">14.2 ntpd 和 chronyd</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-3-ftpd"><span class="nav-text">14.3 ftpd</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter15-%E7%A1%AC%E4%BB%B6"><span class="nav-text">Chapter15 硬件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#15-1-%E7%A1%AC%E4%BB%B6%E6%9F%A5%E7%9C%8B"><span class="nav-text">15.1 硬件查看</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9Alscpu-%E6%8C%87%E4%BB%A4"><span class="nav-text">知识点：lscpu 指令</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">18</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2000/01/01/Blog01-Linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Blog01-Linux | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Blog01-Linux
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2000-01-01 00:00:01" itemprop="dateCreated datePublished" datetime="2000-01-01T00:00:01+08:00">2000-01-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-11 00:13:08" itemprop="dateModified" datetime="2024-09-11T00:13:08+08:00">2024-09-11</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <hr>
<h1 id="Blog01-Linux"><a href="#Blog01-Linux" class="headerlink" title="Blog01-Linux"></a>Blog01-Linux</h1><p><a href="#Chapter01-Linux-%E5%9F%BA%E7%A1%80"><strong>Chapter01 Linux 基础</strong></a></p>
<ul>
<li><a href="#1-1-Linux-%E5%B8%AE%E5%8A%A9">1.1 Linux 帮助</a></li>
<li><a href="#1-2-Linux-%E6%A6%82%E5%BF%B5">1.2 Linux 概念</a></li>
<li><a href="#1-3-Linux-%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84">1.3 Linux 用户和组</a></li>
</ul>
<p><a href="#Chapter02-shell-%E8%84%9A%E6%9C%AC"><strong>Chapter02 shell 脚本</strong></a></p>
<ul>
<li><a href="#2-1-%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC%E6%8C%87%E4%BB%A4">2.1 常用脚本指令</a></li>
<li><a href="#2-2-%E5%AD%97%E8%8A%82%E6%B5%81%E6%8C%87%E4%BB%A4">2.2 字节流指令</a></li>
<li><a href="#2-3-Sed">2.3 Sed</a></li>
<li><a href="#2-4-Awk">2.4 Awk</a></li>
<li><a href="#2-5-Vim">2.5 Vim</a></li>
<li><a href="#2-6-Bash">2.6 Bash</a></li>
<li><a href="#2-7-Bash-%E5%8F%98%E9%87%8F">2.7 Bash 变量</a></li>
<li><a href="#2-8-Bash-%E4%BD%9C%E4%B8%9A">2.8 Bash 作业</a></li>
<li><a href="#2-9-BashBuiltin">2.9 BashBuiltin</a></li>
</ul>
<p><a href="#Chapter06-%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86"><strong>Chapter06 软件管理</strong></a></p>
<ul>
<li><a href="#6-1-%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86%E4%BB%8B%E7%BB%8D">6.1 软件管理介绍</a></li>
<li><a href="#6-2-rpm">6.2 rpm</a></li>
<li><a href="#6-3-yum">6.3 yum</a></li>
<li><a href="#6-4-dpkg">6.4 dpkg</a></li>
<li><a href="#6-5-apt">6.5 apt</a></li>
<li><a href="#6-6-repo">6.6 repo</a></li>
</ul>
<p><a href="#Chapter07-ssh"><strong>Chapter07 ssh</strong></a></p>
<ul>
<li><a href="#7-1-ssh">7.1 ssh</a></li>
<li><a href="#7-2-sshd">7.2 sshd</a></li>
<li><a href="#7-3-ssh-%E5%91%A8%E8%BE%B9%E6%8C%87%E4%BB%A4">7.3 ssh 周边指令</a></li>
</ul>
<p><a href="#Chapter08-%E7%BD%91%E7%BB%9C"><strong>Chapter08 网络</strong></a></p>
<ul>
<li><a href="#8-1-%E7%BD%91%E7%BB%9C%E4%BB%8B%E7%BB%8D">8.1 网络介绍</a></li>
<li><a href="#8-2-%E4%B8%BB%E6%9C%BA%E5%90%8D">8.2 主机名</a></li>
<li><a href="#8-3-DNS">8.2 DNS</a></li>
<li><a href="#8-4-NetworkManager">8.4 NetworkManager</a></li>
<li><a href="#8-5-netplan">8.5 netplan</a></li>
<li><a href="#8-6-%E7%BD%91%E7%BB%9C%E5%B7%A5%E5%85%B7">8.6 网络工具</a></li>
<li><a href="#8-7-iptables">8.7 iptables</a></li>
</ul>
<p><a href="#Chapter09-%E8%BF%9B%E7%A8%8B"><strong>Chapter09 进程</strong></a></p>
<ul>
<li><a href="#9-1-%E8%BF%9B%E7%A8%8B%E4%BB%8B%E7%BB%8D">9.1 进程介绍</a></li>
<li><a href="#9-2-%E8%BF%9B%E7%A8%8B%E6%8C%87%E4%BB%A4">9.2 进程指令</a></li>
<li><a href="#9-3-IO">9.3 IO</a></li>
<li><a href="#9-4-%E8%BF%9B%E7%A8%8B%E7%9B%91%E6%8E%A7">9.4 进程监控</a></li>
</ul>
<p><a href="#Chapter10-%E6%96%87%E4%BB%B6"><strong>Chapter10 文件</strong></a></p>
<ul>
<li><a href="#10-1-%E6%96%87%E4%BB%B6">10.1 文件</a></li>
<li><a href="#10-2-%E7%9B%AE%E5%BD%95">10.2 目录</a></li>
<li><a href="#10-3-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C">10.3 文件操作</a></li>
<li><a href="#10-4-%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6">10.4 查找文件</a></li>
<li><a href="#10-5-%E6%9D%83%E9%99%90%E5%92%8C%E5%B1%9E%E6%80%A7">10.5 权限和属性</a></li>
<li><a href="#10-6-%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90%E5%92%8C%E9%9A%90%E8%97%8F%E5%B1%9E%E6%80%A7">10.6 特殊权限和隐藏属性</a></li>
<li><a href="#10-7-%E5%8E%8B%E7%BC%A9">10.7 压缩</a></li>
</ul>
<p><a href="#Chapter11-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><strong>Chapter11 文件系统</strong></a></p>
<ul>
<li><a href="#11-1-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">11.1 文件系统</a></li>
<li><a href="#11-2-%E6%8C%82%E8%BD%BD">11.2 挂载</a></li>
<li><a href="#11-3-EXT4-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">11.3 EXT4 文件系统</a></li>
<li><a href="#11-4-XFS-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">11.4 XFS 文件系统</a></li>
<li><a href="#11-5-NFS">11.5 NFS</a></li>
</ul>
<p><a href="#Chapter12-%E7%A3%81%E7%9B%98%E5%92%8C%E5%88%86%E5%8C%BA"><strong>Chapter12 磁盘和分区</strong></a></p>
<ul>
<li><a href="#12-1-%E5%88%86%E5%8C%BA">12.1 分区</a></li>
<li><a href="#12-2-SWAP">12.2 SWAP</a></li>
</ul>
<p><a href="#Chapter13-systemd"><strong>Chapter13 systemd</strong></a></p>
<ul>
<li><a href="#13-1-systemd-%E4%BB%8B%E7%BB%8D">13.1 systemd 介绍</a></li>
<li><a href="#13-2-unit">13.2 unit</a></li>
<li><a href="#13-3-service">13.3 service</a></li>
<li><a href="#13-4-journal">13.4 journal</a></li>
<li><a href="#13-5-systemd-%E6%8C%87%E4%BB%A4">13.5 systemd 指令</a></li>
</ul>
<p><a href="#Chapter14-%E5%B8%B8%E7%94%A8%E6%9C%8D%E5%8A%A1"><strong>Chapter14 常用服务</strong></a></p>
<ul>
<li><a href="#14-1-crontab">14.1 crontab</a></li>
<li><a href="#14-1-ntpd-%E5%92%8C-chronyd">14.2 ntpd 和 chronyd</a></li>
<li><a href="#14-3-ftpd">14.3 ftpd</a></li>
</ul>
<p><a href="#Chapter15-%E7%A1%AC%E4%BB%B6"><strong>Chapter15 硬件</strong></a></p>
<ul>
<li><a href="#15-1-%E7%A1%AC%E4%BB%B6%E6%9F%A5%E7%9C%8B">15.1 硬件查看</a></li>
</ul>
<hr>
<h2 id="帮助"><a href="#帮助" class="headerlink" title="帮助"></a>帮助</h2><ol>
<li><strong>菜鸟教程 Linux 命令手册</strong></li>
</ol>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-command-manual.html">https://www.runoob.com/linux/linux-command-manual.html</a></li>
</ul>
<ol start="2">
<li><strong>Redhat7 官方文档</strong></li>
</ol>
<ul>
<li>主页 <a target="_blank" rel="noopener" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7</a></li>
<li>安全 Installation Guide <a target="_blank" rel="noopener" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/index</a></li>
<li>系统管理 System Administrator’s Guide <a target="_blank" rel="noopener" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/index</a></li>
<li>常用命令 Common administrative commands <a target="_blank" rel="noopener" href="https://access.redhat.com/articles/1189123">https://access.redhat.com/articles/1189123</a></li>
<li>内核管理 Kernel Administration Guide <a target="_blank" rel="noopener" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/kernel_administration_guide/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/kernel_administration_guide/index</a></li>
<li>性能调整 Performance Tuning Guide <a target="_blank" rel="noopener" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/performance_tuning_guide/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/performance_tuning_guide/index</a></li>
<li>资源管理 Resource Management Guide <a target="_blank" rel="noopener" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/resource_management_guide/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/resource_management_guide/index</a></li>
<li>安全管理 Security Guide <a target="_blank" rel="noopener" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/security_guide/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/security_guide/index</a></li>
<li>存储管理 Storage Administration Guide <a target="_blank" rel="noopener" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/storage_administration_guide/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/storage_administration_guide/index</a></li>
<li>逻辑卷 Logical Volume Manager Administration <a target="_blank" rel="noopener" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/logical_volume_manager_administration/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/logical_volume_manager_administration/index</a></li>
</ul>
<hr>
<h2 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h2><ol>
<li><strong>待整理</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">* 1.1 Linux 帮助</span><br><span class="line">  - man 指令</span><br><span class="line">    - man man</span><br><span class="line"></span><br><span class="line">* 1.3 Linux 用户和组</span><br><span class="line">  - useradd、userdel、usermod</span><br><span class="line">  - groupadd、groupdel、groupmod</span><br><span class="line">  - /etc/passwd、/etc/group、/etc/shadow</span><br><span class="line">  - passwd</span><br><span class="line"></span><br><span class="line">* 2.1 字节流指令</span><br><span class="line">  - diff 指令</span><br><span class="line">    - info diffutil，里面记录了关于 diff 的全部详细知识，以及 cmp、patch 等指令</span><br><span class="line">  - sort 指令</span><br><span class="line">    - info sort</span><br><span class="line">  - expr 指令，命令行计算器</span><br><span class="line"></span><br><span class="line">* 6.2 yum</span><br><span class="line">  - yum.conf</span><br><span class="line">  - yum-config-manager</span><br><span class="line">  - repoquery-man</span><br><span class="line">  - reposync-man</span><br><span class="line">  - repodiff</span><br><span class="line">  - repotrack</span><br><span class="line">  - yumdownloader</span><br><span class="line">  - createrepo</span><br><span class="line"></span><br><span class="line">* 6.5 apt</span><br><span class="line">  - apt 数据库</span><br><span class="line"></span><br><span class="line">* 7.4 ssh 周边指令</span><br><span class="line">  - rsync 指令</span><br><span class="line"></span><br><span class="line">* 8.1 网络介绍</span><br><span class="line">  - TCP 三次握手流程</span><br><span class="line">  - https 流程</span><br><span class="line"></span><br><span class="line">* 8.4 NetworkManager</span><br><span class="line">  - nmcli</span><br><span class="line">  - ifup</span><br><span class="line">  - ifdown</span><br><span class="line"></span><br><span class="line">* 8.5 netplan</span><br><span class="line">  - netplan</span><br><span class="line"></span><br><span class="line">* 8.6 网络工具</span><br><span class="line">  - net-tools</span><br><span class="line">    - ifconfig</span><br><span class="line">    - route</span><br><span class="line">    - arp</span><br><span class="line">  - iproute</span><br><span class="line">    - ip</span><br><span class="line">  - iputils</span><br><span class="line">    - arping</span><br><span class="line">    - tracepath</span><br><span class="line"></span><br><span class="line">* 其他工具</span><br><span class="line">  - ethtool</span><br><span class="line">  - nmap：强大的主机发现/端口扫描工具</span><br><span class="line">  - iperf3</span><br><span class="line"></span><br><span class="line">* 9.1 进程</span><br><span class="line">  - task，linux 中，task 和 process 之间是什么关系？</span><br><span class="line"></span><br><span class="line">* 9.3 IO</span><br><span class="line">  - 丢弃型 IO，discard</span><br><span class="line">  - IO request marge</span><br><span class="line">  - 一个 IO 请求可能包含多个逻辑请求 logical request</span><br><span class="line">  - 持久设备名称 persistent device names https://www.ibm.com/docs/en/linux-on-systems?topic=later-persistent-device-naming</span><br><span class="line"></span><br><span class="line">* 9.4 进程监控</span><br><span class="line">  - top</span><br><span class="line">    - alternate-display</span><br><span class="line">    - Secure mode</span><br><span class="line"></span><br><span class="line">* 10.7 压缩</span><br><span class="line">  - tar</span><br><span class="line">  - unzip</span><br><span class="line"></span><br><span class="line">* 14.1 crond</span><br><span class="line">  - crontab</span><br><span class="line">  - at</span><br><span class="line"></span><br><span class="line">* 15.1</span><br><span class="line">  - lspci</span><br><span class="line"></span><br><span class="line">* 其他</span><br><span class="line">  - local</span><br><span class="line">  - 压力测试工具 stress</span><br><span class="line">  - chrony</span><br><span class="line">  - sysctl</span><br><span class="line">  - vm 共享文件夹: vmhgfs-fuse /mnt/hgfs</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>不整理</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">* 2.3 awk</span><br><span class="line">  - 比特位函数 Bit Manipulations Functions</span><br><span class="line">  - 类型函数 Type Function</span><br><span class="line">    - isarray(x)</span><br><span class="line">  - 国际化函数 Internationalization Functions</span><br><span class="line"></span><br><span class="line">* 2.4 vim</span><br><span class="line">  - buffer</span><br><span class="line">  - history</span><br><span class="line">  - register</span><br><span class="line">  - replace mode</span><br><span class="line">  - complation</span><br><span class="line">  - 多文件编辑</span><br><span class="line">  - tag</span><br><span class="line">  - Visual Mode 中 extend highlighted area</span><br><span class="line">  - 语法高亮</span><br><span class="line"></span><br><span class="line">* 2.5 Bash</span><br><span class="line">  - 历史命令</span><br><span class="line">    - history 命令</span><br><span class="line">    - HISTFILE</span><br><span class="line">    - HISTFILESIZE</span><br><span class="line">    - HISTSIZE</span><br><span class="line">    - HISTTIMEFORMAT</span><br><span class="line">  - 目录栈 dir stack</span><br><span class="line">    - dirs</span><br><span class="line">    - popd</span><br><span class="line">    - pushd</span><br><span class="line">  - readline</span><br><span class="line">    - completation</span><br><span class="line">  - 协程 coproc</span><br><span class="line">  - 命令哈希 hash</span><br><span class="line">  - 函数执行栈 execution call stack</span><br><span class="line">  - 捕获异常 trap</span><br><span class="line"></span><br><span class="line">* 2.6 BashBuiltin</span><br><span class="line">  - eval、exec</span><br><span class="line"></span><br><span class="line">* 8.7 iptables</span><br><span class="line">  - iptables snat、dnat</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="Chapter01-Linux-基础"><a href="#Chapter01-Linux-基础" class="headerlink" title="Chapter01 Linux 基础"></a>Chapter01 Linux 基础</h1><hr>
<h2 id="1-1-Linux-帮助"><a href="#1-1-Linux-帮助" class="headerlink" title="1.1 Linux 帮助"></a>1.1 Linux 帮助</h2><hr>
<h3 id="知识点：help-指令"><a href="#知识点：help-指令" class="headerlink" title="知识点：help 指令"></a>知识点：help 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 查看 BashBuiltin 命令的帮助</span><br><span class="line">  - 省略 Pattern 则打印 BashBuiltin 命令的列表</span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  help [-dms] [Pattern]</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -d    打印命令的简略描述</span><br><span class="line">  -m    manpage-like format</span><br><span class="line">  -s    short usage synopsis</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：man-指令"><a href="#知识点：man-指令" class="headerlink" title="知识点：man 指令"></a>知识点：man 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - system&#x27;s manual pager</span><br><span class="line"></span><br><span class="line">* man 相关包</span><br><span class="line">  - mandb</span><br><span class="line">    - man(1)</span><br><span class="line">    - mandb(8)</span><br><span class="line">  - man-pages</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  man [OPTIONS] [SECTION] [PATTERN]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>主模式选项 Main modes of operation</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* -f, --whatis</span><br><span class="line"></span><br><span class="line">* -k, --apropos</span><br><span class="line">  - 搜索 manpage 的 description</span><br><span class="line"></span><br><span class="line">* -K, --global-apropos</span><br><span class="line">  - 搜索 manpage 的 context</span><br><span class="line"></span><br><span class="line">* -w, --where, --path, --location</span><br><span class="line">  - 仅输出 manpage 文件名</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>搜索选项 Finding manual pages</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 指定搜索 manpage 时的一些配置</span><br><span class="line">  - 推荐配合 -f 或 -k 使用</span><br><span class="line"></span><br><span class="line">* -i, --ignore-case</span><br><span class="line"></span><br><span class="line">* -I, --match-case</span><br><span class="line"></span><br><span class="line">* --regex</span><br><span class="line"></span><br><span class="line">* --names-only</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* -d, --debug</span><br><span class="line"></span><br><span class="line">* --no-hyphenation, --nh    在解析 manpage 时，对跨行单词不再使用连字符</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>man 文档分类 Section</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* 1</span><br><span class="line">  - 可执行程序或 SHELL 命令，Executable programs or shell commands</span><br><span class="line"></span><br><span class="line">* 2</span><br><span class="line">  - 系统呼叫，System calls (functions provided by the kernel)</span><br><span class="line"></span><br><span class="line">* 3</span><br><span class="line">  - 库函数，Library calls (functions within program libraries)</span><br><span class="line"></span><br><span class="line">* 4</span><br><span class="line">  - 特殊文件，Special files (usually found in /dev)</span><br><span class="line"></span><br><span class="line">* 5</span><br><span class="line">  - 文件格式，File formats and conventions eg /etc/passwd</span><br><span class="line"></span><br><span class="line">* 6</span><br><span class="line">  - 游戏，Games</span><br><span class="line"></span><br><span class="line">* 7</span><br><span class="line">  - 杂，Miscellaneous (including macro packages and conventions), e.g. man(7), groff(7)</span><br><span class="line"></span><br><span class="line">* 8</span><br><span class="line">  - 系统管理命令，System administration commands (usually only for root)</span><br><span class="line"></span><br><span class="line">* 9</span><br><span class="line">  - 内核例程，Kernel routines [Non standard]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>环境变量</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* MANWIDTH</span><br><span class="line">  - 设置 man 在打印时的宽度</span><br><span class="line">  - 如果 unset，默认采用屏幕的适合的最大宽度</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：info-指令"><a href="#知识点：info-指令" class="headerlink" title="知识点：info 指令"></a>知识点：info 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* GNU info</span><br><span class="line"></span><br><span class="line">* 交叉引用 cross-reference</span><br><span class="line">  - info 文档中内置的跳转功能</span><br><span class="line">  - 可以跳转到 info 页面，也可以跳转到 info 页面中的某处内容</span><br><span class="line"></span><br><span class="line">* 节点 node</span><br><span class="line">  - 交叉引用的一种，只会跳转到 info 页面</span><br><span class="line">  - info 通过 node 来实现对目录的跳转</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  info [OPTION] [MANUAL] [MENU-OR-INDEX-ITEM...]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* -k STRING, --apropos=STRING</span><br><span class="line"></span><br><span class="line">* --index-search STRING</span><br><span class="line">  - 打开 info 页面后，直接转跳到在 index 中搜索到的章节</span><br><span class="line"></span><br><span class="line">* -n NODENAME, --node NODENAME</span><br><span class="line">  - 打开 info 页面后，直接转跳到指定的 node 页面</span><br><span class="line"></span><br><span class="line">* -v NAME=VALUE, --variable=NAME=VALUE</span><br><span class="line">  - 同时设置变量</span><br><span class="line"></span><br><span class="line">* -w, --where, --location</span><br><span class="line">  - 不打开 info 页面，而是显示出找到的 info manual 文件</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>info 初始化文件</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  ~/.infokey</span><br><span class="line"></span><br><span class="line">* #var 部分</span><br><span class="line">  - 一个 &quot;#var&quot; 标识开始</span><br><span class="line">  - 每行设置一个变量</span><br><span class="line">  - 格式为，变量名、等号、变量值，不能再加其他内容</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#var</span><br><span class="line">mouse=normal-tracking</span><br><span class="line">scroll-behavior=Page Only</span><br><span class="line">link-style=cyan</span><br><span class="line">active-link-style=cyan,bold</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：info-内部操作"><a href="#知识点：info-内部操作" class="headerlink" title="知识点：info 内部操作"></a>知识点：info 内部操作</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* info commands</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>移动光标 Moving the Cursor</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* 方向键，UP，DOWN，LEFT，RIGHT</span><br><span class="line"></span><br><span class="line">* C-a     光标移动到行首</span><br><span class="line"></span><br><span class="line">* C-e     光标移动到行尾</span><br><span class="line"></span><br><span class="line">* M-f     光标 Move forward 一个单词</span><br><span class="line"></span><br><span class="line">* M-b     光标 Move backward 一个单词</span><br><span class="line"></span><br><span class="line">* M-&lt;, b  光标移动到 node 的开头</span><br><span class="line"></span><br><span class="line">* N-&gt;, e  光标移动到 mode 的结尾</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>窗口翻页 Scrolling Window</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 注意</span><br><span class="line">  - 翻页是否会跨 node 会受到 scroll-behavior 变量的控制</span><br><span class="line"></span><br><span class="line">* PageUp, del          向上翻页，默认会跨 node</span><br><span class="line"></span><br><span class="line">* PageDown, space      向下翻页，默认会跨 node</span><br><span class="line"></span><br><span class="line">* C-v                  向下翻页，不跳 node</span><br><span class="line"></span><br><span class="line">* M-v                  向上翻页，不跳 node</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>交叉引用跳转 Selecting Cross-references</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* Tab           将 cursor 移动到 next cross-reference 上</span><br><span class="line"></span><br><span class="line">* Shift+Tab     将 cursor 移动到 previous cross-reference 上</span><br><span class="line"></span><br><span class="line">* Enter         跳到 cross-reference 页面上</span><br><span class="line"></span><br><span class="line">* i             index-search，在 echo-area 中输入 index-name，然后回车跳转到相应的 index</span><br><span class="line"></span><br><span class="line">* I             virtual-index，在 echo-area 中输入 index-name，然后回车显示所有匹配的 index</span><br><span class="line"></span><br><span class="line">* ,             next-index-match</span><br><span class="line"></span><br><span class="line">* 1, 2 ... 9    menu-digit</span><br><span class="line"></span><br><span class="line">* 0             last-menu-item</span><br><span class="line"></span><br><span class="line">* m             menu-item，在 echo-area 输入 menu，然后回车跳转到相应的 menu</span><br><span class="line"></span><br><span class="line">* f,r           xref-item</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>节点跳转 Selecting a Node</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* n   next-node</span><br><span class="line"></span><br><span class="line">* p   prev-node</span><br><span class="line"></span><br><span class="line">* u   up-node</span><br><span class="line"></span><br><span class="line">* l   history-node，返回历史 node</span><br><span class="line"></span><br><span class="line">* t   top-node</span><br><span class="line"></span><br><span class="line">* d   dir-node</span><br><span class="line"></span><br><span class="line">* g</span><br><span class="line">  - 跳到其他 node，可以是别的 info 中</span><br><span class="line">  - 例如，g(bash)Arrays，表示跳到 bash 的 info 文件中的 Arrays node 页面</span><br><span class="line">  - 可以使用 &#x27;l&#x27; 键返回原始页面</span><br><span class="line"></span><br><span class="line">* C-x, C-b</span><br><span class="line">  - 在新的 window 中打开 visited-nodes list</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>搜索 Search</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - GNU info 的搜索都支持 regex</span><br><span class="line">  - 默认采用普通搜索，即在所有 info file 中搜索</span><br><span class="line">  - tree-search，只在当前 node 及其 subnode 中搜索</span><br><span class="line">    - 一种用法，在 dir node 中使用</span><br><span class="line">    - 一种用法，只在某个 node 中使用</span><br><span class="line"></span><br><span class="line">* /, s        search</span><br><span class="line"></span><br><span class="line">* ?           search-backward</span><br><span class="line"></span><br><span class="line">* &#125;, C-x n    移动到 next 搜索结果</span><br><span class="line"></span><br><span class="line">* &#123;, C-x N    移动到 previous 搜索结果</span><br><span class="line"></span><br><span class="line">* M-/         tree-search</span><br><span class="line"></span><br><span class="line">* M-&#125;         tree-search-next</span><br><span class="line"></span><br><span class="line">* M-&#123;         tree-search-previous</span><br><span class="line"></span><br><span class="line">* M-x clear-search    清除搜索高亮</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>窗口控制 Window Commands</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* C-x o   next-window</span><br><span class="line"></span><br><span class="line">* M-x o   previous-window</span><br><span class="line"></span><br><span class="line">* C-x 0   delete-window</span><br><span class="line"></span><br><span class="line">* C-x 1   keep-one-window</span><br><span class="line"></span><br><span class="line">* C-x 2   split-window</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他命令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* H             get-help-window</span><br><span class="line"></span><br><span class="line">* =             display-file-info</span><br><span class="line"></span><br><span class="line">* C-g           abort-key，取消当前的操作</span><br><span class="line"></span><br><span class="line">* q, C-x C-c    quit</span><br><span class="line"></span><br><span class="line">* ESC C-f       show-footnotes</span><br><span class="line"></span><br><span class="line">* M-x set-variable</span><br><span class="line"></span><br><span class="line">* M-x describe-variable</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="1-2-Linux-概念"><a href="#1-2-Linux-概念" class="headerlink" title="1.2 Linux 概念"></a>1.2 Linux 概念</h2><hr>
<h3 id="知识点：文件描述符"><a href="#知识点：文件描述符" class="headerlink" title="知识点：文件描述符"></a>知识点：文件描述符</h3><ol>
<li><strong>用户进程对文件的访问</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* 现代操作系统会把内存划分为两个区域，用户空间 use space、内核空间 kernel space</span><br><span class="line"></span><br><span class="line">* 用户进程在 user space 中执行</span><br><span class="line"></span><br><span class="line">* 系统内核在 kernel space 中执行</span><br><span class="line"></span><br><span class="line">* 用户进程没有权限直接访问硬件资源，如读写磁盘文件、socket 使用网卡等</span><br><span class="line"></span><br><span class="line">* 用户进程想要读写文件，必须要向内核发起读写请求，即 system call</span><br><span class="line"></span><br><span class="line">* 内核收到用户进程的 system call 后，负责访问硬件，并把结果返回给用户进程</span><br><span class="line">  - 内核从硬件处，将数据复制到 kernel space 中</span><br><span class="line">  - 内核将数据，从 kernel space 复制到 user space 中</span><br><span class="line">  - 用户进程在 user space 中对数据进行各种操作</span><br></pre></td></tr></table></figure>
<img src="/2000/01/01/Blog01-Linux/%E7%94%A8%E6%88%B7%E8%BF%9B%E7%A8%8B%E5%AF%B9%E6%96%87%E4%BB%B6%E7%9A%84%E8%AE%BF%E9%97%AE.png"></li>
<li><strong>文件描述符 file descriptor</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 文件描述符 fd，是一个抽象的指示符，用一个非负整数表示</span><br><span class="line">  - 文件描述符指向了由系统内核维护的一个 file table 中的某个条目 entry</span><br><span class="line">  - 一个文件描述符就代表一个 file handle</span><br><span class="line">  - 通俗解释：</span><br><span class="line">    因为用户进程无法直接访问硬件</span><br><span class="line">    因此当用户进程向内核发起 system call 打开一个文件时</span><br><span class="line">    用户进程中需要有一个东西用来标识着打开的文件</span><br><span class="line">    这个东西就是 fd</span><br><span class="line"></span><br><span class="line">* /proc/pid/fd/</span><br><span class="line">  - 查看进程的 fd，以及 fd 指向的文件</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>文件表 file table</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 和文件描述符相关的有三张表，file descriptor table、file table、inode table</span><br><span class="line"></span><br><span class="line">* file descriptor table</span><br><span class="line">  - 由用户进程所有，每个进程都有一个这样的表</span><br><span class="line">  - 记录了进程打开的文件所代表的 fd</span><br><span class="line">  - fd 的值映射到 file table 中的条目 entry</span><br><span class="line">  - 每个进程都会预留 3 个默认的fd，stdin、stdout、stderr，分别对应 0、1、2</span><br><span class="line"></span><br><span class="line">* file table</span><br><span class="line">  - 由系统内核维护，全局唯一</span><br><span class="line">  - 记录了所有的进程对文件的打开状态，如可读、可写等，相当于句柄</span><br><span class="line">  - file table 的 entry 映射到 inode table 中 entry</span><br><span class="line"></span><br><span class="line">* inode table</span><br><span class="line">  - 全局唯一</span><br><span class="line">  - inode table 的 entry 指向了真正的文件地址，如磁盘中的位置</span><br><span class="line">  - 每个 entry 全局唯一</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<img src="/2000/01/01/Blog01-Linux/%E6%96%87%E4%BB%B6%E8%A1%A8.jpg"></li>
<li><strong>流程</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* 打开文件</span><br><span class="line">  - 用户进程向内核发起 system call open()</span><br><span class="line">  - 内核允许用户进程请求</span><br><span class="line">  - 内核创建一个 entry 插入到 file table，并返回 file descriptor</span><br><span class="line">  - 用户进程将 fd 插入到 file descriptor table 中</span><br><span class="line"></span><br><span class="line">* 读取数据</span><br><span class="line">  - 用户进程向内核发起 system call read()，其中要包含相关的 fd</span><br><span class="line">  - 内核定位到具体的文件，通过 fd –&gt; file table –&gt; inode table</span><br><span class="line">  - 内核向磁盘发起读取请求，读取数据，返回数据给用户进程</span><br><span class="line"></span><br><span class="line">* 其他</span><br><span class="line">  - 对于 open()、read()、write()、select()、poll() 等 system call，大多需要传递 fd 到这些函数中作为参数</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="1-3-Linux-用户和组"><a href="#1-3-Linux-用户和组" class="headerlink" title="1.3 Linux 用户和组"></a>1.3 Linux 用户和组</h2><hr>
<h3 id="知识点：useradd-指令"><a href="#知识点：useradd-指令" class="headerlink" title="知识点：useradd 指令"></a>知识点：useradd 指令</h3><hr>
<h3 id="知识点：userdel-指令"><a href="#知识点：userdel-指令" class="headerlink" title="知识点：userdel 指令"></a>知识点：userdel 指令</h3><hr>
<h3 id="知识点：usermod-指令"><a href="#知识点：usermod-指令" class="headerlink" title="知识点：usermod 指令"></a>知识点：usermod 指令</h3><hr>
<h3 id="知识点：groupadd-指令"><a href="#知识点：groupadd-指令" class="headerlink" title="知识点：groupadd 指令"></a>知识点：groupadd 指令</h3><hr>
<h3 id="知识点：groupdel-指令"><a href="#知识点：groupdel-指令" class="headerlink" title="知识点：groupdel 指令"></a>知识点：groupdel 指令</h3><hr>
<h3 id="知识点：-x2F-etc-x2F-passwd、-x2F-etc-x2F-group、-x2F-etc-x2F-shadow"><a href="#知识点：-x2F-etc-x2F-passwd、-x2F-etc-x2F-group、-x2F-etc-x2F-shadow" class="headerlink" title="知识点：&#x2F;etc&#x2F;passwd、&#x2F;etc&#x2F;group、&#x2F;etc&#x2F;shadow"></a>知识点：&#x2F;etc&#x2F;passwd、&#x2F;etc&#x2F;group、&#x2F;etc&#x2F;shadow</h3><hr>
<h3 id="知识点：passwd-指令"><a href="#知识点：passwd-指令" class="headerlink" title="知识点：passwd 指令"></a>知识点：passwd 指令</h3><hr>
<h3 id="知识点：chage-指令"><a href="#知识点：chage-指令" class="headerlink" title="知识点：chage 指令"></a>知识点：chage 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 查看、修改账号的密码有效期、密码过期时间等</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  chage [OPTIONS] USER</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* -h, --help</span><br><span class="line">  - 打印帮助信息</span><br><span class="line"></span><br><span class="line">* -l, --list</span><br><span class="line">  - 查看账号的密码有效期信息</span><br><span class="line"></span><br><span class="line">* -m, --mindays MIN_DAYS</span><br><span class="line">  - 修改账号每次改密码的最小间隔，天</span><br><span class="line">  - 小于此间隔，不能改密码</span><br><span class="line"></span><br><span class="line">* -M, --maxdays MAX_DAYS</span><br><span class="line">  - 修改账号每次改密码的最大间隔，天</span><br><span class="line">  - 大于此间隔，则必须改密码</span><br><span class="line">  - 计算方式为，LAST_DAY + MAX_DAYS &gt;= CURRENT_DAY，则不需要改密码</span><br><span class="line"></span><br><span class="line">* -d, --lastday LAST_DAY</span><br><span class="line">  - 修改账号的 &quot;Last password change&quot; 字段的值</span><br><span class="line">  - &quot;LAST_DAY&quot; 表示从 1970-01-01 开始的天数</span><br><span class="line"></span><br><span class="line">* -E, --expiredate EXPIRE_DATE</span><br><span class="line">* -I, --inactive INACTIVE</span><br><span class="line">  - 修改账号的过期时间、不可用的时间</span><br><span class="line">  - &quot;EXPIRE_DATE&quot;、&quot;INACTIVE&quot; 表示从 1970-01-01 开始的天数，&quot;-1&quot; 表示永不过期</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看账号的密码过期的设置</span></span><br><span class="line">chage -l zabbix</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改账号的密码，每隔 90 天必须改一次</span></span><br><span class="line">chage -M 90 zabbix</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改账号的密码不需要强制修改</span></span><br><span class="line">chage -M 90 zabbix</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改账号的最后一次修改密码的时间为今天</span></span><br><span class="line">chage -d $((($(date +%s)-$(date +%s --date &quot;1970-01-01&quot;))/(3600*24))) zabbix</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="Chapter02-shell-脚本"><a href="#Chapter02-shell-脚本" class="headerlink" title="Chapter02 shell 脚本"></a>Chapter02 shell 脚本</h1><hr>
<h2 id="2-1-常用脚本指令"><a href="#2-1-常用脚本指令" class="headerlink" title="2.1 常用脚本指令"></a>2.1 常用脚本指令</h2><hr>
<h3 id="知识点：env-指令"><a href="#知识点：env-指令" class="headerlink" title="知识点：env 指令"></a>知识点：env 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 在一个修改过的子环境中运行程序</span><br><span class="line">  - 设置一个子环境，并设定子环境中的变量的值，然后在子环境中运行 COMMAND</span><br><span class="line">  - 如果没有 COMMAND，则只进行环境修改，并打印出子环境的设置</span><br><span class="line">  - env 不会影响 current shell 的环境</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  env [OPTIONS] [NAME=VALUE]... [COMMAND [ARG]...]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* -</span><br><span class="line">  - 一个单独的减号 &#x27;-&#x27;，相当于 -i 选项</span><br><span class="line"></span><br><span class="line">* -i, --ignore-environment</span><br><span class="line">  - 以一个空环境开始</span><br><span class="line"></span><br><span class="line">* -u, --unset=NAME</span><br><span class="line">  - 在子环境中去除某个变量</span><br><span class="line"></span><br><span class="line">* -C, --chdir=DIR</span><br><span class="line">  - 切换子环境的工作目录</span><br><span class="line"></span><br><span class="line">* -S, --split-string=String</span><br><span class="line">  - 将 &#x27;String&#x27; 进行切分，并作为多个参数进行识别</span><br><span class="line">  - 通常用在脚本的 shebang 中</span><br><span class="line">  - 见范例</span><br><span class="line"></span><br><span class="line">* -0, --null</span><br><span class="line">  - 输出环境时，以 0 byte 结尾，而不是 newline</span><br><span class="line"></span><br><span class="line">* -v, --debug</span><br><span class="line">  - 打印 verbose 信息</span><br><span class="line"></span><br><span class="line">* --help</span><br><span class="line">* --version</span><br><span class="line">  - 打印版本信息，打印帮助信息</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* #!/usr/bin/env -S perl -w -T</span><br><span class="line">  - 可以正常运行 perl 脚本</span><br><span class="line"></span><br><span class="line">* #!/usr/bin/env perl -w -T</span><br><span class="line">  - 可能会失败，报错 /usr/bin/env: &#x27;perl -w -T&#x27;: No such file or directory</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：expr-指令"><a href="#知识点：expr-指令" class="headerlink" title="知识点：expr 指令"></a>知识点：expr 指令</h3><ol>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 对 expression 执行运算，并打印运算结果到 stdout</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  expr EXPRESSION</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  --help      打印帮助信息并退出</span><br><span class="line">  --version   打印帮助版本并退出</span><br><span class="line"></span><br><span class="line">* 退出状态</span><br><span class="line">  - 0   计算结果非 null 也非 0</span><br><span class="line">  - 1   计算结果为 null 或为 0</span><br><span class="line">  - 2   表达式不合法</span><br><span class="line">  - 3   内部错误</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>表达式</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 表达式的每一个 argument 都应该是一个独立的 token，即每个 argument 都应该使用 space 间隔</span><br><span class="line">  - 对于特殊字符 &#x27;(&#x27;、&#x27;)&#x27;、&#x27;&amp;&#x27;、都需要加引用，以防止被 shell 给解析</span><br><span class="line"></span><br><span class="line">* 算术表达式</span><br><span class="line">  - &#x27;+ -&#x27;     加法 Addition、减法 subtraction</span><br><span class="line">  - &#x27;* / %&#x27;   乘法 Multiplication、除法 division、求余数 remainder</span><br><span class="line"></span><br><span class="line">* 关系表达式</span><br><span class="line">  - &#x27;&amp;&#x27;   如果两个参数都不是 null 或 0，则输出第一个 argument，否则输出 0</span><br><span class="line">  - &#x27;|&#x27;   如果两个参数都不是 null 或 0，则输出第一个 argument，否则如果第二个参数不是 null 或 0，则输出第二个 argument，否则输出 0</span><br><span class="line">  - &#x27;&lt; &lt;= = == != &gt;= &gt;&#x27;   关系运算，根据运算结果返回相应的 exit status，而不是输出到 stdout 上</span><br><span class="line"></span><br><span class="line">* 字符表达式</span><br><span class="line">  - STRING                            直接打印字符串</span><br><span class="line">  - length STRING                     返回 STRING 的长度</span><br><span class="line">  - index STRING CHARSET              返回 STRING 中第一个符合字符集合的字符的位置</span><br><span class="line">  - substr STRING POSITION LENGTH     返回 STRING 的子字符串，POSITION 从 1 开始计数</span><br><span class="line"></span><br><span class="line">* 正则匹配</span><br><span class="line">  - match STRING REGEX</span><br><span class="line">  - STRING : REGEX</span><br><span class="line">    - 对 STRING 进行正则匹配</span><br><span class="line">    - REGEX 默认以 &#x27;^&#x27; 开头，无法去除</span><br><span class="line">    - 默认输出匹配的字符串的长度</span><br><span class="line">    - REGEX 中如果使用了 &#x27;\(&#x27; 和 &#x27;\)&#x27;，则输出匹配到的字符串内容，只有第一个 &#x27;\(...\)&#x27; 对中的内容会被输出</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 每个 argument 都要是独立的 token</span></span><br><span class="line">root@Ubuntu01:~# expr 3+2</span><br><span class="line">3+2</span><br><span class="line">root@Ubuntu01:~# expr 3 + 2</span><br><span class="line">5</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 括号 <span class="string">&#x27;(&#x27;</span> 和 <span class="string">&#x27;)&#x27;</span> 需要加引号，否则会被 bash 解析</span></span><br><span class="line">root@Ubuntu01:~# expr ( 3 + 2 )</span><br><span class="line">-bash: syntax error near unexpected token `3&#x27;</span><br><span class="line">root@Ubuntu01:~# expr &#x27;(&#x27; 3 + 2 &#x27;)&#x27;</span><br><span class="line">5</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关系运算只返回 <span class="built_in">exit</span> status</span></span><br><span class="line">root@Ubuntu01:~# expr 3 &gt; 2</span><br><span class="line">root@Ubuntu01:~# expr 3 &gt; 2 &amp;&amp; echo &#x27;true&#x27;</span><br><span class="line">true</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 正则匹配</span></span><br><span class="line">root@Ubuntu01:~# expr &#x27;this is a test&#x27; : &#x27;\(t.*a\)&#x27;</span><br><span class="line">this is a</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="2-2-字节流指令"><a href="#2-2-字节流指令" class="headerlink" title="2.2 字节流指令"></a>2.2 字节流指令</h2><hr>
<h3 id="知识点：cat-指令"><a href="#知识点：cat-指令" class="headerlink" title="知识点：cat 指令"></a>知识点：cat 指令</h3><ol>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 将文件或 STDIN，与 STDOUT 连接起来</span><br><span class="line">  - 如果省略文件，或者文件是 &#x27;-&#x27;，表示读取 STDIN</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  cat [OPTIONS] [FILE]...</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">* -A, --show-all</span><br><span class="line">  - 相当于 -vET</span><br><span class="line"></span><br><span class="line">* -v, --show-nonprinting</span><br><span class="line">  - 使用 ^XX 或 M-XX 的方式显示不可打印的字符</span><br><span class="line"></span><br><span class="line">* -E, --show-ends</span><br><span class="line">  - 使用 $ 符号显示断行</span><br><span class="line"></span><br><span class="line">* -T, --show-tabs</span><br><span class="line">  - 使用 ^I 显示制表符 tab</span><br><span class="line"></span><br><span class="line">* -n, --number</span><br><span class="line">  - 输出内容加行号</span><br><span class="line"></span><br><span class="line">* -b, --number-nonblank</span><br><span class="line">  - 输出内容中的非空行加行号</span><br><span class="line"></span><br><span class="line">* -s, --squeeze-blank</span><br><span class="line">  - 压缩输出中的连续空行</span><br><span class="line"></span><br><span class="line">* --help</span><br><span class="line">  - 打印帮助信息</span><br><span class="line"></span><br><span class="line">* --version</span><br><span class="line">  - 打印版本信息</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：grep-指令"><a href="#知识点：grep-指令" class="headerlink" title="知识点：grep 指令"></a>知识点：grep 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 打印与 Pattern 匹配的行</span><br><span class="line">  - 当使用 &quot;-e&quot;、&quot;-f&quot; 指定了多个 Pattern 时，多个 Pattern 之间为 or 逻辑</span><br><span class="line">  - 当指定多个 File 时，grep 会自动给每个输出行添加前缀</span><br><span class="line">  - grep 支持三种正则，basic (BRE)、extended (ERE)、perl-compatible (PCRE)</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  grep [OPTIONS] [Pattern] [Files]</span><br><span class="line"></span><br><span class="line">* 环境变量</span><br><span class="line">  GREP_COLORS，控制 grep 的高亮显示颜色</span><br><span class="line"></span><br><span class="line">* 注意</span><br><span class="line">  - grep 实现 Pattern 与 Pattern 之间 or 的逻辑很简单，但 and 逻辑，只能通过多个 grep 以管道的方式来实现</span><br><span class="line">  - 见 info grep，10. I can do &quot;OR&quot; with &#x27;|&#x27;, but what about &quot;AND&quot;?</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">* 基本选项</span><br><span class="line">  --help</span><br><span class="line">  -V, --version</span><br><span class="line"></span><br><span class="line">* 正则控制</span><br><span class="line">  -G, --basic-regexp</span><br><span class="line">  -E, --extended-regexp</span><br><span class="line">  -P, --perl-regexp</span><br><span class="line">  -F, --fixed-strings     禁用 regexp 的解析</span><br><span class="line"></span><br><span class="line">* 匹配控制</span><br><span class="line">  -v, --invert-match              反向搜索</span><br><span class="line">  -i, --ignore-case               忽略大小写</span><br><span class="line">  --no-ignore-case                考虑大小写</span><br><span class="line">  -e Pattern, --regexp=Pattern    指定 Pattern，可以指定多个</span><br><span class="line">  -f File, --file=File            从文件中获取 Pattern，一行一个，可以指定多个</span><br><span class="line">  -w, --word-regexp               单词匹配，匹配结果必须是一个 word</span><br><span class="line">  -x, --line-regexp               全行匹配，匹配结果必须是一个 line</span><br><span class="line"></span><br><span class="line">* 内容控制</span><br><span class="line">  -A NUM, --after-context=NUM</span><br><span class="line">  -B NUM, --before-context=NUM</span><br><span class="line">  -C NUM, -NUM, --context=NUM       相当于 -A 加 -B</span><br><span class="line">  --group-separator=STRING          指定内容组之间的分隔符，默认为 &#x27;---&#x27;</span><br><span class="line">  --no-group-separator</span><br><span class="line"></span><br><span class="line">* 输出控制</span><br><span class="line">  -c, --count                 仅打印匹配的行的数量</span><br><span class="line">  -o, --only-matching         仅打印 matched parts</span><br><span class="line">  -m NUM, --max-count=NUM     指定对每个文件的最大匹配次数</span><br><span class="line">  -l, --files-with-matches    仅打印包含匹配行的文件名</span><br><span class="line">  -L, --files-without-match   仅打印不包含匹配行的文件名</span><br><span class="line">  --color[=WHEN]              高亮输出，WHEN 可以是 never、always、auto</span><br><span class="line"></span><br><span class="line">* 输出行前缀</span><br><span class="line">  -b, --byte-offset           在前缀中添加 offset</span><br><span class="line">  -H, --with-filename         在前缀中添加文件名</span><br><span class="line">  -h, --no-filename           不在前缀中添加文件名</span><br><span class="line">  -n, --line-number           前缀中包含行号</span><br><span class="line">  -T, --initial-tab           前缀使用 tab 排版</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 正则</span><br><span class="line">  man 7 regex</span><br><span class="line">  man 3 prec</span><br><span class="line">  man 3 pcresyntax</span><br><span class="line">  man 3 pcrepattern</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：printf-指令"><a href="#知识点：printf-指令" class="headerlink" title="知识点：printf 指令"></a>知识点：printf 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - C 风格的格式化输出</span><br><span class="line">  - Linux 上默认安装了两个 printf 指令，分别为 BashBuiltin 和 /usr/bin/printf，使用 &quot;env printf&quot; 的方式可以强制使用 /usr/bin/printf</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  printf [-v Var] Format [Arguments]</span><br><span class="line"></span><br><span class="line">* -v Var</span><br><span class="line">  - BashBuiltin printf 的选项</span><br><span class="line">  - 将结果保存到变量中而不是输出到 stdout</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>printf Format</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 指定 C 风格的 Format</span><br><span class="line"></span><br><span class="line">* 包含三种内容</span><br><span class="line">  - PlainCharacters，普通字符，原样直接输出到 stdout 上</span><br><span class="line">  - EscapeSequences，转义序列</span><br><span class="line">  - ConversionSpecifications，格式化字符串转换标记</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>转义序列 EscapeSequences</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">* 常用转义序列</span><br><span class="line">  \n    new line</span><br><span class="line">  \t    horizontal tab</span><br><span class="line">  \&quot;    double quote</span><br><span class="line">  \\    backslash</span><br><span class="line">  \NNN          byte with octal value NNN (1 to 3 digits)</span><br><span class="line">  \xHH          byte with hexadecimal value HH (1 to 2 digits)</span><br><span class="line">  \uHHHH        Unicode (ISO/IEC 10646) character with hex value HHHH (4 digits)</span><br><span class="line">  \UHHHHHHHH    Unicode character with hex value HHHHHHHH (8 digits)</span><br><span class="line"></span><br><span class="line">* 其他转义序列</span><br><span class="line">  \a    alert (BEL)</span><br><span class="line">  \b    backspace</span><br><span class="line">  \c    produce no further output</span><br><span class="line">  \e    escape</span><br><span class="line">  \f    form feed</span><br><span class="line">  \r    carriage return</span><br><span class="line">  \v    vertical tab</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：printf-格式转换标记"><a href="#知识点：printf-格式转换标记" class="headerlink" title="知识点：printf 格式转换标记"></a>知识点：printf 格式转换标记</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 格式化字符串转换标记 ConversionSpecifications，提供一个占位符，用于将 Arguments 的值进行转换后填充到这里</span><br><span class="line">  - 采用 C 标准，详细内容记录在 man 3 printf</span><br><span class="line"></span><br><span class="line">* 格式：%Flags[Width][.Precision][Length]ConversionSpecifier</span><br><span class="line"></span><br><span class="line">* &quot;%&quot;</span><br><span class="line">  - directive</span><br><span class="line">  - 一个格式转换标记必须以 &quot;%&quot; 开头</span><br><span class="line"></span><br><span class="line">* Width</span><br><span class="line">  - 字段宽度</span><br><span class="line">  - 如果 Argument 的宽度小于 Width，则会进行填充，使用 space 或 0，取决于 flag 的设置</span><br><span class="line">  - 如果 Argument 的宽度大于 Width，则会完全显示 Argument 的值，不会进行 truncate</span><br><span class="line"></span><br><span class="line">* Precision</span><br><span class="line">  - 精度</span><br><span class="line">  - 对于小数型的转换说明符，如 &quot;f&quot;、&quot;e&quot; 等，指定小数点 period &quot;.&quot; 后面的数字的位数，默认为 6</span><br><span class="line">  - 如果 Precision 只指定了 &quot;.&quot; 而没有后跟数字，则表示 Precision 为 0</span><br><span class="line">  - 对于其他的转换说明符，如 &quot;s&quot;、&quot;g&quot; 等，具有额外功能</span><br><span class="line"></span><br><span class="line">* Length</span><br><span class="line">  - 不整理</span><br><span class="line">  - 主要针对整形的转换，如 &quot;d&quot;、&quot;x&quot;，指定整形的转换长度，如 long int、longlong int 等</span><br><span class="line">  - 新版本的 Linux 对于 int 几乎全部采用 64bit，故此参数已失去意义，故不整理</span><br><span class="line"></span><br><span class="line">* 转换标记和 Arguments 直接的对应关系</span><br><span class="line">  1) 如果 Arguments 的数量超过 ConversionSpecifications 的数量，则多出来的 Arguments 会重用 reuse 转换标记</span><br><span class="line">    - 例如，printf &#x27;|%10s|%10s|\n&#x27; &quot;tom&quot; &quot;john&quot; &quot;henry&quot; &quot;jack&quot; &quot;ross&quot;</span><br><span class="line">  2) 如果 Arguments 缺失，则会被当做 null string 或数字 0</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>转换说明符 ConversionSpecifier</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 转换说明符，用于指定转换的方式</span><br><span class="line">  - 一个转换标记必须以 ConversionSpecifier 结尾</span><br><span class="line"></span><br><span class="line">* 对于 integer 型的转换说明符</span><br><span class="line">  - 如果一个 Argument 以单引号 &#x27; 或双引号 &quot; 开头，则表示结果为单引号或双引号紧跟着的第一个字符的 unicode 编号</span><br><span class="line">  - 例，printf &#x27;%x&#x27; &#x27;&quot;张三&#x27; =&gt; 5f20，即 &#x27;张&#x27; 的 unicode 编号</span><br><span class="line"></span><br><span class="line">* &quot;d&quot;、&quot;i&quot;</span><br><span class="line">  - 将 Argument 转换为 signed integer</span><br><span class="line"></span><br><span class="line">* &quot;u&quot;</span><br><span class="line">  - 将 Argument 转换为 unsigned integer</span><br><span class="line"></span><br><span class="line">* &quot;o&quot;</span><br><span class="line">  - 将 Argument 转换为 unsigned octal integer</span><br><span class="line"></span><br><span class="line">* &quot;x&quot;、&quot;X&quot;</span><br><span class="line">  - 将 Argument 转换为 unsigned hexadecimal integer</span><br><span class="line">  - 例，printf &#x27;%x&#x27; -1 =&gt; ffffffffffffffff</span><br><span class="line"></span><br><span class="line">* &quot;f&quot;、&quot;F&quot;</span><br><span class="line">  - 将 Argument 转换为小数</span><br><span class="line"></span><br><span class="line">* &quot;e&quot;、&quot;E&quot;</span><br><span class="line">  - 将 Argument 转换为科学计数法的小数</span><br><span class="line"></span><br><span class="line">* &quot;g&quot;、&quot;G&quot;</span><br><span class="line">  - 根据有效数字的情况，自动按照 &quot;f&quot;、&quot;F&quot;、&quot;e&quot;、&quot;E&quot; 的方式进行转换</span><br><span class="line">  - Precision 用来设置有效数字的位数，默认为 6</span><br><span class="line">  - 若有效数字位数足够，则使用 &quot;f&quot;、&quot;F&quot;</span><br><span class="line">  - 若有效数字位数不足，即科学计数法格式中，指数的值大于有效数字的位数，则使用 &quot;e&quot;、&quot;E&quot;</span><br><span class="line"></span><br><span class="line">* &quot;a&quot;, &quot;A&quot;</span><br><span class="line">  - 将 Argument 转换为十六进制的科学计数法的小数，&quot;p+&quot;、&quot;p-&quot; 表示指数</span><br><span class="line"></span><br><span class="line">* &quot;s&quot;</span><br><span class="line">  - 将 Argument 转换为字符串 string</span><br><span class="line">  - Precision 用于控制字符串的长度</span><br><span class="line"></span><br><span class="line">* &quot;b&quot;</span><br><span class="line">  - 将 Argument 转换为字符串 string，并且可以识别 Argument 中的 ExcapeSequence</span><br><span class="line"></span><br><span class="line">* &quot;%&quot;</span><br><span class="line">  - &quot;%%&quot; 表示输出一个 &quot;%&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>旗标 Flags</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 旗标，用于指定一些与排版和内容有关的控制</span><br><span class="line">  - &quot;#&quot;、&quot;0&quot;、&quot;-&quot;、&quot; &quot;、&quot;+&quot; 为 C99 Flag，其他为 Unix 特有 Flag</span><br><span class="line">  - 可以指定多个，没有顺序要求</span><br><span class="line"></span><br><span class="line">* &quot;#&quot;</span><br><span class="line">  - 使用替换格式 alternate form</span><br><span class="line">  - 对于 &quot;o&quot;，添加前缀 0</span><br><span class="line">  - 对于 &quot;x&quot; 和 &quot;X&quot;，添加前缀 &quot;0x&quot; 和 &quot;0X&quot;</span><br><span class="line">  - 对于 &quot;a&quot;、&quot;A&quot;、&quot;e&quot;、&quot;E&quot;、&quot;f&quot;、&quot;F&quot;、&quot;g&quot;、&quot;G&quot;，结果需要强制包含小数点，不论小数部分是否有值</span><br><span class="line">  - 对于 &quot;g&quot; 和 &quot;G&quot;，保留 trailing zeros</span><br><span class="line"></span><br><span class="line">* &quot;0&quot;</span><br><span class="line">  - 使用零填充</span><br><span class="line"></span><br><span class="line">* &quot;-&quot;</span><br><span class="line">  - 左对齐</span><br><span class="line">  - 会覆盖 Flag &quot;0&quot;</span><br><span class="line"></span><br><span class="line">* &quot; &quot;</span><br><span class="line">  - 对于有符号数，正数前面加一个空格</span><br><span class="line"></span><br><span class="line">* &quot;+&quot;</span><br><span class="line">  - 对于有符号数，正数前面加 &quot;+&quot;</span><br><span class="line">  - 会覆盖 Flag &quot; &quot;</span><br><span class="line"></span><br><span class="line">* &quot;&#x27;&quot;</span><br><span class="line">  - 对于数字转换，基于 locale 设置进行 grouping</span><br><span class="line">  - 包括整形 &quot;d&quot;、&quot;x&quot; 等和小数型 &quot;f&quot;、&quot;e&quot; 等</span><br><span class="line">  - 不是所有的 gcc 都支持此旗标</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：sort-指令"><a href="#知识点：sort-指令" class="headerlink" title="知识点：sort 指令"></a>知识点：sort 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - sort，对文件按行进行排序</span><br><span class="line">  - check，检查文件是否是已经排序过的</span><br><span class="line">  - merge，将多个已经排序后的文件进行归并排序</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  sort [OPTIONS] [FILES]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">* -b, --ignore-leading-blanks</span><br><span class="line">  - 忽略每行前面开始出的空格字符</span><br><span class="line"></span><br><span class="line">* -f, --ignore-case</span><br><span class="line">  - 忽略大小写</span><br><span class="line">  - 实现方式为将小写字母视为大写字母</span><br><span class="line"></span><br><span class="line">* -r, --reverse</span><br><span class="line">  - 反向排序</span><br><span class="line"></span><br><span class="line">* -u, --unique</span><br><span class="line">  - 排序后合并重复值</span><br><span class="line"></span><br><span class="line">* -k POS1[,POS2], --key=POS1[,POS2]</span><br><span class="line">  - 指定排序使用的排序键</span><br><span class="line">  - POS 的格式见 info sort</span><br><span class="line"></span><br><span class="line">* -t SEPARATOR, --field-separator=SEPARATOR</span><br><span class="line">  - 指定切分排序键所使用的分割字符</span><br><span class="line"></span><br><span class="line">* --debug</span><br><span class="line">  - debug 输出格式</span><br><span class="line">  - 会高亮使用的排序键</span><br><span class="line"></span><br><span class="line">* -n, --numeric-sort, --sort=numeric</span><br><span class="line">  - 以数值大小进行排序</span><br><span class="line"></span><br><span class="line">* -g, --general-numeric-sort, --sort=general-numeric</span><br><span class="line">  - 以数值大小进行排序</span><br><span class="line">  - 会尝试将每一行的开头视为双精度浮点数</span><br><span class="line"></span><br><span class="line">* -h, --human-numeric-sort, --sort=human-numeric</span><br><span class="line">  - 以数值大小进行排序</span><br><span class="line">  - 额外添加 SI 后缀的支持，如 &#x27;k&#x27;、&#x27;m&#x27; 等</span><br><span class="line"></span><br><span class="line">* -M, --month-sort, --sort=month</span><br><span class="line">  - 以月份大小进行排序</span><br><span class="line"></span><br><span class="line">* -V, --version-sort</span><br><span class="line">  - 以版本号进行排序</span><br><span class="line"></span><br><span class="line">* -d, --dictionary-order</span><br><span class="line">  - 排序时，仅考虑字典字符，即字母、数字、空白</span><br><span class="line"></span><br><span class="line">* -i, --ignore-nonprinting</span><br><span class="line">  - 排序时，仅考虑可打印字符</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：uniq-指令"><a href="#知识点：uniq-指令" class="headerlink" title="知识点：uniq 指令"></a>知识点：uniq 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 对输入中连续的重复行，仅输出第一行，丢弃剩余重复行</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  uniq [OPTIONS] [INPUT [OUTPUT]]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">* -c, --count</span><br><span class="line">  - 输出每一行的重复次数</span><br><span class="line"></span><br><span class="line">* -i, --ignore-case</span><br><span class="line">  - 忽略大小写</span><br><span class="line"></span><br><span class="line">* -u, --unique</span><br><span class="line">  - 单独使用时，表示仅打印不重复的行</span><br><span class="line"></span><br><span class="line">* -d, --repeated</span><br><span class="line">  - 仅打印重复行，不打印不重复的行</span><br><span class="line">  - 丢弃重复行</span><br><span class="line"></span><br><span class="line">* -D, --all-repeated[=DELIMIT-METHOD]</span><br><span class="line">  - 仅打印重复行，不打印不重复的行</span><br><span class="line">  - 不丢弃重复行</span><br><span class="line">  - 将重复行视为一个组，允许每组之间以空行分割</span><br><span class="line">  - DELIMIT-METHOD 指定空行的方式，可用值包括 none、prepend、separate</span><br><span class="line"></span><br><span class="line">* --group[=DELIMIT-METHOD]</span><br><span class="line">  - 显示所有行</span><br><span class="line">  - 将重复行视为一个组，允许每组之间以空行分割</span><br><span class="line">  - DELIMIT-METHOD 指定空行的方式，可用值包括 separate、prepend、append、both</span><br><span class="line"></span><br><span class="line">* -f N, --skip-fields=N</span><br><span class="line">  - 在检查行的唯一性时，跳过前 N 列</span><br><span class="line">  - 若所剩无几，则视此行为一个 null string</span><br><span class="line"></span><br><span class="line">* -s N, --skip-chars=N</span><br><span class="line">  - 在检查行的唯一性时，跳过前 N 个字符</span><br><span class="line">  - 若所剩无几，则视此行为一个 null string</span><br><span class="line"></span><br><span class="line">* -w N, --check-chars=N</span><br><span class="line">  - 在检查行的唯一性时，只比较 N 个字符</span><br><span class="line">  - 默认一直比较到行尾</span><br><span class="line">  - 在 &#x27;-f&#x27;/&#x27;-s&#x27; 选项之后生效</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：date-指令"><a href="#知识点：date-指令" class="headerlink" title="知识点：date 指令"></a>知识点：date 指令</h3><ol>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  date [OPTIONS]... [+FORMAT]</span><br><span class="line">  date [-u|--utc|--universal] [MMDDhhmm[[CC]YY][.ss]]</span><br><span class="line"></span><br><span class="line">* 介绍</span><br><span class="line">  - date 指令，可以用来查看时间、修改系统时间等</span><br><span class="line">  - 对于时间戳，只支持 unix 时间戳</span><br><span class="line"></span><br><span class="line">* 时间戳与 unix 时间戳</span><br><span class="line">  - 时间戳和 unix 时间戳，都表示从 epoch 到现在的时间</span><br><span class="line">  - 区别，时间戳的单位为 ms，unix 时间戳的单位为 s</span><br><span class="line">  - 时间戳 / 1000 可以近似的认为等于 unix 时间戳</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* --help</span><br><span class="line"></span><br><span class="line">* --version</span><br><span class="line"></span><br><span class="line">* -d STRING, --date=STRING</span><br><span class="line">  - 输出 STRING 指定的时间，而不是 now</span><br><span class="line">  - 对于 unix 时间戳，可以使用 -d @12345678 的方式</span><br><span class="line"></span><br><span class="line">* -f DATAFILE, --file=DATEFILE</span><br><span class="line">  - 对 DATEFILE 中的每一行，都当做一个指定时间的 STRING，并给出其对应的时间</span><br><span class="line"></span><br><span class="line">* -r FILE, --reference=FILE</span><br><span class="line">  - 查看文件的 mtine</span><br><span class="line"></span><br><span class="line">* -s, --set=STRING</span><br><span class="line">  - 修改系统时间</span><br><span class="line"></span><br><span class="line">* -u, --utc, --universal</span><br><span class="line">  - 修改或输出 UTC 时间</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>常用 FORMAT</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">* 完整 conversion specifiers 见 info date</span><br><span class="line"></span><br><span class="line">* Literal 相关</span><br><span class="line">  %%      一个 % 符号</span><br><span class="line">  %n      换行</span><br><span class="line">  %t      制表符</span><br><span class="line"></span><br><span class="line">* Timestamp 相关</span><br><span class="line">  %s      unix 时间戳</span><br><span class="line"></span><br><span class="line">* Time 相关</span><br><span class="line">  %T      时间组合形式，格式为 %H:%M:%S</span><br><span class="line">  %R      时间组合形式，格式为 %H:%M</span><br><span class="line">  %S      秒</span><br><span class="line">  %M      分钟</span><br><span class="line">  %H      小时，24 小时制</span><br><span class="line">  %I      小时，12 小时制</span><br><span class="line">  %N      纳米秒</span><br><span class="line">  %p      上午或下午，大写字母</span><br><span class="line">  %P      上午或下午，小写字母</span><br><span class="line">  %z      时区，RFC 2822/ISO 8601 风格，格式为 +hhmm</span><br><span class="line">  %:z     时区，RFC 3339/ISO 8601 风格，格式为 +hh:mm</span><br><span class="line">  %::z    时区，格式为 +hh:mm:ss 方式</span><br><span class="line">  %Z      时区，字母形式</span><br><span class="line"></span><br><span class="line">* Date 相关</span><br><span class="line">  %F      full date in ISO 8601 format，格式为 %Y-%m-%d</span><br><span class="line">  %D      日期的组合形式，格式为 %m/%d/%y，例如 1999-03-25 表示为 03/25/99</span><br><span class="line">  %d      一个月当中的几号</span><br><span class="line">  %j      一年当中的第几天</span><br><span class="line">  %m      几月份</span><br><span class="line">  %b      几月份，按照本地语言环境进行缩略，如 Jan</span><br><span class="line">  %B      几月份，按照本地语言环境给出完整名，如 January</span><br><span class="line">  %y      年，2 位数字</span><br><span class="line">  %Y      年，4 位数字</span><br><span class="line">  %C      世纪</span><br><span class="line">  %a      周几，按照本地语言环境进行缩略，如 Sun</span><br><span class="line">  %A      周几，按照本地语言环境给出完整名，如 Sunday</span><br><span class="line">  %u      周几，数字形式，7 表示周日</span><br><span class="line">  %w      周几，数字形式，0 表示周日</span><br><span class="line">  %U      一年当中的第几周，采用周日为一周的开始</span><br><span class="line">  %W      一年当中的第几周，采用周一为一周的开始</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>填充 Padding</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 通过指定填充标识，来对 date 的输出内容进行进一步的格式控制</span><br><span class="line">  - 形式上，填充标识跟在 &#x27;%&#x27; 之后，FORMAT 旗标之前</span><br><span class="line">  - 默认对数字使用 0 填充</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  [modifier][width][E|O]FORMAT</span><br><span class="line"></span><br><span class="line">* modifier</span><br><span class="line">  - 用于指定填充方式</span><br><span class="line">  - &#x27;-&#x27;       hyphen 不填充</span><br><span class="line">  - &#x27;_&#x27;       underscore 使用 space 填充</span><br><span class="line">  - &#x27;0&#x27;       使用 0 填充</span><br><span class="line">  - &#x27;^&#x27;       使用大写字母</span><br><span class="line"></span><br><span class="line">* width</span><br><span class="line">  - 指定宽度</span><br><span class="line"></span><br><span class="line">* E|O</span><br><span class="line">  - E 或 O 指定使用语言的方式</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 范例</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 宽度为 8，使用 space 填充</span></span><br><span class="line"></span><br><span class="line">date +_8Y</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>环境变量</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* TZ</span><br><span class="line">  - 读取时区的环境变量</span><br><span class="line">  - 如果没有指定，则采用 /etc/localtime 的设定</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：bc-指令"><a href="#知识点：bc-指令" class="headerlink" title="知识点：bc 指令"></a>知识点：bc 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - bc 指令，从输入中读取表达式，然后对表达式进行计算，最终打印表达式的结果</span><br><span class="line">  - bc 在内部，计算时都是按照十进制进行</span><br><span class="line">  - bc 中的数字都是任意精度数字 arbitrary precision numbers</span><br><span class="line"></span><br><span class="line">* 数字 Number</span><br><span class="line">  - 数字 bc 最基础的元素</span><br><span class="line">  - 数字有两个属性，length 和 scale</span><br><span class="line">    - length，Number 的有效数字的位数</span><br><span class="line">    - scale，Number 的小数点后数字的位数</span><br><span class="line"></span><br><span class="line">* bc 变量</span><br><span class="line">  - bc 中支持变量，支持数组</span><br><span class="line">  - 变量和数组的起名方式相同，小写字母开头，后面跟小写字母、数字、下划线</span><br><span class="line">  - 数组的调用方式，Name[Index]</span><br><span class="line"></span><br><span class="line">* bc 的四个特殊变量</span><br><span class="line">  - scale，指定 bc 运算时的 scale 的取值。默认为 0</span><br><span class="line">  - ibase，指定读取输入时采用的进位制，范围为 2-16</span><br><span class="line">  - obase，指定输出时采用的进制方式，超过 16 则会采用 multi-character 的表示法</span><br><span class="line">  - lase，用来储存最后一次打印的数字</span><br><span class="line"></span><br><span class="line">* bc 中的 true 和 false</span><br><span class="line">  - 非 0 为 true</span><br><span class="line">  - 0 为 false</span><br><span class="line">  - 所有的逻辑表达式均有返回值，包括关系表达式、布尔表达式，true 返回 1</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  bc [OPTIONS] [FILES]</span><br><span class="line"></span><br><span class="line">* FILE</span><br><span class="line">  - bc 脚本文件</span><br><span class="line">  - bc 先按顺序处理每一个 FILE，再从 STDIN 中读取输入</span><br><span class="line">    - 所以，如果不想让 bc 卡在 STDIN 界面，可以在最后一个 FILE 的最后一句加一个 quit</span><br><span class="line">    - 或者，采用 echo 或 EOF 的方式调用 bc</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -h, --help        打印帮助信息</span><br><span class="line">  -v, --version     打印版本信息</span><br><span class="line">  -l, --mathlib     导入数学函数库</span><br><span class="line">  -q, --quiet       安静模式，不打印 GNU bc 的欢迎信息</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 范例</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 求 pi，精确到小数点后 10000 位，因为 arctan(1) 等于 pi/4</span></span><br><span class="line"></span><br><span class="line">echo &#x27;scale=10000;4*a(1)&#x27; | bc -l</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>bc 表达式</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">* 注释</span><br><span class="line">  #       单行注释</span><br><span class="line">  /* */   多行注释</span><br><span class="line"></span><br><span class="line">* 运算符</span><br><span class="line">  +、-、*、/、%、^、+=、-=、*=、/=、%=</span><br><span class="line">  =               赋值</span><br><span class="line">  ( )             括号</span><br><span class="line">  ++var、--var    先自增/自减，再求值</span><br><span class="line">  var++、var--    先求值，再自增/自减</span><br><span class="line"></span><br><span class="line">* 注意</span><br><span class="line">  - &#x27;%&#x27; 只在手动指定 scale=0 并且两个数都是整数时才有意义</span><br><span class="line"></span><br><span class="line">* 关系表达式</span><br><span class="line">  &lt;、&lt;=</span><br><span class="line">  &gt;、&gt;=</span><br><span class="line">  ==、!=</span><br><span class="line"></span><br><span class="line">* 布尔表达式</span><br><span class="line">  !expr</span><br><span class="line">  expr &amp;&amp; expr</span><br><span class="line">  expr || expr</span><br><span class="line"></span><br><span class="line">* 特殊表达式</span><br><span class="line">  lentgh(expr)    求有效数字长度</span><br><span class="line">  scale(expr)     求小数点后位数</span><br><span class="line">  sqrt(expr)      平方根</span><br><span class="line"></span><br><span class="line">* 数学函数 &#x27;-l&#x27;</span><br><span class="line">  s (X)     求 X 的 sin 值，X 为弧度</span><br><span class="line">  c (X)     求 X 的 cos 值，X 为弧度</span><br><span class="line">  a (X)     求 X 的 arctan 值，返回弧度</span><br><span class="line">  l (X)     求 X 的自然对数</span><br><span class="line">  e (X)     求 X 的自然指数</span><br><span class="line">  j (N,X)   求 X 的贝塞尔函数值</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>bc 语句</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">* newline, semicolon</span><br><span class="line">  - 语句分隔符</span><br><span class="line"></span><br><span class="line">* a=10</span><br><span class="line">  - 赋值语句</span><br><span class="line">  - 只进行操作，不进行打印</span><br><span class="line"></span><br><span class="line">* &quot;STRING&quot;</span><br><span class="line">  - 字符串，放在双引号中，直接打印</span><br><span class="line"></span><br><span class="line">* print LIST</span><br><span class="line">  - 手动打印，末尾不追加 newline</span><br><span class="line">  - LIST 中的元素使用 &#x27;,&#x27; 分隔</span><br><span class="line">  - print 语句中的 STRING，可以使用转义快捷键</span><br><span class="line"></span><br><span class="line">* &#123;STATEMENT_LIST&#125;</span><br><span class="line">  - 语句打包</span><br><span class="line">  - 对于 IF 或者 WHILE 或者 FOR 中，如果语句为多行，则需要进行打包</span><br><span class="line"></span><br><span class="line">* if ( EXPRESSION ) STATEMENT1 [else STATEMENT2]</span><br><span class="line">  - IF 语句</span><br><span class="line"></span><br><span class="line">* while ( EXPRESSION ) STATEMENT</span><br><span class="line">  - WHILE 循环</span><br><span class="line"></span><br><span class="line">* for ( [EXPRESSION1] ; [EXPRESSION2] ; [EXPRESSION3] ) STATEMENT</span><br><span class="line">  - FOR 循环</span><br><span class="line"></span><br><span class="line">* break、continue</span><br><span class="line"></span><br><span class="line">* quit</span><br><span class="line">  - 退出 bc</span><br><span class="line"></span><br><span class="line">* halt</span><br><span class="line">  - 如果执行，才退出 bc</span><br><span class="line">  - 通常配合 if 使用</span><br><span class="line"></span><br><span class="line">* limits</span><br><span class="line">  - 打印当前 bc 的限制</span><br><span class="line"></span><br><span class="line">* return [( EXPRESSION )]</span><br><span class="line">  - 函数提供返回值，省略 EXPRESSION 则返回 0</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：diff-指令"><a href="#知识点：diff-指令" class="headerlink" title="知识点：diff 指令"></a>知识点：diff 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 以逐行的方式，比较文件的异同</span><br><span class="line">  - 比较两个目录中的文件的内容的不同</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  diff [OPTIONS] FILES</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">* -y, --side-by-side</span><br><span class="line">  - 以并列的方式显示文件的异同之处</span><br><span class="line"></span><br><span class="line">* -W, --width=NUM</span><br><span class="line">  - 以 &#x27;-y&#x27; 并列方式输出时，指定每一栏的宽度</span><br><span class="line"></span><br><span class="line">* --suppress-common-lines</span><br><span class="line">  - 以 &#x27;-y&#x27; 并列方式输出时，仅显示不同之处</span><br><span class="line"></span><br><span class="line">* -b, --ignore-space-change</span><br><span class="line">  - 不检查空白字符数量的不同</span><br><span class="line"></span><br><span class="line">* -w, --ignore-all-space</span><br><span class="line">  - 不检查空白字符的不同</span><br><span class="line"></span><br><span class="line">* -B, --ignore-blank-lines</span><br><span class="line">  - 不检查空白行的不同</span><br><span class="line"></span><br><span class="line">* -i, --ignore-case</span><br><span class="line">  - 不检查大小写的不同</span><br><span class="line"></span><br><span class="line">* -r, --recursive</span><br><span class="line">  - 对于目录的比较，递归比较子目录中的文件</span><br><span class="line"></span><br><span class="line">* -q, --brief</span><br><span class="line">  - 仅显示有无差异，不显示详细的信息</span><br><span class="line"></span><br><span class="line">* -s, --report-identical-files</span><br><span class="line">  - 若没有发现任何差异，仍然显示信息</span><br><span class="line"></span><br><span class="line">* -t, --expand-tabs</span><br><span class="line">  - 输出时对 tab 进行扩展</span><br><span class="line"></span><br><span class="line">* --tabsize=NUM</span><br><span class="line">  - 指定 tab 扩展的空格数</span><br><span class="line"></span><br><span class="line">* -c, -C NUM, --context[=NUM]</span><br><span class="line">  - 以 context 格式进行输出</span><br><span class="line"></span><br><span class="line">* -u, -U NUM, --unified[=NUM]</span><br><span class="line">  - 以 unified 格式进行输出</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：recode-指令"><a href="#知识点：recode-指令" class="headerlink" title="知识点：recode 指令"></a>知识点：recode 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 对文件转换字符集 converts files between character sets</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  recode [OPTIONS] BeforeSet..AfterSet File</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -l    查看所有支持的字符集</span><br><span class="line"></span><br><span class="line">* 范例</span><br><span class="line">  recode utf8..gb2312 1.txt   将文件从 utf8 转换为 gb2312</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：iconv-指令"><a href="#知识点：iconv-指令" class="headerlink" title="知识点：iconv 指令"></a>知识点：iconv 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 转换字符编码 convert text from one character encoding to another</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  iconv [OPTIONS] [-f from-encoding] [-t to-encoding] [inputfile]</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -l    查看所有支持的字符集编码</span><br><span class="line"></span><br><span class="line">* 范例</span><br><span class="line">  iconv -f utf8 -t gb2312 1.txt       将 utf8 转换为 gb2312</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="2-3-Sed"><a href="#2-3-Sed" class="headerlink" title="2.3 Sed"></a>2.3 Sed</h2><hr>
<h3 id="知识点：sed-介绍"><a href="#知识点：sed-介绍" class="headerlink" title="知识点：sed 介绍"></a>知识点：sed 介绍</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - sed 是 linux 提供的面向文本行的文本编辑工具</span><br><span class="line"></span><br><span class="line">* 默认工作方式</span><br><span class="line">  - 读取文件内容</span><br><span class="line">  - 进行编辑</span><br><span class="line">  - 将编辑后的结果 print 到 output 上</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>sed 命令行指令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  sed [OPTIONS] [SCRIPT] [INPUTFILES]</span><br><span class="line"></span><br><span class="line">* 命令行的解析过程</span><br><span class="line">  - sed 会将第一个非 OPTION 的参数视为 SCRIPT</span><br><span class="line">  - 如果 sed 加了 -e 或者 -f 选项，则第一个非 OPTION 的参数会被视为 INPUTFILE</span><br><span class="line">  - 如果省略 INPUTFILE，或者 INPUTFILE 是一个 &#x27;-&#x27;，则表示 INPUT 是 STDIN</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>sed 命令行指令选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">* -n、--quiet、--silent</span><br><span class="line">  - 不打印 OUTPUT</span><br><span class="line"></span><br><span class="line">* -e SCRIPT、--expression=SCRIPT</span><br><span class="line">  - 手动指定 sed 的 COMMAND</span><br><span class="line"></span><br><span class="line">* -f SCRIPT-FILE、--file=SCRIPT-FILE</span><br><span class="line">  - 手动指定 sed 的 SCRIPT FILE</span><br><span class="line"></span><br><span class="line">* -i[SUFFIX]、--in-place[=SUFFIX]</span><br><span class="line">  - 直接修改原始文件</span><br><span class="line"></span><br><span class="line">* --follow-symlinks</span><br><span class="line">  - 直接修改软链接的原始文件</span><br><span class="line"></span><br><span class="line">* -r、--regexp-extended</span><br><span class="line">  - 使用 egrap 正则</span><br><span class="line"></span><br><span class="line">* 其他</span><br><span class="line">  --version</span><br><span class="line">  --help</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：sed-Command"><a href="#知识点：sed-Command" class="headerlink" title="知识点：sed Command"></a>知识点：sed Command</h3><ol>
<li><strong>sed Command 介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  [ADDRESS]COMMAND[code]</span><br><span class="line"></span><br><span class="line">* 介绍</span><br><span class="line">  - COMMAND 前面的空格不影响</span><br><span class="line">  - 多个 COMMAND 之间可以使用分号或换行来分隔</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>sed Command 的执行逻辑</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* sed 维护了两个 data-buffer</span><br><span class="line">  - pattern-space-buffer</span><br><span class="line">  - hold-space-buffer</span><br><span class="line"></span><br><span class="line">* sed 会对 INPUT 中的每一行，都进行如下的操作 cycle</span><br><span class="line">  - 从 INPUT 中读取一行</span><br><span class="line">  - 去除结尾的 newline，将数据放在 pattern-space-buffer 中</span><br><span class="line">  - 对此行的内容按顺序执行全部的 COMMAND</span><br><span class="line">  - 当所有的 COMMAND 都执行结束，则将此行处理后的结果，即当前 pattern-space-buffer 中的内容，加上一个结尾的 newline，打印到 OUTPUT，通常就是 STDOUT</span><br><span class="line">      - 如果指定了 -n 选项，则不执行这一步</span><br><span class="line">  - 清空 hold-space-buffer</span><br><span class="line">  - 将 pattern-space buffer 中的内容移动到 hold-space buffer 中</span><br><span class="line">  - 清空 pattern-space buffer</span><br><span class="line">  - 进行下一轮 cycle</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>sed Command 列表</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">* #</span><br><span class="line">  - 注释</span><br><span class="line"></span><br><span class="line">* =</span><br><span class="line">  - 打印行号</span><br><span class="line"></span><br><span class="line">* F</span><br><span class="line">  - 打印 INPUT 文件名</span><br><span class="line"></span><br><span class="line">* q</span><br><span class="line">  - 退出 sed 执行</span><br><span class="line"></span><br><span class="line">* d</span><br><span class="line">  - 删除行</span><br><span class="line"></span><br><span class="line">* p</span><br><span class="line">  - 打印行</span><br><span class="line"></span><br><span class="line">* &#123; COMMANDS &#125;</span><br><span class="line">  - 命令打包</span><br><span class="line"></span><br><span class="line">* i TEXT</span><br><span class="line">  - 插入文本，在 address 行之前</span><br><span class="line"></span><br><span class="line">* a TEXT</span><br><span class="line">  - 追加文本，在 address 行之后</span><br><span class="line"></span><br><span class="line">* c TEXT</span><br><span class="line">  - 替换文本</span><br><span class="line"></span><br><span class="line">* r FILENAME</span><br><span class="line">  - 读取文件全部内容</span><br><span class="line"></span><br><span class="line">* R FILENAME</span><br><span class="line">  - 按行读取文件内容</span><br><span class="line"></span><br><span class="line">* w FILENAME</span><br><span class="line">  - 保存结果</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 打印第 10 行</span><br><span class="line">10p</span><br><span class="line"></span><br><span class="line"># 打印第 10 行，然后删除第 5 行</span><br><span class="line">10p;5d</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：sed-Command-行定位"><a href="#知识点：sed-Command-行定位" class="headerlink" title="知识点：sed Command 行定位"></a>知识点：sed Command 行定位</h3><ol>
<li><strong>行寻址 Address</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 省略</span><br><span class="line">  - 表示对所有行执行动作</span><br><span class="line"></span><br><span class="line">* NUMBER</span><br><span class="line">  - 按照行号指定作用行</span><br><span class="line"></span><br><span class="line">* FIRST~STEP</span><br><span class="line">  - 按照步长指定行号</span><br><span class="line"></span><br><span class="line">* $</span><br><span class="line">  - 最后一行</span><br><span class="line"></span><br><span class="line">* /REGEXP/, \%REGEXP%</span><br><span class="line">  - 搜索具有 REGEXP 的行</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>行范围 AddressRange</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* Addr1,Addr2</span><br><span class="line">  - 两行之间的所有行</span><br><span class="line"></span><br><span class="line">* Addr1,+N</span><br><span class="line">  - Addr1 及之后的 N 行</span><br><span class="line"></span><br><span class="line">* Addr1,~N</span><br><span class="line">  - Addr1 及之后的 N-1 行</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>反向选择</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* 行定位 ADDRESS 如果第一个字符是 &#x27;!&#x27;，则表示反向选择行</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：sed-替换命令"><a href="#知识点：sed-替换命令" class="headerlink" title="知识点：sed 替换命令"></a>知识点：sed 替换命令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 替换命令是 sed 中最常用的命令</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  [ADDRESS]s/REGEX/REPLACEMENT/[FLAG]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>FLAG</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* g</span><br><span class="line">  - 全部替换</span><br><span class="line">  - 默认只对行内的第一个匹配项替换</span><br><span class="line"></span><br><span class="line">* NUMBER</span><br><span class="line">  - 只替换行内的第 N 个匹配项</span><br><span class="line"></span><br><span class="line">* p</span><br><span class="line">  - 打印替换结果</span><br><span class="line"></span><br><span class="line">* w FILENAME</span><br><span class="line">  - 保存替换结果</span><br><span class="line"></span><br><span class="line">* i、I</span><br><span class="line">  - 不区分大小写</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 对从第 1 行到第 10 行，每行的第一个 this 替换为 THIS</span><br><span class="line">1,10s/this/THIS/</span><br><span class="line"></span><br><span class="line"># 对从第 1 行到第 10 行，全部的 this 替换为 THIS</span><br><span class="line">1,10s/this/THIS/g</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：sed-正则"><a href="#知识点：sed-正则" class="headerlink" title="知识点：sed 正则"></a>知识点：sed 正则</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - sed 默认采用基础正则，但添加了采用 &#x27;\&#x27; 来支持 egrep 正则的功能</span><br><span class="line">  - 使用 &#x27;-r&#x27; 选项可以让 sed 直接采用 egrep 正则</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>sed 基础正则</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">* 普通字符</span><br><span class="line">  - &#x27;CHAR&#x27;</span><br><span class="line"></span><br><span class="line">* 点字符</span><br><span class="line">  - &#x27;.&#x27;</span><br><span class="line">    - 可以匹配 newline</span><br><span class="line"></span><br><span class="line">* 重复次数</span><br><span class="line">  - &#x27;\+&#x27;</span><br><span class="line">  - &#x27;\?&#x27;</span><br><span class="line">  - &#x27;\&#123;I\&#125;&#x27;</span><br><span class="line">  - &#x27;\&#123;I,J\&#125;&#x27;</span><br><span class="line">  - &#x27;\&#123;I,\&#125;&#x27;</span><br><span class="line"></span><br><span class="line">* 锚点</span><br><span class="line">  - &#x27;^&#x27;</span><br><span class="line">  - &#x27;$&#x27;</span><br><span class="line"></span><br><span class="line">* 字符类</span><br><span class="line">  - &#x27;[LIST]&#x27;</span><br><span class="line">  - &#x27;[^LIST]&#x27;</span><br><span class="line"></span><br><span class="line">* 捕捉群</span><br><span class="line">  - &#x27;\(REGEXP\)&#x27;</span><br><span class="line">  - \N</span><br><span class="line"></span><br><span class="line">* 或</span><br><span class="line">  - &#x27;REGEXP1\|REGEXP2&#x27;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="2-4-Awk"><a href="#2-4-Awk" class="headerlink" title="2.4 Awk"></a>2.4 Awk</h2><hr>
<h3 id="知识点：awk-指令"><a href="#知识点：awk-指令" class="headerlink" title="知识点：awk 指令"></a>知识点：awk 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* GAWK: Effective AWK Programming http://www.gnu.org/software/gawk/manual</span><br><span class="line"></span><br><span class="line">* 基本概念</span><br><span class="line">  - record    行</span><br><span class="line">  - field     列</span><br><span class="line"></span><br><span class="line">* awk 正则</span><br><span class="line">  - 支持 egrap 正则</span><br><span class="line">  - 支持 POSIX 中阔号表达式</span><br><span class="line">  - 支持部分 \ 转义快捷键</span><br><span class="line"></span><br><span class="line">* 版本</span><br><span class="line">  - ubuntu 默认按照 mawk，推荐安装 gawk</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  awk [ OPTIONS ] -f ProgramFile InputFiles</span><br><span class="line">  awk [ OPTIONS ] -e ProgramText InputFiles</span><br><span class="line">  awk [ OPTIONS ] ProgramText InputFiles</span><br><span class="line"></span><br><span class="line">* 注意</span><br><span class="line">  - 若同时省略了 -f 和 -e 选项，则认为第一个非 OTPION 的 argument 是 ProgramText</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* -F FS, --field-separator FS</span><br><span class="line">  - 指定分隔符，单分隔符，可以指定多个</span><br><span class="line"></span><br><span class="line">* -f ProgramFile, --file ProgramFile</span><br><span class="line">  - 指定程序文件</span><br><span class="line"></span><br><span class="line">* -e ProgramText, --source ProgramText</span><br><span class="line">  - 指定程序文本（如果存在多个 PROGRAM 部分，则是将全部的 PROGRAM 部分整合在一起）</span><br><span class="line"></span><br><span class="line">* -v Var=Value, --assign Var=Value</span><br><span class="line">  - 在命令行上定义一个变量</span><br><span class="line"></span><br><span class="line">* --</span><br><span class="line">  - 标识 OPTION 部分的结束</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;print &quot;hello world&quot;&#125;&#x27;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：awk-变量"><a href="#知识点：awk-变量" class="headerlink" title="知识点：awk 变量"></a>知识点：awk 变量</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - awk 支持变量</span><br><span class="line">  - awk 支持众多的内置变量</span><br><span class="line"></span><br><span class="line">* 变量命名</span><br><span class="line">  - 可以使用字母、数字、下划线</span><br><span class="line">  - 不能以数字开头</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>变量赋值</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  awk &#x27;BEGIN &#123;var01=&quot;test01&quot;&#125; &#123;print var01&#125;&#x27;</span><br><span class="line">  awk &#x27;BEGIN &#123;var01=10&#125; &#123;print var01&#125;&#x27;</span><br><span class="line">  awk &#x27;BEGIN &#123;var01=10 * 10&#125; &#123;print var01&#125;&#x27;     # 支持算术表达式方式赋值</span><br><span class="line"></span><br><span class="line">* awk 的命令行参数，在 InputFiles 部分，&#x27;var=val&#x27; 形式的参数，会被 awk 识别为变量赋值</span><br><span class="line">  - 此种形式的设置的变量，无法在 BEGIN 块中使用</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>列变量</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* $0</span><br><span class="line">  - 表示整个 record</span><br><span class="line"></span><br><span class="line">* $1、$2、$N</span><br><span class="line">  - 表示第 N 列的值</span><br><span class="line"></span><br><span class="line">* NF</span><br><span class="line">  - 表示当前 record 有多少列</span><br><span class="line">  - 常用用法</span><br><span class="line">    $NF       用来获取最后一列的数据</span><br><span class="line">    $(NF-1)   用来获取倒数第二列的数据</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>行计数</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* NR</span><br><span class="line">  - 当前 record 在总输入数据中的行数</span><br><span class="line">  - 在处理下一个输入数据文件时会继续计数</span><br><span class="line"></span><br><span class="line">* FNR</span><br><span class="line">  - 当前 record 在当前数据文件中的行数</span><br><span class="line">  - 在处理下一个输入数据文件时重置</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>输入</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">* FS</span><br><span class="line">  - field separator</span><br><span class="line">  - 指定在对输入数据进行解析时，按照哪一个字符，来指导列的切割 split field</span><br><span class="line">  - 可以使用正则表达式，如 -F=&#x27;[:, /]&#x27;，表示四个字符都当做列分隔符</span><br><span class="line"></span><br><span class="line">* FIELDWIDTHS</span><br><span class="line">  - 指定在对输入数据进行解析时，按照宽度来进行列的切割</span><br><span class="line"></span><br><span class="line">* FPAT</span><br><span class="line">  - 指定在对输入数据进行解析时，按照正则来进行列的切割</span><br><span class="line"></span><br><span class="line">* RS</span><br><span class="line">  - record separator</span><br><span class="line">  - 指定在对输入数据进行解析时，按照哪一个字符，来标识每一行 record</span><br><span class="line"></span><br><span class="line">* FILENAME</span><br><span class="line">  - 记录当前输入数据的文件名，STDIN 为 &#x27;-&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>输出</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* OFS</span><br><span class="line">  - output field separator</span><br><span class="line">  - 输出时的字段分隔符，默认为 space</span><br><span class="line"></span><br><span class="line">* ORS</span><br><span class="line">  - output record separator</span><br><span class="line">  - 输出时的行分隔符，默认为 newline</span><br><span class="line"></span><br><span class="line">* OFMT</span><br><span class="line">  - 数字的输出格式</span><br><span class="line">  - 默认为 %.6 g</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>命令行参数</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* ARGC</span><br><span class="line">  - 当前命令行参数个数</span><br><span class="line"></span><br><span class="line">* ARGV</span><br><span class="line">- 记录命令行中具体参数值的数组</span><br><span class="line"></span><br><span class="line">* ARGIND</span><br><span class="line">- 当前数据文件在 ARGV 数组中的索引</span><br><span class="line"></span><br><span class="line">* ENVIRON</span><br><span class="line">- 当前 shell 环境变量组成的关联数组，如 ENVIRON[&quot;PATH&quot;]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>正则相关</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* RSTART</span><br><span class="line">  - 由 match 函数所匹配的字符串的起始位置</span><br><span class="line"></span><br><span class="line">* RLENGTH</span><br><span class="line">  - 由 match 函数所匹配的字符串的长度</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* CONVFMT</span><br><span class="line">  - 数字的转换格式，参照 printf，默认 %.6 g</span><br><span class="line"></span><br><span class="line">* IGNORECASE</span><br><span class="line">  - 设置 awk 进行字符匹配时是否忽略大小写</span><br><span class="line"></span><br><span class="line">* AWKPATH</span><br><span class="line">  - 指定 awk 搜索程序文件的位置</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：awk-数组"><a href="#知识点：awk-数组" class="headerlink" title="知识点：awk 数组"></a>知识点：awk 数组</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - awk 中的数组，全部都是关联数组，即索引使用字符串</span><br><span class="line"></span><br><span class="line">* 定义关联数组</span><br><span class="line">  Name[Index]=Value</span><br><span class="line"></span><br><span class="line">* 使用关联数组</span><br><span class="line">  print Name[Index]</span><br><span class="line"></span><br><span class="line">* 遍历关联数组</span><br><span class="line">  for｛var in Name&#125; ; &#123; statments &#125;</span><br><span class="line">  - 注意，var 实际获得的是关联数组中的索引值，需要再使用 Name[var] 的方式取得对应的元素的值</span><br><span class="line"></span><br><span class="line">* 删除元素</span><br><span class="line">  delete Name[Index]</span><br><span class="line"></span><br><span class="line">* 删除数组</span><br><span class="line">  delete Name</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>多维数组</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* gawk 支持通过模拟的方式实现多维数组，不支持像 C 语言中的矩形数组</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：awk-程序语法"><a href="#知识点：awk-程序语法" class="headerlink" title="知识点：awk 程序语法"></a>知识点：awk 程序语法</h3><ol>
<li><strong>awk 程序的执行步骤</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 第一步，读取程序源码</span><br><span class="line">  - 包括 -f 指定的 ProgramFile、-e 指定的 ProgramText，或自动识别的第一个非 OPTION 的 ProgramText</span><br><span class="line">  - 如果指定了多个程序源，则将所有的程序整合在一起</span><br><span class="line"></span><br><span class="line">* 第二步，执行 -v 选项定义的变量赋值</span><br><span class="line"></span><br><span class="line">* 第三步，对程序文件进行编译</span><br><span class="line"></span><br><span class="line">* 第四步，执行 BEGIN 块中的内容</span><br><span class="line"></span><br><span class="line">* 第五步，开始从 INPUT 中读取数据，并开始执行动作</span><br><span class="line">  - 对每一行 record，都进行 pattern 的检测，如果检测成功，则对此行执行 action</span><br><span class="line"></span><br><span class="line">* 第六步，全部 INPUT 都处理结束后，执行 END 块中的内容</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>awk 程序基本语法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 在命令行上输入 ProgramText，需要放在单引号 &#x27; &#x27; 中，防止 bash 对其进行解析</span><br><span class="line"></span><br><span class="line">* &#x27;#&#x27;</span><br><span class="line">  - 开头表示注释</span><br><span class="line"></span><br><span class="line">* &#x27;\&#x27;</span><br><span class="line">  - 续行</span><br><span class="line"></span><br><span class="line">* 空行</span><br><span class="line">  - 分隔语句块</span><br><span class="line"></span><br><span class="line">* &#x27;;&#x27;、newline</span><br><span class="line">  - 分隔语句</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>awk 程序语句</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 通常由 action 语句和 function 语句组成</span><br><span class="line"></span><br><span class="line">* action 语句</span><br><span class="line">  - awk 程序最基本的语句</span><br><span class="line">  - 格式</span><br><span class="line">    @include &quot;ProgramFile&quot; PATTERN &#123; action &#125;</span><br><span class="line">    - @include &quot;ProgramFile&quot;</span><br><span class="line">      - 表示从外部文件中读取程序代码</span><br><span class="line">    - PATTERN</span><br><span class="line">      - 用来限定对具体哪些行执行动作</span><br><span class="line">      - 即，如果 record 与 PATTERN 不匹配，则不对此 record 进行操作</span><br><span class="line">    - &#123; action &#125;</span><br><span class="line">      - 指定具体的操作语句，或是由控制语句控制的操作流</span><br><span class="line">      - 大括号 &#123; &#125; 不可以省略</span><br><span class="line">    - PATTERN 和 action 可以只有一个，但不能都省略</span><br><span class="line">      - 只有 action，则对 INPUT 中的每一行都执行 action</span><br><span class="line">      - 只有 PATTERN，相当于 &#123; print &#125;，即打印整行记录</span><br><span class="line"></span><br><span class="line">* function 语句</span><br><span class="line">  - 用于自定义函数</span><br><span class="line">  - 格式</span><br><span class="line">    function name(parameter list) &#123; statements &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：awk-PATTERN"><a href="#知识点：awk-PATTERN" class="headerlink" title="知识点：awk PATTERN"></a>知识点：awk PATTERN</h3><ol>
<li><strong>常用 PATTERN</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">* /regular expression/</span><br><span class="line">  - 表示在 record 中对正则表达式进行测试，只有存在匹配项的 record，才会进行 action</span><br><span class="line">  - awk 默认使用 egrap 正则</span><br><span class="line">  - 范例：</span><br><span class="line">    awk &#x27;/^UUID/ &#123;print $1,$2&#125;&#x27; /etc/fstab    # 对于 /etc/fstab，输出以 UUID 开头的行对应的第一列和第二列挂载点</span><br><span class="line"></span><br><span class="line">* 关系表达式</span><br><span class="line">  - 表示只对关系表达式结果为 ture 的行进行 action</span><br><span class="line">  - 可以使用 awk 支持的任何关系操作符</span><br><span class="line">  - 范例：</span><br><span class="line">    awk -f &#x27;:&#x27; &#x27;$3 &gt; 1000 &#123;print $1&#125;&#x27; /etc/passwd   # 对于 /etc/passwd，输出第三列大于 1000 的行的 $1，也就是查找 non-system 账号的用户名</span><br><span class="line"></span><br><span class="line">* BEGIN</span><br><span class="line">  - 在读取 INPUT 之前，进行的动作</span><br><span class="line">  - 一个 awk program 中只能有一个 BEGIN 块，多个程序文件中所包含的 BEGIN 块会合并为一整个块</span><br><span class="line">  - BEGIN 不能与其他 pattern 组合</span><br><span class="line">  - BEGIN 不能缺少 action</span><br><span class="line"></span><br><span class="line">* END</span><br><span class="line">  - 在读取 INPUT 结束之后，进行的动作</span><br><span class="line">  - 一个 awk program 中只能有一个 END 块，多个程序文件中所包含的 END 块会合并为一整个块</span><br><span class="line">  - END 不能与其他 pattern 组合</span><br><span class="line">  - END 不能缺少 action</span><br><span class="line"></span><br><span class="line">* BEGINFILE</span><br><span class="line">  - 与 BEGIN 类似，不过是在读取每一个 INPUT 文件之前，都执行一次</span><br><span class="line"></span><br><span class="line">* ENDFILE</span><br><span class="line">  # 与 END 类似，不过是在结束读取每一个 INPUT 文件之后，都执行一次</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>PATTERN 的逻辑组合</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* 所有组合均支持短路逻辑</span><br><span class="line"></span><br><span class="line">* pattern &amp;&amp; pattern</span><br><span class="line"></span><br><span class="line">* pattern || pattern</span><br><span class="line"></span><br><span class="line">* ! pattern</span><br><span class="line"></span><br><span class="line">* (pattern)</span><br><span class="line">  - 使用括号来提升优先级</span><br><span class="line"></span><br><span class="line">* pattern1 ? pattern2 : pattern3</span><br><span class="line">  - pattern 测试</span><br><span class="line">  - 如果 pattern1 为 ture，则继续对 pattern2 测试</span><br><span class="line">  - 如果 pattern1 为 false，则继续对 pattern3 测试</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范围型 PATTERN</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* pattern1, pattern2</span><br><span class="line">  - 范围型 pattern</span><br><span class="line">  - 对 INPUT 的行，从 pattern1 的匹配行开始，到 pattern2 的匹配行结束，中间的所有的行都执行 action</span><br><span class="line">  - 查找匹配范围的行为会循环进行，即从一个 pattern2 的匹配行结束后，从下一个 pattern1 的匹配行又重新开始，直到 INPUT 结束</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：awk-操作符"><a href="#知识点：awk-操作符" class="headerlink" title="知识点：awk 操作符"></a>知识点：awk 操作符</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">* 优先级由高到低</span><br><span class="line"></span><br><span class="line">1. (...)</span><br><span class="line">  - 打包</span><br><span class="line"></span><br><span class="line">2. $</span><br><span class="line">  - 列引用</span><br><span class="line"></span><br><span class="line">3. ++、--</span><br><span class="line">  - 自增、自减</span><br><span class="line"></span><br><span class="line">4. ^、**</span><br><span class="line">  - 幂运算</span><br><span class="line"></span><br><span class="line">5. +、-、!</span><br><span class="line">  - 正号、负号、逻辑否</span><br><span class="line"></span><br><span class="line">6. *、/、%</span><br><span class="line">  - 乘法、浮点除、模除</span><br><span class="line"></span><br><span class="line">7. +、-</span><br><span class="line"></span><br><span class="line">8. space</span><br><span class="line">  - 字符连接</span><br><span class="line"></span><br><span class="line">9. |、|&amp;</span><br><span class="line">  - 管道、协进程管道</span><br><span class="line"></span><br><span class="line">10. &lt;、&gt;、&lt;=、&gt;=、!=、==</span><br><span class="line"></span><br><span class="line">11. ~、!~</span><br><span class="line">  - 正则匹配、正则不匹配</span><br><span class="line">  - pattern 要放在符号右边</span><br><span class="line">  - 范例：</span><br><span class="line">    $1 ~ /^data/</span><br><span class="line"></span><br><span class="line">12. in</span><br><span class="line">  - 数组成员，检测字符串是否是数组的某个 INDEX</span><br><span class="line"></span><br><span class="line">13. &amp;&amp;</span><br><span class="line">  - 逻辑 AND</span><br><span class="line"></span><br><span class="line">14. ||</span><br><span class="line">  - 逻辑 OR</span><br><span class="line"></span><br><span class="line">15. ? :</span><br><span class="line">  - C 用法条件表达式</span><br><span class="line">  - expr1 ? expr2 : expr3</span><br><span class="line">    - expr1 true 则继续计算 expr2</span><br><span class="line">    - expr1 false 则继续计算 expr3</span><br><span class="line"></span><br><span class="line">16. =、+=、-=、*=、/=、%=、^=、**=</span><br><span class="line">  - 各种赋值操作符</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：awk-输入输出语句"><a href="#知识点：awk-输入输出语句" class="headerlink" title="知识点：awk 输入输出语句"></a>知识点：awk 输入输出语句</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 输入输出语句</span><br><span class="line">  - input/output statement</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>输入输出语句</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* getline var</span><br><span class="line">  - 将 $0 保存到 var 中，并且更新 NF、NR、FNR</span><br><span class="line"></span><br><span class="line">* COMMAND | getline [var]</span><br><span class="line">  - 执行 COMMAND，将结果保存到 $0 或者 var 中</span><br><span class="line"></span><br><span class="line">* next</span><br><span class="line">  - 停止执行当前 record，读入下一条 record 并从头重新开始执行 awk 的程序</span><br><span class="line"></span><br><span class="line">* print</span><br><span class="line">  - 打印当前的 record</span><br><span class="line"></span><br><span class="line">* print expr-list</span><br><span class="line">  - 打印表达式列表的结果，表达式结果之间使用 OFS 间隔</span><br><span class="line"></span><br><span class="line">* print expr-list &gt; file</span><br><span class="line">  - 打印表达式列表的结果，保存到文件中</span><br><span class="line"></span><br><span class="line">* print expr-list &gt;&gt; file</span><br><span class="line">  - 将结果追加到文件中</span><br><span class="line"></span><br><span class="line">* system(cmd-line)</span><br><span class="line">  - 执行系统命令，并返回此命令的退出状态</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>printf 语句</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">* printf 语句可以支持格式化输出</span><br><span class="line"></span><br><span class="line">* printf 与 print 不同，默认不输出换行符，因此需要手动指定换行符 \n</span><br><span class="line"></span><br><span class="line">* printf 参数格式</span><br><span class="line">  %[modifier]control-leter</span><br><span class="line"></span><br><span class="line">* control-leter</span><br><span class="line">  - c        一个单字符</span><br><span class="line">  - d、i     一个整形数</span><br><span class="line">  - e、E     一个指数型浮点数，格式为 [-]d.dddddde[+-]dd</span><br><span class="line">  - f、F     一个浮点数，格式为 [-]ddd.dddddd</span><br><span class="line">  - o        一个无符号八进制</span><br><span class="line">  - u        一个无符号十进制</span><br><span class="line">  - s        一个字符串</span><br><span class="line">  - x、%X    一个无符号十六进制数</span><br><span class="line">  - %        一个 % 符号</span><br><span class="line"></span><br><span class="line">* modifier</span><br><span class="line">  - -       向左对齐</span><br><span class="line">  - space   对于数字，正数的前缀为 space，负数的前缀为 -</span><br><span class="line">  - +       对于数字，正数前缀为 +，负数前缀为 -</span><br><span class="line">  - 0       对于数字，使用 0 进行填充而不是 space</span><br><span class="line">  - width   指定列的宽度</span><br><span class="line">  - .prec   指定数字的精度</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 范例</span><br><span class="line"></span><br><span class="line"># 输出两列字符串</span><br><span class="line">printf &quot;%s %s\n&quot;, $1, $4</span><br><span class="line"></span><br><span class="line"># 输出两列字符串，不过第一列为字符串，宽度为 16，向左对齐，第二列为数字，使用 0 补全</span><br><span class="line">printf &quot;%-16s %010d\n&quot;, $1, $4</span><br><span class="line"></span><br><span class="line"># 将第一列按照 &quot;Average：XXXX.X&quot; 格式打印</span><br><span class="line">printf &quot;Average: %5.1f \n&quot;, $1</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：awk-控制流语句"><a href="#知识点：awk-控制流语句" class="headerlink" title="知识点：awk 控制流语句"></a>知识点：awk 控制流语句</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 控制流语句</span><br><span class="line">  - control statement</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>条件</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* if (condition) statement [ else statement ]</span><br><span class="line"></span><br><span class="line">* condition</span><br><span class="line">  - 0 或 null string 则为 false</span><br><span class="line">  - 其他为 true</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 范例</span><br><span class="line"></span><br><span class="line">if ( $1 &gt;10 ) print $2</span><br><span class="line"></span><br><span class="line">if ( $1 &gt;10 ) &#123; var=$2*2 ; print var &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>循环</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* while (condition) statement</span><br><span class="line"></span><br><span class="line">* do statement while (condition)</span><br><span class="line"></span><br><span class="line">* for (expr1; expr2; expr3) statement</span><br><span class="line"></span><br><span class="line">* for (var in array) statement</span><br><span class="line"></span><br><span class="line">* break</span><br><span class="line"></span><br><span class="line">* continue</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>删除</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* delete array[index]</span><br><span class="line"></span><br><span class="line">* delete array</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>退出</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* exit [ expression ]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>语句打包</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* &#123; statements &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>分支</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">switch (expression) &#123;</span><br><span class="line">    case value|regex : statement</span><br><span class="line">    ...</span><br><span class="line">    [ default: statement ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：awk-算术函数"><a href="#知识点：awk-算术函数" class="headerlink" title="知识点：awk 算术函数"></a>知识点：awk 算术函数</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Numeric Functions</span><br><span class="line"></span><br><span class="line">* 综合</span><br><span class="line">  - exp(expr)</span><br><span class="line">  - log(expr)</span><br><span class="line">  - int(expr)     截断为整形数</span><br><span class="line">  - sqrt(expr)    计算平方根</span><br><span class="line"></span><br><span class="line">* 三角函数</span><br><span class="line">  - sin(expr)</span><br><span class="line">  - cos(expr)</span><br><span class="line">  - atan2(y, x)   计算 y/x 所代表的弧度的反正切</span><br><span class="line"></span><br><span class="line">* 随机数</span><br><span class="line">  - rand()        返回随机数，0~1 之间，注意，如果随机数生成器的种子没有手动改变，则始终输出同样的数</span><br><span class="line">  - srand([expr]) 对于随机数生成器，给予其一个新的种子</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：awk-字符串函数"><a href="#知识点：awk-字符串函数" class="headerlink" title="知识点：awk 字符串函数"></a>知识点：awk 字符串函数</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - String Functions</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>综合</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* length([s])</span><br><span class="line">  - 返回字符串 s 的长度，省略则表示使用 $0</span><br><span class="line">  - 返回数组 s 中元素的个数</span><br><span class="line"></span><br><span class="line">* sprintf(fmt, expr-list)</span><br><span class="line">  - 格式化输出函数</span><br><span class="line"></span><br><span class="line">* tolower(str)</span><br><span class="line">  - 返回 str 的全小写副本</span><br><span class="line"></span><br><span class="line">* toupper(str)</span><br><span class="line">  - 返回 str 的全大写副本</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>字符串查找</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* index(s, t)</span><br><span class="line">  - 返回字符串 t 在字符串 s 中出现位置的索引</span><br><span class="line"></span><br><span class="line">* match(s, r [, a])</span><br><span class="line">  - 返回字符串 s 中正则表达式 r 出现的位置</span><br><span class="line">  - 更新 RSTART 和 RLENGTH</span><br><span class="line">  - 如果 r 中包含多个捕捉群，则 a 作为数组用来储存每一个捕捉群的结果，保存到索引为 1~N 的位置，而 0 元素储存 s 中对 r 的总匹配结果</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>字符串截取和替换</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* substr(s, i [, n])</span><br><span class="line">  - 从 s 中截取子字符串，i 表示开始的索引，n 表示截取的长度，省略则截取至 s 的末尾</span><br><span class="line"></span><br><span class="line">* split(s, a [, r [, seps] ])</span><br><span class="line">  - 对长字符串 s 进行切分，保存到结果数组 a 中</span><br><span class="line">  - r 表示切分的分隔符，为正则表达式，省略则使用 FS</span><br><span class="line">  - seps 为切分时使用的分隔符的数组，例如 seps[n] 是 a[n] 和 a[n+1] 之间的分隔符</span><br><span class="line"></span><br><span class="line">* gensub(r, s, h [, t])</span><br><span class="line">  - 从原始字符串生成新的字符串</span><br><span class="line">  - t 表示原始字符串，省略则使用 $0，gensub 函数不会对 t 的原始数据进行更改</span><br><span class="line">  - r 表示正则表达式，在 t 中进行搜索</span><br><span class="line">  - s 表示替换字符串，将 t 中与 r 匹配的部分进行替换，s 中可以使用回溯引用</span><br><span class="line">  - h 表示替换旗标，g 或 G 表示对 t 中所有的匹配项都进行替换，N 表示对 t 中的第 N 个匹配项进行替换</span><br><span class="line"></span><br><span class="line">* gsub(r, s [, t])</span><br><span class="line">  - 替换原始字符串中的内容</span><br><span class="line">  - t 表示目标字符串，省略则使用 $0，gsub 函数会对 t 的原始数据进行更改</span><br><span class="line">  - r 表示正则表达式</span><br><span class="line">  - s 表示待替换的字符串，其中可以使用 \&amp; 来代表 r 所匹配的结果</span><br><span class="line"></span><br><span class="line">* sub(r, s [, t])</span><br><span class="line">  - 与 gsub 相似，但只替换第一个匹配项</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>数组元素排序</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">* asort(s [, d [, how] ])</span><br><span class="line">  - s 为 array</span><br><span class="line">  - 对数组的值进行排序，由小到大</span><br><span class="line">  - asort(s)</span><br><span class="line">    - 返回 s 中元素的个数</span><br><span class="line">    - 修改 s，修改后，s 的索引变成 1,2,3...，s 中最小的值放在 s[1]，s 中第二小的值放在 s[2]，依次类推</span><br><span class="line"></span><br><span class="line">* asort(s,d)</span><br><span class="line">  - 返回 s 中元素的个数</span><br><span class="line">  - s 不进行修改</span><br><span class="line">  - d 中保存 s 排序后的结果</span><br><span class="line"></span><br><span class="line">* asort(s,d,how)</span><br><span class="line">  - 与 asort(s,d) 基本相同</span><br><span class="line">  - how 用来直到使用何种方式排序，可用值包括：</span><br><span class="line">    - &quot;@ind_str_asc&quot;</span><br><span class="line">    - &quot;@ind_str_desc&quot;</span><br><span class="line">    - &quot;@val_str_asc&quot;</span><br><span class="line">    - &quot;@val_str_desc&quot;</span><br><span class="line">    - &quot;@ind_num_asc&quot;</span><br><span class="line">    - &quot;@ind_num_desc&quot;</span><br><span class="line">    - &quot;@val_num_asc&quot;      对 value 按照 num 排序，asc 顺序</span><br><span class="line">    - &quot;@val_num_desc&quot;</span><br><span class="line">    - &quot;@val_type_asc&quot;</span><br><span class="line">    - &quot;@val_type_desc&quot;</span><br><span class="line">    - &quot;@unsorted&quot;</span><br><span class="line"></span><br><span class="line">* asorti(s [, d [, how] ])</span><br><span class="line">  - 对数组索引进行排序</span><br><span class="line">  - 与 asort() 基本相同，区别在于，使用 index 的值而不是 value 的值进行排序</span><br><span class="line">  - 结果数组中，索引为数字，值为原来的索引</span><br><span class="line">  - 数组原始的 value 丢失</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：awk-时间函数"><a href="#知识点：awk-时间函数" class="headerlink" title="知识点：awk 时间函数"></a>知识点：awk 时间函数</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Time Functions</span><br><span class="line"></span><br><span class="line">* systime()</span><br><span class="line">  - 返回当前时间的时间戳，即与 Unix 基准时间 Epoch 之间的秒数</span><br><span class="line"></span><br><span class="line">* mktime(datespec)</span><br><span class="line">  - 返回指定时间 dataspec 的时间戳，默认基于 local 时间计算</span><br><span class="line">  - dataspec</span><br><span class="line">    - 格式 &quot;YYYY MM DD HH MM SS[ DST]&quot;，不可以缺少其中任何一项，必须是年月日时分秒齐全，否则会返回 -1</span><br><span class="line">    - dataspec 的时间格式可以写的很宽泛，如 hour 部分如果写 -1，在午夜的基础上减去 3600 秒</span><br><span class="line">  - 范例：</span><br><span class="line">    awk &#x27;BEGIN &#123;print mktime(&quot;2021 06 05 1 2 00&quot;)&#125;&#x27;</span><br><span class="line"></span><br><span class="line">* strftime([format [, timestamp[, utc-flag]]])</span><br><span class="line">  - 将时间戳转换为指定的时间格式 format</span><br><span class="line">  - format 参考 C 的 strftime 函数的格式，亦即 date 命令的时间格式</span><br><span class="line">  - utc-flag，默认 0 表示按照 local 时间计算，非 0 表示按照 utc 时间计算</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：awk-用户自定义函数"><a href="#知识点：awk-用户自定义函数" class="headerlink" title="知识点：awk 用户自定义函数"></a>知识点：awk 用户自定义函数</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 自定义函数应该出现在调用它的块之前</span><br><span class="line">    - 如果想要在 BEGIN 块中调用函数，则函数的定义需要写在 BEGIN 块之前</span><br><span class="line">    - 最好通过 @include 的方式，将函数放在额外的文件中</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>语法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  function name(parameter-list) &#123; statements &#125;</span><br><span class="line"></span><br><span class="line">* parameter-list</span><br><span class="line">  - 形参列表</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="2-5-Vim"><a href="#2-5-Vim" class="headerlink" title="2.5 Vim"></a>2.5 Vim</h2><hr>
<h3 id="知识点：vim-介绍"><a href="#知识点：vim-介绍" class="headerlink" title="知识点：vim 介绍"></a>知识点：vim 介绍</h3><ol>
<li><strong>vim 相关文件</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* ~/.viminfo</span><br><span class="line">  - 记录在 vim 中的历史操作</span><br><span class="line"></span><br><span class="line">* /etc/vimrc</span><br><span class="line">  - 全局 vim 配置文件</span><br><span class="line"></span><br><span class="line">* ~/.vimrc</span><br><span class="line">  - 个人 vim 配置文件</span><br><span class="line"></span><br><span class="line">* .FILE.swp</span><br><span class="line">  - vim 的临时文件</span><br><span class="line">  - 多次非正常退出，会保留多个版本的临时文件，后缀名为 swp、swo、swn 以此类推</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>vim 命令行选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* -R</span><br><span class="line">  - 以只读方式打开文件，会自动 :set readonly</span><br><span class="line"></span><br><span class="line">* -m</span><br><span class="line">  - 以禁止修改的方式打开文件，会自动 :set nowrite</span><br><span class="line"></span><br><span class="line">* -s File</span><br><span class="line">  - 启动前执行 File 中的命令</span><br><span class="line"></span><br><span class="line">* -u InitFile</span><br><span class="line">  - 指定初始化文件</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>vim 模式 Mode</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* Normal Mode 普通模式</span><br><span class="line">  - 最基础的模式</span><br><span class="line">  - 从任何其他模式中，按下 &lt;ESC&gt; 或 CTRL+C 后，就可以返回普通模式</span><br><span class="line">  - 推荐使用 CTRL+C</span><br><span class="line"></span><br><span class="line">* Insert Mode 插入模式</span><br><span class="line">  - 进行内容的编辑</span><br><span class="line"></span><br><span class="line">* CommandLine Mode 命令行模式</span><br><span class="line">  - 输入 Ex Commands (&quot;:&quot;)，或进行搜索 Search (&quot;/&quot;, &quot;?&quot;)</span><br><span class="line"></span><br><span class="line">* Visual Mode 视图模式</span><br><span class="line">  - vim 提供的一个简陋的图形化方式的操作界面</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>vim 帮助</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">* 网站</span><br><span class="line">  https://vimhelp.org/</span><br><span class="line"></span><br><span class="line">* 帮助界面内操作</span><br><span class="line">  - Ctrl+]            跳转到相应节点</span><br><span class="line">  - Ctrl+o、Ctrl+t    返回之前的节点</span><br><span class="line"></span><br><span class="line">* 查看某个帮助页面</span><br><span class="line">  - :help、F1         进入帮助页面</span><br><span class="line">  - :help element     查看某个项目的帮助页面</span><br><span class="line">  - :help quickref    查看 quick reference</span><br><span class="line"></span><br><span class="line">* 查看选项的帮助</span><br><span class="line">  - :help &#x27;Option&#x27;    使用单引号</span><br><span class="line"></span><br><span class="line">* 查看命令的帮助</span><br><span class="line">  - :help command       查看 Normal mode 的某个命令的帮助</span><br><span class="line">  - :help :command      查看某个 Ex command 的帮助</span><br><span class="line">  - :help i_command     查看 Insert Mode 的某个命令的帮助</span><br><span class="line">  - :help v_command     查看 Visual Mode 的某个命令的帮助</span><br><span class="line">  - :help v_b_command   查看 Visual Block Mode 的某个命令的帮助</span><br><span class="line"></span><br><span class="line">* 特殊按键的表示 special key</span><br><span class="line">  - &lt;C-X&gt;、&lt;Ctrl-X&gt;                  Ctrl 组合键</span><br><span class="line">  - &lt;S-X&gt;、&lt;Shift-X&gt;                 shift 组合键</span><br><span class="line">  - &lt;F1&gt;...&lt;F12&gt;                     F1 到 F12 键</span><br><span class="line">  - &lt;Up&gt;、&lt;Down&gt;、&lt;Left&gt;、&lt;Right&gt;    方向键</span><br><span class="line">  - &lt;Cr&gt;                             回车键</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>自定义按键</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 使用 :map 命令来进行按键自定义</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  :map &#123;lhs&#125; &#123;rhs&#125;</span><br><span class="line"></span><br><span class="line">* 范例</span><br><span class="line">  - :map &lt;F12&gt; :set nu&lt;CR&gt;      设置 F12 键表示启用显示行号</span><br><span class="line">  - :map &lt;F12&gt; z&lt;CR&gt;            设置 F12 键表示将光标行作为窗口首行</span><br><span class="line">  - :map &lt;f12&gt; &lt;c-w&gt;&lt;c-w&gt;       设置 F12 见表示两个 Ctrl-W 按键，即移动 cursor 到另一个 window</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：vim-选项"><a href="#知识点：vim-选项" class="headerlink" title="知识点：vim 选项"></a>知识点：vim 选项</h3><ol>
<li><strong>set 命令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">* set OPTION</span><br><span class="line">* set noOPTION</span><br><span class="line">  - 对于 Boolean 型选项，开启/关闭此选项</span><br><span class="line"></span><br><span class="line">* set OPTION=VALUE</span><br><span class="line">* set OPTION+=VALUE</span><br><span class="line">* set OPTION-=VALUE</span><br><span class="line">  - 对于 Value 型选项，设置其值</span><br><span class="line"></span><br><span class="line">* set OPTION?</span><br><span class="line">  - 查看选项的值</span><br><span class="line"></span><br><span class="line">* set all</span><br><span class="line">  - 查看所有选项的值</span><br><span class="line"></span><br><span class="line">* set OPTION&amp;</span><br><span class="line">  - 将选项恢复为默认值</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>vim 选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">* 缩进相关</span><br><span class="line">  - audoindent      Boolean 型，自动缩进</span><br><span class="line">  - shiftwidth      指定 vim 缩进时的宽度</span><br><span class="line"></span><br><span class="line">* tab 相关</span><br><span class="line">  - expandtab       Boolean 型，在输入 tab 时自动改为输入 space</span><br><span class="line">  - tabstop         设置 tab 的宽度</span><br><span class="line"></span><br><span class="line">* 显示相关</span><br><span class="line">  - cursorline      Boolean 型，对于 cursor 所在的行进行高亮显示</span><br><span class="line">  - list            Boolean 型，显示 tab 字符和 eol 字符，以 ^I 和 $ 显示</span><br><span class="line">  - number          Boolean 型，显示行号</span><br><span class="line">  - ruler           Boolean 型，显示光标标尺</span><br><span class="line">  - showcmd         Boolean 型，在 status line 显示输入的命令</span><br><span class="line">  - showmode        Boolean 型，显示当前的 mode</span><br><span class="line"></span><br><span class="line">* wrap 相关</span><br><span class="line">  - wrap            Boolean 型，对过长的行折叠显示</span><br><span class="line">  - breakindent     Boolean 型，对于 wrapped 的行是否缩进显示</span><br><span class="line">  - linebreak       Boolean 型，在 wrap 行时在 blank 处进行 wrap</span><br><span class="line">  - showbreak       指定对 wrapped 行显示添加的字符</span><br><span class="line">  - sidescroll      设置水平滚动时移动的宽度</span><br><span class="line"></span><br><span class="line">* 备份相关</span><br><span class="line">  - backup          Boolean 型，自动备份</span><br><span class="line"></span><br><span class="line">* 搜索相关</span><br><span class="line">  - hlsearch        Boolean 型，高亮搜索</span><br><span class="line">  - ignorecase      Boolean 型，搜索忽略大小写</span><br><span class="line">  - incsearch       Boolean 型，高亮搜索输入</span><br><span class="line">  - smartcase       Boolean 型，搜索时只在 pattern 全部是小写时忽略大小写，pattern 只要包含一个大写字母就不忽略</span><br><span class="line">  - wrapscan        Boolean 型，循环查找</span><br><span class="line"></span><br><span class="line">* vim 状态信息，建议只用作查看，不建议手动修改</span><br><span class="line">  - columns       当前 vim 窗口会显示多少列</span><br><span class="line">  - lines         当前 vim 窗口会显示多少行</span><br><span class="line">  - term          当前 vim 使用的终端</span><br><span class="line"></span><br><span class="line">* 其他</span><br><span class="line">  - exrc          Boolean 型，自动读取 current directory 的 vimrc 文件</span><br><span class="line">  - mouse         启用鼠标，a 表示在所有 Mode 中都启用鼠标</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>vimrc 范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&quot; 使用双引号表示注释，并且双引号需要放在开头</span><br><span class="line">&quot; 不可以有空行</span><br><span class="line">&quot; 基础设置</span><br><span class="line">set number</span><br><span class="line">set showcmd</span><br><span class="line">set showmode</span><br><span class="line">set autoindent</span><br><span class="line">set shiftwidth=4</span><br><span class="line">set expandtab</span><br><span class="line">set tabstop=4</span><br><span class="line">set wrap</span><br><span class="line">set mouse=a</span><br><span class="line">set cursorline</span><br><span class="line">&quot; set list                  使用 $ 显示 EOL</span><br><span class="line">set ruler</span><br><span class="line">set smartcase</span><br><span class="line">&quot; 设置 showbreak 为 &#x27;---&gt;    &#x27;，空格需要进行转义</span><br><span class="line">set showbreak=---&gt;\ \ \ \</span><br><span class="line">&quot; 快捷键设置</span><br><span class="line">&quot; map &lt;F11&gt; &lt;C-W&gt;&lt;C-W&gt;      设置 &lt;F11&gt; 为切换窗口</span><br><span class="line">&quot; map &lt;F12&gt; z&lt;cr&gt;           设置 &lt;F12&gt; 为定位光标行为窗口第一行</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：vim-Command-格式"><a href="#知识点：vim-Command-格式" class="headerlink" title="知识点：vim Command 格式"></a>知识点：vim Command 格式</h3><ol>
<li><strong>强制执行</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* !</span><br><span class="line">  - 在大多数情况下，vim 指令中 &#x27;!&#x27; 符号用来表示强制执行</span><br><span class="line">  - 如 w!、wq!</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>number counted action</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* N command</span><br><span class="line">  - 基于次数的命令，N 表示一个数字</span><br><span class="line">  - 对于支持此格式的命令，其意义为执行 N 次 command</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>Motion</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Motion，移动光标的动作</span><br><span class="line">  - 对于基于 Motion 的命令，其操作的内容是 cursor 移动过程中扫过的所有内容</span><br><span class="line"></span><br><span class="line">* 关于跨行</span><br><span class="line">  - 如果 &lt;Motion&gt; 未跨行，则 Motion 是 linewise 的，命令操作的内容为 cursor 在此行扫过的内容</span><br><span class="line">  - 如果 &lt;Motion&gt; 跨行，则命令操作的内容是 cursor 移动过程涉及到的所有的行</span><br><span class="line">  - 例如 d&lt;Down&gt;，cursor 向下移动一行，涉及当前行和下一行，则实际的作用是删除当前行和下一行</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>Range</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Range，行范围</span><br><span class="line">  - 对于基于 Range 的命令，Range 用来指定命令对哪些行进行操作，最典型的用法就是替换</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  LineNumber                只有一个行号，表示只对指定的某一行进行操作</span><br><span class="line">  LineNumber, LineNumber    两个行号组成的行范围</span><br><span class="line"></span><br><span class="line">* LineNumber 格式</span><br><span class="line">  - Number    指定行号</span><br><span class="line">  - .         表示当前行</span><br><span class="line">  - $         表示文件的最后一行</span><br><span class="line">  - ?&#123;pattern&#125;[?]   上一个包含 pattern 的行</span><br><span class="line">  - /&#123;pattern&#125;[/]   下一个包含 pattern 的行</span><br><span class="line">  - 所有的 mark</span><br><span class="line"></span><br><span class="line">* 行号计算</span><br><span class="line">  - +[num]</span><br><span class="line">  - -[num]</span><br><span class="line"></span><br><span class="line">* 指定范围</span><br><span class="line">  - , 或 ;  间隔两个行号表示范围</span><br><span class="line">  - %       表示文件的全部内容，相当于 1,$</span><br><span class="line">  - *       表示上一次 Visual 选择的行，相当于 &#x27;&lt;,&#x27;&gt;</span><br><span class="line"></span><br><span class="line">* 范例</span><br><span class="line">  :4d                  删除第 4 行</span><br><span class="line">  :4,10d               删除第 4 行到第 10 行</span><br><span class="line">  :4,$-2d              删除第 4 行到倒数第 3 行</span><br><span class="line">  :%d                  全文删除</span><br><span class="line">  :%s/apple/Apple/g    全文替换</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：vim-基本操作-Command"><a href="#知识点：vim-基本操作-Command" class="headerlink" title="知识点：vim 基本操作 Command"></a>知识点：vim 基本操作 Command</h3><ol>
<li><strong>基础</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* 报告信息</span><br><span class="line">  - Ctrl+G、:f[ile]   报告当前的文件名和光标的位置信息</span><br><span class="line"></span><br><span class="line">* 重复操作 repeat</span><br><span class="line">  - N .               重复执行 N 次之前的修改操作</span><br><span class="line"></span><br><span class="line">* 撤销和重做</span><br><span class="line">  - N u               undo，撤销之前的修改</span><br><span class="line">  - N Ctrl+R          redo，对撤销的修改进行重做</span><br><span class="line"></span><br><span class="line">* 读取外部命令</span><br><span class="line">  - :so[urce] &#123;file&#125;  从文件中读取 vim 命令并执行</span><br><span class="line"></span><br><span class="line">* 启动子 shell</span><br><span class="line">  - :shell            启动一个子 shell</span><br><span class="line">  - :!shell-command   在启动的子 shell 中执行 shell 命令</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>打开文件</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 编辑文件</span><br><span class="line">  - :e[dit][!]          重新编辑当前文件</span><br><span class="line">  - :e[dit][!] File     编辑某个文件</span><br><span class="line">  - :ene[w][!]          打开一个全新的空的 vim buffer</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>保存和退出</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">* 保存</span><br><span class="line">  - :[range]w[rite][!]              将修改写入到文件</span><br><span class="line">  - :[range]w[rite][!] &#123;file&#125;       将对当前文件的修改后的版本保存到另一个文件中</span><br><span class="line">  - :[range]w[rite][!] &gt;&gt; &#123;file&#125;    将对当前文件的修改后的版本追加保存到另一个文件中</span><br><span class="line"></span><br><span class="line">* 退出</span><br><span class="line">  - :wq[!]                  保存并退出 vim buffer</span><br><span class="line">  - :wq[!] &#123;file&#125;           保存到其他文件并退出 vim buffer</span><br><span class="line">  - :q[uit][!]              不保存并退出 vim buffer</span><br><span class="line">  - :qa[ll][!]              不保存并退出所有的 vim buffer</span><br><span class="line">  - :wqall[!]、:xa[ll][!]   保存并退出所有的 vim buffer</span><br><span class="line"></span><br><span class="line">* 其他</span><br><span class="line">  - :[range]w[rite] !&#123;cmd&#125;    execute &#123;cmd&#125; with [range] lines as standard input</span><br><span class="line">  - :[range]up[date][!]       write to current file if modified</span><br><span class="line">  - :x[it][!] [file]          like &quot;:wq&quot; but write only when changes have been made</span><br><span class="line">  - ZZ                        same as &quot;:x&quot;</span><br><span class="line">  - ZQ                        same as &quot;:q!&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>滚动 Scrolling</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">* 翻页</span><br><span class="line">  - Ctrl-Home            移动到文件开头</span><br><span class="line">  - Ctrl-End             移动到文件末尾</span><br><span class="line">  - N CTRL-F、PageUp     向下翻 N 页</span><br><span class="line">  - N CTRL-B、PageDown   向上翻 N 页</span><br><span class="line"></span><br><span class="line">* 滚动</span><br><span class="line">  - N CTRL-E    向下滚动 N 行，默认 1 页</span><br><span class="line">  - N CTRL-Y    向上滚动 N 行，默认 1 页</span><br><span class="line">  - N CTRL-D    向下滚动 N 行，默认 0.5 页</span><br><span class="line">  - N CTRL-U    向上滚动 N 行，默认 0.5 页</span><br><span class="line"></span><br><span class="line">* 纵向定位窗口</span><br><span class="line">  - zt、z&lt;CR&gt;   定位窗口为当前行作为窗口的第一行</span><br><span class="line">  - zb、z-      定位窗口为当前行作为窗口的最后一行</span><br><span class="line">  - zz、z.      定位窗口为当前行作为窗口的中间行</span><br><span class="line"></span><br><span class="line">* 水平滑动窗口 Scrolling horizontally，只在 nowrap 时可用</span><br><span class="line">  - zs      向右滑动窗口，直到光标位置成为窗口的开始位置</span><br><span class="line">  - ze      向左滑动窗口，直到光标位置成为窗口的结束位置</span><br><span class="line">  - N zH    向右滑动 N 个半宽窗口</span><br><span class="line">  - N zL    向左滑动 N 个半宽窗口</span><br><span class="line">  - N zh、z&lt;Right&gt;    向右滑动 N 个字符</span><br><span class="line">  - N zl、z&lt;Left&gt;     向左滑动 N 个字符</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>多窗口 Multi Windows</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">* 新建窗口</span><br><span class="line">  - :split [file]、CTRL-W s      上下分布切分窗口，适合于编辑一个较大的文件</span><br><span class="line">  - :vsplit [file]、CTRL-W v     左右分布切分窗口，适合于同时编辑两个文件</span><br><span class="line">  - :new、CTRL-W n               创建一个新的空的窗口，上下分布</span><br><span class="line">  - :vnew                        创建一个新的空的窗口，左右分布</span><br><span class="line"></span><br><span class="line">* 关闭窗口</span><br><span class="line">  - CTRL-W q、:q[uit]    关闭 cursor 所在窗口</span><br><span class="line">  - CTRL-W c、:clo[se]   关闭 cursor 所在窗口</span><br><span class="line">  - CTRL-W o、:on[ly]    保留 cursor 所在窗口，关闭其他所有窗口</span><br><span class="line"></span><br><span class="line">* 移动光标到窗口</span><br><span class="line">  - CTRL-W CTRL-W        移动光标到另一个窗口</span><br><span class="line">  - CTRL-W p             移动光标到之前的窗口</span><br><span class="line">  - Ctrl-W &lt;Up&gt;</span><br><span class="line">  - Ctrl-W &lt;Down&gt;</span><br><span class="line">  - Ctrl-W &lt;Left&gt;</span><br><span class="line">  - Ctrl-W &lt;Right&gt;</span><br><span class="line"></span><br><span class="line">* 移动窗口</span><br><span class="line">  - CTRL-W x             交换窗口</span><br><span class="line">  - CTRL-W r             窗口向下移动</span><br><span class="line">  - CTRL-W R             窗口向上移动</span><br><span class="line">  - Ctrl-W K             将窗口移到最上 very top</span><br><span class="line">  - Ctrl-W J             将窗口移到最上 very bottom</span><br><span class="line">  - Ctrl-W H             将窗口移到最左 far left</span><br><span class="line">  - Ctrl-W L             将窗口移到最右 far right</span><br><span class="line"></span><br><span class="line">* 调整窗口尺寸</span><br><span class="line">  - CTRL-W =                           设置所有窗口的高度和宽度相等</span><br><span class="line">  - N CTRL-W _、:res[ize] N            设置当前窗口的高度为 N，默认最大</span><br><span class="line">  - N CTRL-W +、:res[ize] +N           增加当前窗口的高度</span><br><span class="line">  - N CTRL-W -、:res[ize] -N           降低当前窗口的高度</span><br><span class="line">  - N CTRL-W |、:vertical res[ize] N   设置当前窗口的宽度为 N，默认最大</span><br><span class="line">  - N CTRL-W &gt;、:vertical res[ize] +N  增加当前窗口的宽度</span><br><span class="line">  - N CTRL-W &lt;、:vertical res[ize] -N  降低当前窗口的宽度</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 显示字符编号</span><br><span class="line">  - ga      显示当前光标字符的 ascii 编号</span><br><span class="line">  - g8      显示当前光标字符的 utf-8 hex 编号</span><br><span class="line"></span><br><span class="line">* 路径</span><br><span class="line">  - :pwd           打印 current working directory</span><br><span class="line">  - :cd [Path]     切换 current working directory</span><br><span class="line">  - :cd -          切换到 previous current directory</span><br><span class="line"></span><br><span class="line">* 重命名</span><br><span class="line">  - :f[ile] &#123;name&#125;    文件重命名</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：vim-编辑操作-Command"><a href="#知识点：vim-编辑操作-Command" class="headerlink" title="知识点：vim 编辑操作 Command"></a>知识点：vim 编辑操作 Command</h3><ol>
<li><strong>删除</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 剪切字符，并保存到 clipboard 中</span><br><span class="line">  - N x、&lt;Del&gt;   剪切一个或 N 个字符</span><br><span class="line">  - N D          剪切到行末尾</span><br><span class="line">  - N d&#123;motion&#125;  基于 motion 剪切字符</span><br><span class="line"></span><br><span class="line">* 剪切行，并保存到 clipboard 中</span><br><span class="line">  - N dd          剪切 N 行</span><br><span class="line">  - :[range]d     剪切 range 指定的行</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>复制黏贴</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 复制</span><br><span class="line">  - N y&#123;motion&#125;   按照 motion 复制内容</span><br><span class="line">  - N Y、yy       复制 N 行</span><br><span class="line"></span><br><span class="line">* Visual 复制</span><br><span class="line">  - &#123;visual&#125;y     Visual 模式中复制选择的字符</span><br><span class="line">  - &#123;visual&#125;Y     Visual 模式中复制选择的行</span><br><span class="line"></span><br><span class="line">* 黏贴</span><br><span class="line">  - N p     在光标位置黏贴，如果复制的内容为行，则黏贴到下一行</span><br><span class="line">  - N ]p    与 p 相同，除了当复制的内容为行时，在下一行黏贴时会自动根据当前行来调整缩进</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>变更内容</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">* 行拼接</span><br><span class="line">  - N J           拼接行，会删除行首缩进的 space，再添加两个 space</span><br><span class="line">  - N gJ          拼接行，不会删除或添加任何 space</span><br><span class="line">  - &#123;visual&#125;J     Visual 模式的 J 命令</span><br><span class="line">  - &#123;visual&#125;gJ    Visual 模式的 gJ 命令</span><br><span class="line"></span><br><span class="line">* 变更大小写</span><br><span class="line">  - N ~           对 N 个字符切换大小写</span><br><span class="line">  - g~&#123;motion&#125;    基于 motion 切换字符的大小写</span><br><span class="line">  - gu&#123;motion&#125;    基于 motion 将字符全部转换为小写</span><br><span class="line">  - gU&#123;motion&#125;    基于 motion 将字符全部转换为大写</span><br><span class="line">  - &#123;visual&#125;~     Visual 模式切换大小写</span><br><span class="line">  - &#123;visual&#125;u     Visual 模式全部转换为小写</span><br><span class="line">  - &#123;visual&#125;U     Visual 模式全部转换为大写</span><br><span class="line"></span><br><span class="line">* 加减运算</span><br><span class="line">  - N CTRL-A    加法 add，对于光标之上或者光标之后的数字，对其计算加 N 后的结果，并使用结果对其进行替换</span><br><span class="line">  - N CTRL-X    加法 subtract，对于光标之上或者光标之后的数字，对其计算减 N 后的结果，并使用结果对其进行替换</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>排版</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 缩进</span><br><span class="line">  - N &gt;&gt;    对于 N 行添加一个 shiftwidth 的缩进</span><br><span class="line">  - N &lt;&lt;    对于 N 行删除一个 shiftwidth 的缩进</span><br><span class="line">  - &#123;visual&#125;&gt;   Visual 模式中，对选择的行添加一个 shiftwidth 的缩进</span><br><span class="line">  - &#123;visual&#125;&lt;   Visual 模式中，对选择的行删除一个 shiftwidth 的缩进</span><br><span class="line"></span><br><span class="line">* 排版</span><br><span class="line">  - :[range]ce[nter] [width]  基于 range 调整行为中心对齐</span><br><span class="line">  - :[range]le[ft] [indent]   基于 range 调整行为向左对齐</span><br><span class="line">  - :[range]ri[ght] [width]   基于 range 调整行为向右对齐</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：vim-移动光标-Motion"><a href="#知识点：vim-移动光标-Motion" class="headerlink" title="知识点：vim 移动光标 Motion"></a>知识点：vim 移动光标 Motion</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* line 和 screen line</span><br><span class="line">  - line，是指文件原本的内容的行</span><br><span class="line">  - screen line，是指 vim 对文件的内容显示的行</span><br><span class="line">    - :set wrap 后文件过长的行被折叠显示</span><br><span class="line">    - :set nowrap 后文件过长的行被放在横向的另一个窗口中显示</span><br><span class="line">  - 如无特殊说明，移动光标的操作默认都以 line 为操作基准</span><br><span class="line"></span><br><span class="line">* forwrod 和 backword</span><br><span class="line">  - forward 表示按照文件的内容向前，表现为横向向右，纵向向下</span><br><span class="line">  - backword 表示按照文件的内容向后，表现为横向向左，纵向向上</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>常用 Motion</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">* 上下左右移动光标</span><br><span class="line">  - N k、&lt;Up&gt;、CTRL-P</span><br><span class="line">  - N j、&lt;Down&gt;、CTRL-J、CTRL-N</span><br><span class="line">  - N h、&lt;Left&gt;、&lt;BS&gt;</span><br><span class="line">  - N l、&lt;Right&gt;、&lt;Space&gt;</span><br><span class="line"></span><br><span class="line">* 移动光标到行首行尾</span><br><span class="line">  - 0、&lt;Home&gt;    移动光标到行首字符</span><br><span class="line">  - $、&lt;End&gt;     移动光标到行尾字符</span><br><span class="line">  - ^            移动光标到行首非空白字符</span><br><span class="line"></span><br><span class="line">* 按行移动光标</span><br><span class="line">  - N gg    移动光标到第 N 行，默认为第一行</span><br><span class="line">  - N G     移动光标到第 N 行，默认为最后一行</span><br><span class="line">  - N %     按行百分比移动光标</span><br><span class="line">  - N H     移动到当前窗口中的第 N 行</span><br><span class="line">  - N L     移动到当前窗口中的倒数第 N 行</span><br><span class="line">  - M       移动到当前窗口中的中间行</span><br><span class="line"></span><br><span class="line">* 按 word 移动光标</span><br><span class="line">  - N w、Shift+&lt;Right&gt;   向 forward 移动 N 个 word</span><br><span class="line">  - N b、Shift+&lt;Left&gt;    向 backword 移动 N 个 word</span><br><span class="line">  - N W、Ctrl+&lt;Right&gt;    向 forward 移动 N 个 blank-separated word</span><br><span class="line">  - N B、Ctrl+&lt;Right&gt;    向 backword 移动 N 个 blank-separated word</span><br><span class="line"></span><br><span class="line">* 移动光标到匹配内容</span><br><span class="line">  - %</span><br><span class="line">    - 如果光标位于小括号、中括号、大括号之上，则移动光标到其对应的括号之上</span><br><span class="line">    - 如果光标位于小括号、中括号、大括号之中，则移动到其被包裹的括号之上</span><br><span class="line">    - 如果光标位于 C 格式注释 &#x27;/*&#x27;、&#x27;*/&#x27; 之上，则移动光标到其对应的注释标记之上</span><br><span class="line">    - 如果光标位于 C 格式条件 &#x27;#if&#x27;、&#x27;#elif&#x27;、&#x27;#else&#x27;、&#x27;#endif&#x27; 之上，则移动光标到其匹配的下一个 C 格式条件标记之上</span><br><span class="line">  - N [(   向 backword 移动到第 N 个未包裹的左小括号 &#x27;(&#x27; 之上</span><br><span class="line">  - N ])   向 forward 移动到第 N 个未包裹的右小括号 &#x27;)&#x27; 之上</span><br><span class="line">  - N [&#123;   向 backword 移动到第 N 个未包裹的左大括号 &#x27;&#123;&#x27; 之上</span><br><span class="line">  - N ]&#125;   向 forward 移动到第 N 个未包裹的右大括号 &#x27;&#125;&#x27; 之上</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>纵向移动光标</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 按 line 移动光标</span><br><span class="line">  - N -   向上移动 N 行，到行第一个 non-blank 字符</span><br><span class="line">  - N +   向下移动 N 行，到行第一个 non-blank 字符，也可以使用 &lt;CR&gt;、CTRL-M</span><br><span class="line">  - N _   向下移动 N-1 行，到行第一个 non-blank 字符</span><br><span class="line"></span><br><span class="line">* 按 screen line 移动光标</span><br><span class="line">  - N gk  向上移动 N 行 screen line</span><br><span class="line">  - N gj  向下移动 N 行 screen line</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>横向移动光标</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 移动光标到行中间</span><br><span class="line">  - gM    移动到 line middle</span><br><span class="line">  - gm    移动到 screen line middle</span><br><span class="line"></span><br><span class="line">* 按列移动光标</span><br><span class="line">  - N |   移动光标到第 N 列</span><br><span class="line"></span><br><span class="line">* 按字符移动光标</span><br><span class="line">  - N f&#123;char&#125;   移动到右边 char 字符第 N 次出现的位置之上</span><br><span class="line">  - N F&#123;char&#125;   移动到左边 char 字符第 N 次出现的位置之上</span><br><span class="line">  - N t&#123;char&#125;   移动到右边 char 字符第 N 次出现的位置的左边字符上</span><br><span class="line">  - N T&#123;char&#125;   移动到左边 char 字符第 N 次出现的位置的右边字符上</span><br><span class="line">  - N ;         重复执行 N 的前一个 &quot;f&quot;、&quot;F&quot;、&quot;t&quot;、&quot;T&quot; 操作</span><br><span class="line">  - N ,         反方向重复执行 N 的前一个 &quot;f&quot;、&quot;F&quot;、&quot;t&quot;、&quot;T&quot; 操作</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>光标跳转</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">* marks 操作</span><br><span class="line">  - :marks         print the active marks</span><br><span class="line">  - ``             将光标移动到跳转之前的位置之上</span><br><span class="line">  - `[             上一次修改/复制的内容的开头</span><br><span class="line">  - `]             上一次修改/复制的内容的结尾</span><br><span class="line">  - `&lt;             上一次 Visual 模式选择的内容的开头</span><br><span class="line">  - `&gt;             上一次 Visual 模式选择的内容的结尾</span><br><span class="line"></span><br><span class="line">* jump list 介绍</span><br><span class="line">  - 对于如 G、搜索等命令，cursor 每一次跳转，其之前的位置都会被保存在 jumplist 中</span><br><span class="line">  - jump list 相比于 marks，可操作性更强</span><br><span class="line">  - jump list 格式</span><br><span class="line">    - &#x27;&gt;&#x27; 表示当前的位置，jump 编号为零</span><br><span class="line">    - &#x27;&gt;&#x27; 之上的节点，表示 older 的节点，随着 jump 编号的增加越来越 older</span><br><span class="line">    - &#x27;&gt;&#x27; 之下的节点，表示 newer 的节点，锁着 jump 编号的增加越来越 newer</span><br><span class="line">    - 范例</span><br><span class="line">      jump  line  col file/text</span><br><span class="line">        3    9    4   something</span><br><span class="line">        2   11    11  something</span><br><span class="line">        1   13    15  something</span><br><span class="line">      &gt; 0   15    2   something</span><br><span class="line">        1   17    7   something</span><br><span class="line">        2   19    12  something</span><br><span class="line">        3   21    13  something</span><br><span class="line"></span><br><span class="line">* jump list 操作</span><br><span class="line">  - N CTRL-O       跳转到 older 节点上</span><br><span class="line">  - N CTRL-I       跳转到 newer 节点上</span><br><span class="line">  - :ju[mps]       打印 jump list</span><br><span class="line">  - :cle[arjumps]  清空 jump list</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>按照文本内容移动光标</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">* 按 word 移动光标</span><br><span class="line">  - N e   forward to the end of the Nth word</span><br><span class="line">  - N E   forward to the end of the Nth blank-separated WORD</span><br><span class="line">  - N ge  backward to the end of the Nth word</span><br><span class="line">  - N gE  backward to the end of the Nth blank-separated |WORD|</span><br><span class="line"></span><br><span class="line">* 按 sentence 移动光标</span><br><span class="line">  - N )   向 forward 移动 N 个 sentence</span><br><span class="line">  - N (   向 backward 移动 N 个 sentence</span><br><span class="line"></span><br><span class="line">* 按 paragraph 移动光标</span><br><span class="line">  - N &#125;   向 forward 移动 N 个 paragraph</span><br><span class="line">  - N &#123;   向 backward 移动 N 个 paragraph</span><br><span class="line"></span><br><span class="line">* 按 section 移动光标</span><br><span class="line">  - N ]]    N sections forward, at start of section</span><br><span class="line">  - N [[    N sections backward, at start of section</span><br><span class="line">  - N ][    N sections forward, at end of section</span><br><span class="line">  - N []    N sections backward, at end of section</span><br><span class="line"></span><br><span class="line">* 按 java method 移动光标</span><br><span class="line">  - N [m    N times back to start of method (for Java)</span><br><span class="line">  - N [M    N times back to end of method (for Java)</span><br><span class="line">  - N ]m    N times forward to start of method (for Java)</span><br><span class="line">  - N ]M    N times forward to end of method (for Java)</span><br><span class="line"></span><br><span class="line">* 按 C 条件移动光标</span><br><span class="line">  - N [#    N times back to unclosed &quot;#if&quot; or &quot;#else&quot;</span><br><span class="line">  - N ]#    N times forward to unclosed &quot;#else&quot; or &quot;#endif&quot;</span><br><span class="line"></span><br><span class="line">* 按 C 注释移动光标</span><br><span class="line">  - N [*    N times back to start of comment &quot;/*&quot;</span><br><span class="line">  - N ]*    N times forward to end of comment &quot;*/&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：vim-各种模式中的操作"><a href="#知识点：vim-各种模式中的操作" class="headerlink" title="知识点：vim 各种模式中的操作"></a>知识点：vim 各种模式中的操作</h3><ol>
<li><strong>Insert Mode 操作</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">* 进入 Insert Mode</span><br><span class="line">  - N i    从当前光标之前位置开始插入，也可以使用 &lt;Insert&gt;</span><br><span class="line">  - N a    从当前光标之后位置开始插入</span><br><span class="line">  - N I    从当前行的 first non-blank 之前位置开始插入</span><br><span class="line">  - N A    从当前行的末尾位置开始插入</span><br><span class="line">  - N gI   从当前行的第 N 列开始插入</span><br><span class="line">  - N O    在当前行的之前添加一个新的空行，在此开始插入</span><br><span class="line">  - N o    在当前行的之后添加一个新的空行，在此开始插入</span><br><span class="line"></span><br><span class="line">* 缩进 indent</span><br><span class="line">  - CTRL+T    当前行添加一个 shiftwith 的缩进</span><br><span class="line">  - CTRL+D    当前行减少一个 shiftwith 的缩进</span><br><span class="line"></span><br><span class="line">* 滚动</span><br><span class="line">  - Ctrl-X_Ctrl-E   向上滚动</span><br><span class="line">  - Ctrl-X_Ctrl-Y   向下滚动</span><br><span class="line"></span><br><span class="line">* Special inserts</span><br><span class="line">  - :r [file]       insert the contents of [file] below the cursor</span><br><span class="line">  - :r! &#123;command&#125;   insert the standard output of &#123;command&#125; below the cursor</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>Visual Mode 操作</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 进入 Visual Mode</span><br><span class="line">  - v       进入 Visual Mode，或在 Visual Mode 中切换到 Visual Mode，或退出 Visual Mode</span><br><span class="line">  - V       进入 Visual LineWise Mode，或在 Visual Mode 中切换到 Visual LineWise Mode，或退出 Visual LineWise Mode</span><br><span class="line">  - Ctrl+v  进入 Visual Block Mode，或在 Visual Mode 中切换到 Visual Block Mode，或退出 Visual Block Mode</span><br><span class="line"></span><br><span class="line">* Visual Block Mode 操作</span><br><span class="line">  - I、A    进入 Insert Mode 进行编辑，在按下 &lt;Esc&gt; 退出 Insert Mode 后，对所有选择的行执行在 Insert Mode 中的编辑操作</span><br><span class="line"></span><br><span class="line">* gv</span><br><span class="line">  - 重新选择上一次选择的内容</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>command-line Mode 操作</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">* Ctrl+C、&lt;ESC&gt;</span><br><span class="line">  - 退出 command-line 的编辑</span><br><span class="line"></span><br><span class="line">* &quot;</span><br><span class="line">  - 行首一个双引号，表示行注释</span><br><span class="line"></span><br><span class="line">* :command&lt;tab&gt;</span><br><span class="line">  - 尝试对 command 进行补全</span><br><span class="line"></span><br><span class="line">* :commandCtrl+D</span><br><span class="line">  - 显示所有的补全候选项</span><br><span class="line"></span><br><span class="line">* :command&lt;tab&gt;&lt;tab&gt;</span><br><span class="line">* :command&lt;tab&gt;Ctrl+P</span><br><span class="line">* :command&lt;tab&gt;Ctrl+N</span><br><span class="line">  - 切换补全候选项</span><br><span class="line"></span><br><span class="line">* :history</span><br><span class="line">  - 显示命令历史</span><br><span class="line"></span><br><span class="line">* :&lt;Up&gt;/&lt;Down&gt;</span><br><span class="line">  - 使用历史命令</span><br><span class="line"></span><br><span class="line">* Ctrl+U</span><br><span class="line">  - 删除所有光标前的字符</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：vim-查找替换操作"><a href="#知识点：vim-查找替换操作" class="headerlink" title="知识点：vim 查找替换操作"></a>知识点：vim 查找替换操作</h3><ol>
<li><strong>查找</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">* 基础查找命令</span><br><span class="line">  - N /&#123;Pattern&#125;[/[Offset]]&lt;CR&gt;    向 forward 方向搜索 Pattern 的第 N 次出现</span><br><span class="line">  - N ?&#123;Pattern&#125;[?[Offset]]&lt;CR&gt;    向 backward 方向搜索 Pattern 的第 N 次出现</span><br><span class="line"></span><br><span class="line">* 重复查找动作</span><br><span class="line">  - N n       重复上一个查找动作</span><br><span class="line">  - N N       反方向重复上一个查找动作</span><br><span class="line">  - N /&lt;CR&gt;   按照 forward 方向重复上一个查找动作</span><br><span class="line">  - N ?&lt;CR&gt;   按照 backward 方向重复上一个查找动作</span><br><span class="line"></span><br><span class="line">* 直接查找</span><br><span class="line">  - N *     直接向 forward 方向查找当前光标下的 identifier/word，相当于执行 /\&lt;keyword\&gt;</span><br><span class="line">  - N #     直接向 backward 方向查找当前光标下的 identifier/word，相当于执行 ?\&lt;keyword\&gt;</span><br><span class="line">  - N g*    like &quot;*&quot;, but also find partial matches，相当于在搜索时不加 &#x27;\&lt;&#x27; 和 &#x27;\&gt;&#x27;</span><br><span class="line">  - N g#    like &quot;#&quot;, but also find partial matches，相当于在搜索时不加 &#x27;\&lt;&#x27; 和 &#x27;\&gt;&#x27;</span><br><span class="line"></span><br><span class="line">* 关闭高亮</span><br><span class="line">  - :nohl[search]    关闭搜索的高亮显示</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>替换</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 替换操作格式</span><br><span class="line">  :[range]s[ubstitute]/Pattern/string/[g][c]</span><br><span class="line"></span><br><span class="line">* 格式说明</span><br><span class="line">  - range           指定替换的范围</span><br><span class="line">  - s[ubstitute]    替换操作的标志</span><br><span class="line">  - Pattern         搜索的内容</span><br><span class="line">  - string          替换的内容</span><br><span class="line">  - g               旗标，表示对所有的 Pattern 的匹配向都进行替换，省略则表示只对第一个匹配项进行替换</span><br><span class="line">  - c               旗标，表示每次实际进行替换前，都要求用户进行确认</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>Pattern</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">* 基本元素</span><br><span class="line">  - .         matches any single character</span><br><span class="line">  - ^         matches start of line</span><br><span class="line">  - $         matches &lt;EOL&gt;</span><br><span class="line">  - [a-z]     matches a single char from the range</span><br><span class="line">  - [^a-z]    matches a single char not in the range</span><br><span class="line"></span><br><span class="line">* 重复次数</span><br><span class="line">  - *         matches 0 or more of the preceding atom</span><br><span class="line">  - \+        matches 1 or more of the preceding atom</span><br><span class="line">  - \=        matches 0 or 1 of the preceding atom</span><br><span class="line">  - \&#123;2,5&#125;    matches 2 to 5 of the preceding atom</span><br><span class="line"></span><br><span class="line">* 其他</span><br><span class="line">  - \|        separates two alternatives</span><br><span class="line">  - \(\)      group a Pattern into an atom</span><br><span class="line"></span><br><span class="line">* 转义快捷键</span><br><span class="line">  - \&lt;      matches start of word</span><br><span class="line">  - \&gt;      matches end of word</span><br><span class="line">  - \i      matches an identifier char</span><br><span class="line">  - \I      idem but excluding digits</span><br><span class="line">  - \k      matches a keyword character</span><br><span class="line">  - \K      idem but excluding digits</span><br><span class="line">  - \f      matches a file name character</span><br><span class="line">  - \F      idem but excluding digits</span><br><span class="line">  - \p      matches a printable character</span><br><span class="line">  - \P      idem but excluding digits</span><br><span class="line">  - \s      matches a white space character</span><br><span class="line">  - \S      matches a non-white space character</span><br><span class="line"></span><br><span class="line">* 特殊字符</span><br><span class="line">  - \e      matches &lt;Esc&gt;</span><br><span class="line">  - \t      matches &lt;Tab&gt;</span><br><span class="line">  - \r      matches &lt;CR&gt;</span><br><span class="line">  - \b      matches &lt;BS&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>Offset</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 用于指导到搜索匹配成功时，光标应该位于何处</span><br><span class="line"></span><br><span class="line">  [num]       [num] lines downwards, in column 1</span><br><span class="line">  +[num]      [num] lines downwards, in column 1</span><br><span class="line">  -[num]      [num] lines upwards, in column 1</span><br><span class="line">  e[+num]     [num] characters to the right of the end of the match</span><br><span class="line">  e[-num]     [num] characters to the left of the end of the match</span><br><span class="line">  s[+num]     [num] characters to the right of the start of the match</span><br><span class="line">  s[-num]     [num] characters to the left of the start of the match</span><br><span class="line">  b[+num]     [num] identical to s[+num] above (mnemonic: begin)</span><br><span class="line">  b[-num]     [num] identical to s[-num] above (mnemonic: begin)</span><br><span class="line">  ;&#123;search-command&#125;   execute &#123;search-command&#125; next</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="2-6-Bash"><a href="#2-6-Bash" class="headerlink" title="2.6 Bash"></a>2.6 Bash</h2><hr>
<h3 id="知识点：bash-指令"><a href="#知识点：bash-指令" class="headerlink" title="知识点：bash 指令"></a>知识点：bash 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  bash [OPTIONS] [COMMAND_STRING | FILE]</span><br><span class="line"></span><br><span class="line">* 程序文件</span><br><span class="line">  /bin/bash</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 除了此处的选项外，bash 指令支持所有的 set 选项</span><br><span class="line"></span><br><span class="line">* -c &#x27;command_string&#x27;</span><br><span class="line">  - 执行 command_string 所代表的指令</span><br><span class="line">  - 如果 command_string 之后仍有参数，则从 $0 开始将参数值传递给位置参数</span><br><span class="line"></span><br><span class="line">* -i</span><br><span class="line">  - 以交互式方式 interactive 启动 bash</span><br><span class="line"></span><br><span class="line">* -l</span><br><span class="line">  - 以 login shell 方式启动 bash</span><br><span class="line"></span><br><span class="line">* -x</span><br><span class="line">  - 在执行命令前输出命令和参数</span><br><span class="line"></span><br><span class="line">* --</span><br><span class="line">  - 结束对 option 的处理</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>配置文件</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* /etc/profile</span><br><span class="line">  - systemwide per-interactive-shell startup file</span><br><span class="line"></span><br><span class="line">* ~/.bash_profile、~/.bash_login、~/.profile</span><br><span class="line">  - ~/.bash_profile     personal initialization file</span><br><span class="line"></span><br><span class="line">* /etc/bash.bashrc</span><br><span class="line"></span><br><span class="line">* ~/.bashrc</span><br><span class="line">  - individual per-interactive-shell startup file</span><br><span class="line"></span><br><span class="line">* /etc/bash.bash.logout</span><br><span class="line">  - systemwide login shell cleanup file</span><br><span class="line"></span><br><span class="line">* ~/.bash_logout</span><br><span class="line">  - individual login shell cleanup file</span><br><span class="line"></span><br><span class="line">* ~/.inputrc</span><br><span class="line">  - individual readline initialization file</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> bashrc 范例</span></span><br><span class="line"></span><br><span class="line">alias ll=&#x27;ls -lhF&#x27;</span><br><span class="line"></span><br><span class="line">export http_proxy=http://192.168.174.1:4780</span><br><span class="line">export https_proxy=http://192.168.174.1:4780</span><br><span class="line">export socks_proxy=http://192.168.174.1:4780</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> yum -y install epel-release.noarch</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> yum -y install vim bash-completion mlocate wget unzip redhat-lsb man-pages info zip rlwrap chrony \</span></span><br><span class="line"><span class="bash"><span class="comment"># net-tools nmap netcat ntp tree lrzsz yum-utils unzip python3 \</span></span></span><br><span class="line"><span class="bash"><span class="comment"># gcc gcc-c++</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>提示字符</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">* Promiting 变量</span><br><span class="line">  - Promiting 变量的内容，支持各种扩展如变量扩展、命令替换、算术扩展、引用移除等</span><br><span class="line">  - PS1，primary prompt</span><br><span class="line">  - PS2，secondary prompt</span><br><span class="line">  - PS3，select</span><br><span class="line">  - PS4，xtrace，多层级时重复显示</span><br><span class="line">  - PS0，在读取命令后，执行命令前显示</span><br><span class="line"></span><br><span class="line">* Promiting 变量格式</span><br><span class="line">  \d            日期，格式为 &quot;Weekday Month Date&quot;</span><br><span class="line">  \D&#123;format&#125;    时间，format 遵循 strftime 标准</span><br><span class="line">  \t    当前时间，格式为 24-hour HH:MM:SS</span><br><span class="line">  \T    当前时间，格式为 12-hour HH:MM:SS</span><br><span class="line">  \@    当前时间，格式为 12-hour am/pm</span><br><span class="line">  \A    当前时间，格式为 24-hour HH:MM</span><br><span class="line">  \u    当前用户</span><br><span class="line">  \h    hostname up to the first &#x27;.&#x27;</span><br><span class="line">  \H    hostname</span><br><span class="line">  \n    newline</span><br><span class="line">  \w    current working directory</span><br><span class="line">  \W    current working directory basename</span><br><span class="line">  \$    用户提示符，root 用户为一个 &#x27;#&#x27;，普通用户为一个 &#x27;$&#x27;</span><br><span class="line"></span><br><span class="line">* Promiting 变量其他格式</span><br><span class="line">  \a    an ASCII bell character (07)</span><br><span class="line">  \e    an ASCII escape character (033)</span><br><span class="line">  \j    the number of jobs currently managed by the shell</span><br><span class="line">  \l    the basename of the shell&#x27;s terminal device name</span><br><span class="line">  \r    carriage return</span><br><span class="line">  \s    the name of the shell, the basename of $0 (the portion following the final slash)</span><br><span class="line">  \v    the version of bash (e.g., 2.00)</span><br><span class="line">  \V    the release of bash, version + patch level (e.g., 2.00.0)</span><br><span class="line">  \!    the history number of this command</span><br><span class="line">  \#    the command number of this command</span><br><span class="line">  \nnn  the character corresponding to the octal number nnn</span><br><span class="line">  \\    a backslash</span><br><span class="line">  \[    begin a sequence of non-printing characters, which could be used to embed a terminal control sequence into the prompt</span><br><span class="line">  \]    end a sequence of non-printing characters</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：bash-命令执行和执行环境"><a href="#知识点：bash-命令执行和执行环境" class="headerlink" title="知识点：bash 命令执行和执行环境"></a>知识点：bash 命令执行和执行环境</h3><ol>
<li><strong>命令解析</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 命令解析的过程（存疑，待重新整理）</span><br><span class="line">  - 分词 split word</span><br><span class="line">  - 别名扩展</span><br><span class="line">  - 各种 bash 扩展</span><br><span class="line">  - 变量赋值</span><br><span class="line">  - 搜索命令</span><br><span class="line"></span><br><span class="line">* 如果 command 中不包含 &#x27;/&#x27;</span><br><span class="line">  - 检查 command 是否是一个 function</span><br><span class="line">  - 检查 command 是否是一个 BashBuiltin</span><br><span class="line">  - 在 PATH 中搜索 command</span><br><span class="line"></span><br><span class="line">* 如果 command 中包含 &#x27;/&#x27;</span><br><span class="line">  - 直接执行 command 文件</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>bash 执行环境 execution environment</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - source 脚本、function、BashBuiltin 是在 current shell 环境运行</span><br><span class="line">  - shell 脚本、其他 command 是在一个单独创建的 bash 子进程环境中运行，不会影响到 current shell 的环境</span><br><span class="line"></span><br><span class="line">* shell 的执行环境</span><br><span class="line">  - open files</span><br><span class="line">  - current working directory</span><br><span class="line">  - umask</span><br><span class="line">  - current traps</span><br><span class="line">  - shell parameters</span><br><span class="line">  - shell functions</span><br><span class="line">  - set options</span><br><span class="line">  - shopt options</span><br><span class="line">  - alias</span><br><span class="line"></span><br><span class="line">* 可以继承的环境</span><br><span class="line">  - open files</span><br><span class="line">  - current working directory</span><br><span class="line">  - umask</span><br><span class="line">  - 环境变量</span><br><span class="line">  - 环境函数</span><br><span class="line">  - traps</span><br><span class="line"></span><br><span class="line">* subshell</span><br><span class="line">  - subshell 是对 current shell 的 fork</span><br><span class="line">  - subshell 的环境与 current shell 完全相同，但对 subshell 环境的修改不会影响到 current shell</span><br><span class="line">  - 在 subshell 中执行的内容</span><br><span class="line">    - 命令替换 Command substitution</span><br><span class="line">    - ( command-list )</span><br><span class="line">    - 管道中的 BashBuiltin</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>命令的退出状态 exit status</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 退出状态，是指命令执行结束后返回给调用者的值</span><br><span class="line">  - 由 waitpid system call 或 equivalent function 返回</span><br><span class="line">  - 退出状态的取值范围在 0-255</span><br><span class="line">  - 0 通常表示执行成功</span><br><span class="line">  - 非 0 的退出状态表示执行失败</span><br><span class="line"></span><br><span class="line">* 一些特殊的退出状态</span><br><span class="line">  - 126，表示命令找到但不是可执行程序</span><br><span class="line">  - 127，表示命令未找到</span><br><span class="line">  - 128+N，表示命令是被 SIGNAL N 所结束</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：bash-命令扩展"><a href="#知识点：bash-命令扩展" class="headerlink" title="知识点：bash 命令扩展"></a>知识点：bash 命令扩展</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* 扩展 Expansion</span><br><span class="line">  - 扩展，是在分词 split into words 之后进行，在引用移除之前进行</span><br><span class="line">  - bash 实行七种扩展</span><br><span class="line">    - 大括号扩展 brace expansion</span><br><span class="line">    - 波浪线扩展 tilde expansion</span><br><span class="line">    - 变量扩展 parameter and variable expansion</span><br><span class="line">    - 命令替换 command substitution</span><br><span class="line">    - 算术扩展 arithmetic expansion</span><br><span class="line">    - 分词 word splitting</span><br><span class="line">    - 路径名扩展 pathname expansion</span><br><span class="line">  - 对于部分支持的系统，还额外支持以下扩展</span><br><span class="line">    - 进程替换 process substitution</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>大括号扩展 brace expansion</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 大括号扩展，可以将一个 word 扩展为多个 word</span><br><span class="line">  - 大括号扩展支持嵌套</span><br><span class="line">  - 大括号扩展是第一个进行的扩展</span><br><span class="line"></span><br><span class="line">* 逗号格式：a&#123;x,y,z&#125;b</span><br><span class="line"></span><br><span class="line">* 句点格式：&#123;x..y[..INCR]&#125;</span><br><span class="line">  - x、y 可以是单字符</span><br><span class="line">    - bash 会按照字典序来生成 word</span><br><span class="line">  - x、y 可以是整数</span><br><span class="line">  - x、y 可以是带前缀 0 的整数</span><br><span class="line">    - bash 会对生成的 word 填充 0，以保证生成的每个 word 都具有相同的长度</span><br><span class="line">    - x、y 只要有一个带前缀 0 即可</span><br><span class="line">  - INCR 可以指定步长</span><br><span class="line">    - 对于单字符的情况，用来指定字典序中的步长</span><br><span class="line">    - 支持负值</span><br><span class="line"></span><br><span class="line">* 嵌套格式：x&#123;a,b,c&#123;1..5&#125;&#125;y</span><br><span class="line"></span><br><span class="line">* 注意</span><br><span class="line">  - sh 并不支持大括号扩展，在脚本的兼容性中需要注意</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>波浪线扩展 tilde expansion</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* &#x27;~&#x27;</span><br><span class="line">  - 扩展为变量 HOME 的值，即当前用户的家目录</span><br><span class="line"></span><br><span class="line">* &#x27;~+&#x27;</span><br><span class="line">  - 扩展为变量 PWD 的值</span><br><span class="line"></span><br><span class="line">* &#x27;~-&#x27;</span><br><span class="line">  - 扩展为变量 OLDPWD 的值</span><br><span class="line"></span><br><span class="line">* &#x27;~user&#x27;</span><br><span class="line">  - 扩展为 user 用户的家目录</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>命令替换 Command Substitution</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  $(command)</span><br><span class="line">  `command`</span><br><span class="line"></span><br><span class="line">* 介绍</span><br><span class="line">  - $(command) 格式支持嵌套</span><br><span class="line">  - `command` 格式进行嵌套需要对内部的 &#x27;`&#x27; 加 &#x27;\&#x27;</span><br><span class="line">  - bash 会在 subshell 中执行 command，并将其 stdout 去除结尾的 newline 后，作为替换的结果</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>算术扩展 Arithmetic Expansion</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  $((expression))</span><br><span class="line"></span><br><span class="line">* 介绍</span><br><span class="line">  - 算术扩展发生在变量扩展、命令替换、引用移除之后，expression 中的元素，采用经过了变量扩展、命令替换、引用移除之后的值</span><br><span class="line">  - 算术扩展支持进行嵌套</span><br><span class="line"></span><br><span class="line">* 旧格式</span><br><span class="line">  - 不建议继续使用，未来版本可能会移除</span><br><span class="line">  - $[expression]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：bash-重定向"><a href="#知识点：bash-重定向" class="headerlink" title="知识点：bash 重定向"></a>知识点：bash 重定向</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* 重定向 Redirection</span><br><span class="line">  - 所谓重定向，是指以某一种模式 (read/write)，将某个文件 file 打开到某个文件描述符上</span><br><span class="line">  - 通过重定向，可以更改进程的相应的文件操作的目标文件，如 input 文件，output 文件等</span><br><span class="line">  - 重定向可以对文件描述符进行诸如复制 duplicated、打开 opened、关闭 closed、更换目标文件等操作</span><br><span class="line"></span><br><span class="line">* stdin、stdout、stderr</span><br><span class="line">  - 程序永远在 stdin(0) 上 read input</span><br><span class="line">  - 程序永远在 stdout(1) 上 write output</span><br><span class="line">  - 程序永远在 stderr(2) 上 write error</span><br><span class="line">  - 通过对 0、1、2 进行重定向，可以修改程序 read input、write output、write error 的目标</span><br><span class="line"></span><br><span class="line">* 重定向操作符的解析过程</span><br><span class="line">  - 重定向操作符可以指定多个，按照从左到右的位置进行处理</span><br><span class="line">  - ls &gt; dirlist 2&gt;&amp;1</span><br><span class="line">    - 初始状态，stdout 指向 terminal，stderr 指向 terminal</span><br><span class="line">    - 解析第一个重定向 &#x27;&gt; dirlist&#x27;，stdout 指向 dirlist</span><br><span class="line">    - 解析第二个重行行 &#x27;2&gt;&amp;1&#x27;，stderr 指向 stdout 所指向的位置，因为 stdout 已经被指向到 dirlist，因此 stderr 也指向到 dirlist</span><br><span class="line">    - 最终状态，stdout 指向 dirlist，stderr 指向 dirlist</span><br><span class="line">  - ls 2&gt;&amp;1 &gt; dirlist</span><br><span class="line">    - 初始状态，stdout 指向 terminal，stderr 指向 terminal</span><br><span class="line">    - 解析第一个重定向 &#x27;2&gt;&amp;1&#x27;，stderr 指向 stdout 所指向的位置，因为 stdout 当前指向到 terminal，因此 stderr 仍然指向 terminal</span><br><span class="line">    - 解析第二个重定向 &#x27;&gt; dirlist&#x27;，stdout 指向 dirlist</span><br><span class="line">    - 最终状态，stdout 指向 dirlist，stderr 指向 terminal</span><br><span class="line"></span><br><span class="line">* 其他</span><br><span class="line">  - 使用 &#x27;exec&#x27; 指令，可以对 current shell 进行重定向的操作</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>针对文件的重定向操作符</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">* 关于 word</span><br><span class="line">  - 在实际执行重定向之前，会对 word 进行扩展</span><br><span class="line">  - 扩展后的结果应当表示一个文件 file</span><br><span class="line">  - 扩展后的结果不可以超过一个 word</span><br><span class="line"></span><br><span class="line">* N&lt;word</span><br><span class="line">  - 重定向输入 Redirecting Input</span><br><span class="line">  - 将 word 所代表的文件，以 read 模式，打开到文件描述符 n 上</span><br><span class="line">  - 省略 n，则表示打开到 0 上，即 stdin</span><br><span class="line"></span><br><span class="line">* N&gt;word</span><br><span class="line">  - 重定向输出 Redirecting Output</span><br><span class="line">  - 将 word 所代表的文件，以 write/create 模式，打开到文件描述符 n 上</span><br><span class="line">  - 省略 n，则表示打开到 1 上，即 stdout</span><br><span class="line"></span><br><span class="line">* N&gt;&gt;word</span><br><span class="line">  - 追加重定向输出 Appending Redirected Output</span><br><span class="line">  - 将 word 所代表的文件，以 append write/create 模式，打开到文件描述符 n 上</span><br><span class="line">  - 省略 n，则表示打开到 1 上，即 stdout</span><br><span class="line"></span><br><span class="line">* &amp;&gt;word</span><br><span class="line">  - 合并重定向输出和错误 Redirecting Standard Output and Standard Error</span><br><span class="line">  - 同时将 word 所代表的文件，以 write/create 模式，打开到文件描述符 1 和 2 上，即 stdout 和 stderr</span><br><span class="line">  - 也支持另一种格式 &#x27;&gt;&amp;word&#x27;，但不推荐</span><br><span class="line">  - 相当于 1&gt;word 2&gt;&amp;1 或 2&gt;word 1&gt;&amp;2</span><br><span class="line"></span><br><span class="line">* &amp;&gt;&gt;word</span><br><span class="line">  - 合并追加重定向输出和错误 Appending Standard Output and Standard Error</span><br><span class="line">  - 同时将 word 所代表的文件，以 append write/create 模式，打开到文件描述符 1 和 2 上，即 stdout 和 stderr</span><br><span class="line">  - 相当于 1&gt;&gt;word 2&gt;&amp;1 或 2&gt;&gt;word 1&gt;&amp;2</span><br><span class="line"></span><br><span class="line">* N&lt;&gt;word</span><br><span class="line">  - Opening File Descriptors for Reading and Writing</span><br><span class="line">  - 0 if n is not specified.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>针对 fd 的重定向操作符</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* 复制文件描述符 Duplicating File Descriptors</span><br><span class="line">  - 格式：N&lt;&amp;digit、N&lt;&lt;&amp;digit，复制输入文件描述符，N 默认为 0</span><br><span class="line">  - 格式：N&gt;&amp;digit、N&gt;&gt;&amp;digit，复制输出文件描述符，N 默认为 1</span><br><span class="line">  - 重复在文件描述符 n 上以相应的模式打开文件描述符 digit 所代表的文件</span><br><span class="line">  - 例如：2&gt;&gt;&amp;1</span><br><span class="line"></span><br><span class="line">* 关闭文件描述符</span><br><span class="line">  - 格式：N&lt;&amp;-</span><br><span class="line">  - 格式：N&gt;&amp;-</span><br><span class="line"></span><br><span class="line">* 移动文件描述符 Moving File Descriptors</span><br><span class="line">  - 格式：[N]&lt;&amp;digit-</span><br><span class="line">  - 格式：[N]&gt;&amp;digit-</span><br><span class="line">  - 将文件描述符 digit 所代表的文件，移动到文件描述符 N 上</span><br><span class="line">  - &#x27;&lt;&#x27; 默认 n 为 0，&#x27;&gt;&#x27; 默认 n 为 1</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 重定向所使用的特殊文件</span><br><span class="line">  - /dev/fd/FD    If fd is a valid integer, file descriptor fd is duplicated.</span><br><span class="line">  - /dev/stdin    File descriptor 0 is duplicated.</span><br><span class="line">  - /dev/stdout   File descriptor 1 is duplicated.</span><br><span class="line">  - /dev/stderr   File descriptor 2 is duplicated.</span><br><span class="line">  - /dev/tcp/host/port    If host is a valid hostname or Internet address, and port is an integer port number or service name, bash attempts to open the corresponding TCP socket.</span><br><span class="line">  - /dev/udp/host/port    If host is a valid hostname or Internet address, and port is an integer port number or service name, bash attempts to open the corresponding UDP socket.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：bash-重定向用法之嵌入文档-Here-Document"><a href="#知识点：bash-重定向用法之嵌入文档-Here-Document" class="headerlink" title="知识点：bash 重定向用法之嵌入文档 Here Document"></a>知识点：bash 重定向用法之嵌入文档 Here Document</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 指导 shell 从 current source 中读取多行输入 here-document，用作 command 的 stdin</span><br><span class="line">  - 如果一行中只包含 delimiter，不包含其他如 blank，则表示 here-document 的结束</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  &lt;&lt;WORD</span><br><span class="line">    here-document</span><br><span class="line">  delimiter</span><br><span class="line"></span><br><span class="line">* WORD</span><br><span class="line">  - 用于指定 delimiter</span><br><span class="line">  - 不会对 WORD 进行变量扩展、命令替换、算术扩展、路径名扩展，但会进行引用移除</span><br><span class="line">  - 如果 WORD 未加引用</span><br><span class="line">    - here-document 的内容会先经过解析后再作为 command 的 stdin</span><br><span class="line">    - 包括，变量扩展、命令替换、算术扩展</span><br><span class="line">    - \&lt;newline&gt; 会被忽略</span><br><span class="line">    - \\、\$、\&#x27; 用来转义相应的字符</span><br><span class="line">  - 如果 WORD 的任意部分加了引用</span><br><span class="line">    - here-document 的内容不会进行解释，直接作为 command 的 stdin</span><br><span class="line"></span><br><span class="line">* &#x27;&lt;&lt;-WORD&#x27; 格式</span><br><span class="line">  - 会将 here-document 以及 delimiter 行的 leading tab characters 移除</span><br><span class="line">  - 用在脚本中，可以进行缩进，增强脚本的可读性</span><br><span class="line">  - 其他与 &#x27;&lt;&lt;WORD&#x27; 格式相同</span><br><span class="line"></span><br><span class="line">* Here Strings</span><br><span class="line">  - 格式：&lt;&lt;&lt;WORD</span><br><span class="line">  - Here Documents 的一种变体，只将一个 word 作为 command 的 stdin</span><br><span class="line">  - word 会进行 tilde expansion, parameter and variable expansion, command substitution, arithmetic expansion, and quote removal</span><br><span class="line">  - word 不会进行 Pathname expansion、word splitting</span><br><span class="line">  - word 解析后的结果应该是 a single string</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在使用 cat 时，依然支持 <span class="string">&#x27;&gt;&#x27;</span> 和 <span class="string">&#x27;&gt;&gt;&#x27;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="string">&#x27;&gt;&#x27;</span> 表示替换，<span class="string">&#x27;&gt;&gt;&#x27;</span> 表示追加</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 追加 prometheus 的采集任务</span></span><br><span class="line">cat &gt;&gt; prometheus/prometheus.yml &lt;&lt; &quot;EOF&quot;</span><br><span class="line">  - job_name: &#x27;nginx_exporter&#x27;</span><br><span class="line">    static_configs:</span><br><span class="line">    - targets: [&#x27;192.168.11.62:9113&#x27;]</span><br><span class="line">      labels:</span><br><span class="line">        instance: test服务器</span><br><span class="line">EOF</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：shell-语法介绍"><a href="#知识点：shell-语法介绍" class="headerlink" title="知识点：shell 语法介绍"></a>知识点：shell 语法介绍</h3><ol>
<li><strong>命令结束符 delimiter</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* ;</span><br><span class="line">* newline</span><br><span class="line">  - 执行命令</span><br><span class="line"></span><br><span class="line">* &amp;</span><br><span class="line">  - 后台执行命令</span><br><span class="line"></span><br><span class="line">* &amp;&amp;</span><br><span class="line">  - 命令列表 AND</span><br><span class="line"></span><br><span class="line">* ||</span><br><span class="line">  - 命令列表 OR</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>注释 comment</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* 使用 &#x27;#&#x27; 进行行注释</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>引用 quoting</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 引用，用来移除特殊字符、关键字的特殊功能</span><br><span class="line">  - bash 提供三种引用格式，转义字符 escape character，单引号 single quotes，双引号 double quotes</span><br><span class="line"></span><br><span class="line">* 单引号</span><br><span class="line">  - 对所有字符，去除其特殊功能，将其视为普通字符</span><br><span class="line">  - 单引号不允许包裹单引号，即使前面加了 &#x27;\&#x27;</span><br><span class="line"></span><br><span class="line">* 双引号</span><br><span class="line">  - 对除 &quot;$&quot;、&quot;&#x27;&quot;、&quot;\&quot;、&quot;!&quot;、&quot;*&quot;、&quot;@&quot; 以外的所有字符，去除其特殊功能，将其视为普通字符</span><br><span class="line">  - 对于 &quot;\&quot;，仅在其位于 &quot;$&quot;、&quot;&#x27;&quot;、&#x27;&quot;&#x27;、&quot;\&quot;、&lt;newline&gt; 之前时，具有转义的功能</span><br><span class="line"></span><br><span class="line">* $&#x27;string&#x27; 用法</span><br><span class="line">  - 会对 string 进行扩展，其中的 backslash-escaped characters 会按照 ANSI C 标准进行替换，如 $&#x27;a\tb&#x27;</span><br><span class="line"></span><br><span class="line">* backslash-escaped characters</span><br><span class="line">  \a      alert (bell)</span><br><span class="line">  \b      backspace</span><br><span class="line">  \e \E   an escape character</span><br><span class="line">  \f      form feed</span><br><span class="line">  \n      new line</span><br><span class="line">  \r      carriage return</span><br><span class="line">  \t      horizontal tab</span><br><span class="line">  \v      vertical tab</span><br><span class="line">  \\      backslash</span><br><span class="line">  \&#x27;      single quote</span><br><span class="line">  \&quot;      double quote</span><br><span class="line">  \?      question mark</span><br><span class="line">  \nnn    the eight-bit character whose value is the octal value nnn (one to three octal digits)</span><br><span class="line">  \xHH    the eight-bit character whose value is the hexadecimal value HH (one or two hex digits)</span><br><span class="line">  \uHHHH        the Unicode (ISO/IEC 10646) character whose value is the hexadecimal value HHHH (one to four hex digits)</span><br><span class="line">  \UHHHHHHHH    the Unicode (ISO/IEC 10646) character whose value is the hexadecimal value HHHHHHHH (one to eight hex digits)</span><br><span class="line">  \cx  a control-x character</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：shell-命令"><a href="#知识点：shell-命令" class="headerlink" title="知识点：shell 命令"></a>知识点：shell 命令</h3><ol>
<li><strong>简单命令 Simple Commands</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  [NAME=VALUE ...] COMMAND [ARGUMENTS] [REDIRECTIONS] [CONTROL OPERATOR]</span><br><span class="line"></span><br><span class="line">* 介绍</span><br><span class="line">  - COMMAND 会被传递给 argument zero</span><br><span class="line">  - ARGUMENTS 会作为 COMMAND 的参数</span><br><span class="line">  - 简单命令的返回值，是 COMMAND 的退出状态</span><br><span class="line"></span><br><span class="line">* NAME=VALUE</span><br><span class="line">  - 简单命令中的变量赋值，会添加到 COMMAND 的执行环境的一部分，不会影响到 current shell environment</span><br><span class="line">  - 如果 COMMAND 未找到，则 NAME=VALUE 会值为对 current shell environment 的修改</span><br><span class="line"></span><br><span class="line">* 简单命令的解析过程</span><br><span class="line">  - bash 在执行简单命令时，会先进行如下的解析过程，解析顺序为从左到右</span><br><span class="line">    1. 对于变量赋值、重定向，在解析器中暂时保存，以用作之后的处理</span><br><span class="line">    2. 对剩余的部分进行扩展</span><br><span class="line">    3. 将扩展后的部分中，第一个 word 视为 command，其余的 word 视为 arguments</span><br><span class="line">    4. 执行重定向</span><br><span class="line">    5. 对变量赋值部分，先进行各种扩展，包括波浪线扩展、变量扩展、命令替换、算术扩展、引用移除，然后执行变量赋值操作</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>管道 Pipelines</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 管道，是由控制字符 &#x27;|&#x27; 或 &#x27;|&amp;&#x27; 分隔的多个 COMMAND</span><br><span class="line">  - 管道的返回值，是最后一个执行的 COMMAND 的退出状态</span><br><span class="line">  - 管道中的命令，都是以独立的进程进行运行的</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  [time [-p]] [ ! ] COMMAND1 [ [|⎪|&amp;] COMMAND2 ... ]</span><br><span class="line"></span><br><span class="line">* 格式说明</span><br><span class="line">  - 控制字符 &#x27;|&#x27;，是 COMMAND1 的 stdout 会被连接到 COMMAND2 的 stdin</span><br><span class="line">  - 控制字符 &#x27;|&amp;&#x27;，是 COMMAND1 的 stdout 加 stderr 会被连接到 COMMAND2 的 stdin，本质上是对 &#x27;2&gt;&amp;1 |&#x27; 的简化</span><br><span class="line">  - 关键字 &#x27;!&#x27;，表示管道的返回值进行取反</span><br><span class="line">  - 关键字 &#x27;time&#x27;，表示在管道结束后报告管道执行的时间，分为 real、user、sys</span><br><span class="line">  - &#x27;-p&#x27; 表示时间以 posix 格式输出</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>命令列表 Lists</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 命令列表，是指一个或多个管道，以以下字符进行间隔 ;、&amp;、&amp;&amp;、||，以以下字符终结 ;、&amp;、&lt;newline&gt;</span><br><span class="line"></span><br><span class="line">* 间隔字符</span><br><span class="line">  - COMMAND1 &amp;&amp; COMMAND2    AND 列表，只有 COMMAND1 的退出状态为 0 时，才会运行 COMMAND2，返回状态为最后一个执行的命令的退出状态</span><br><span class="line">  - COMMAND1 || COMMAND2    OR 列表，只有 COMMAND1 的退出状态为非 0 时，才会运行 COMMAND2，返回状态为最后一个执行的命令的退出状态</span><br><span class="line">  - COMMAND1 ; COMMAND2     顺序运行所有 command，不管其中某个命令的退出状态如何，返回状态为最后一个执行的命令的退出状态</span><br><span class="line"></span><br><span class="line">* 终结字符</span><br><span class="line">  - COMMAND &amp;     后台运行 command，返回状态为 0</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：shell-组合命令"><a href="#知识点：shell-组合命令" class="headerlink" title="知识点：shell 组合命令"></a>知识点：shell 组合命令</h3><ol>
<li><strong>(list)</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 在 subshell environment 中执行命令列表中的命令</span><br><span class="line">  - 返回状态为 list 的退出状态</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>{ list; }</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 在 current shell environment 中执行命令列表中的命令</span><br><span class="line">  - 也称为 group command</span><br><span class="line">  - list 与 &#x27;&#123; &#125;&#x27; 之间必须有空白进行间隔</span><br><span class="line">  - list 必须以 &lt;newline&gt; 或 &#x27;;&#x27; 结尾</span><br><span class="line">  - 返回状态为 list 的退出状态</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>((arithmetic-expression))</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 按照算术表达式的计算结果进行返回状态</span><br><span class="line">  - 如果 arithmetic-expression 的计算结果不为 0，则返回状态为 0</span><br><span class="line">  - 如果 arithmetic-expression 的计算结果为 0，则返回状态为非 0</span><br><span class="line">  - 相当于 let 命令</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>[[ conditional-expression ]]</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 条件判断</span><br><span class="line">  - 根据条件表达式的结果</span><br><span class="line">  - 条件表达式和 &#x27;[[ ]]&#x27;&#x27; 之间必须有空白间隔</span><br><span class="line"></span><br><span class="line">* 注意</span><br><span class="line">  - 条件表达式中不会进行路径名扩展，但会进行其他六种扩展</span><br><span class="line"></span><br><span class="line">* string1 == string2</span><br><span class="line">* string1 != string2</span><br><span class="line">  - 在 &#x27;[[ ]]&#x27; 的用法中，&#x27;==&#x27; 和 &#x27;!=&#x27; 实际检查字符串匹配</span><br><span class="line">  - string2 是 pattern</span><br><span class="line"></span><br><span class="line">* string =~ pattern</span><br><span class="line">  - 检查字符串的正则匹配</span><br><span class="line">  - 匹配参照 POSIX extended regular expression</span><br><span class="line">  - pattern 如果是一个变量，则表示 string 需要与 pattern 完全匹配</span><br><span class="line">  - pattern 中的任意部分如果加引用，则表示按照普通字符进行匹配，因此 pattern 不能随便加引用</span><br><span class="line">    - 例如</span><br><span class="line">      [[ &#x27;a123b&#x27; =~ &#x27;a.*b&#x27; ]]，相当于 [[ &#x27;a123b&#x27; =~ a\.\*b]]，返回 False</span><br><span class="line">      [[ &#x27;a123b&#x27; =~ a.*b ]] 返回 True</span><br><span class="line"></span><br><span class="line">* ( expression )</span><br><span class="line">  - 改变表达式的优先级</span><br><span class="line"></span><br><span class="line">* ! expression</span><br><span class="line">  - 对表达式的真值进行取反</span><br><span class="line"></span><br><span class="line">* expression1 &amp;&amp; expression2</span><br><span class="line">  - 对两个表达式进行逻辑与运算</span><br><span class="line"></span><br><span class="line">* expression1 || expression2</span><br><span class="line">  - 对两个表达式进行逻辑或运算</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>循环</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">* for 循环一</span><br><span class="line">  - 格式：for NAME [;] do LIST ; done</span><br><span class="line">  - 使用位置参数对 NAME 进行填充</span><br><span class="line">  - 退出状态为 LIST 中最后一个执行的命令的退出状态</span><br><span class="line"></span><br><span class="line">* for 循环二</span><br><span class="line">  - 格式：for NAME in WORDS [;] do LIST ; done</span><br><span class="line">  - NAME 称为控制变量 control variable</span><br><span class="line">  - WORDS</span><br><span class="line">    - 不可以是数组</span><br><span class="line">    - 经常用大括号扩展 &#123;x..y[..z]&#125;</span><br><span class="line">    - 如果为空，则不执行 LIST，退出状态为 0</span><br><span class="line">  - 退出状态为 LIST 中最后一个执行的命令的退出状态</span><br><span class="line"></span><br><span class="line">* for 循环三</span><br><span class="line">  - 格式：for (( expr1 ; expr2 ; expr3 )) ; do LIST ; done</span><br><span class="line">  - 范例：for ((  i=1  ; i&lt;=10 ;  i++  )) ; do LIST ; done</span><br><span class="line">  - 退出状态为 LIST 中最后一个执行的命令的退出状态</span><br><span class="line"></span><br><span class="line">* whild 循环</span><br><span class="line">  - 格式：while CONDITION-LIST ; do LIST; done</span><br><span class="line">  - CONDITION-LIST 返回 Ture，则执行 LIST</span><br><span class="line">  - 退出状态为 LIST 中最后一个执行的命令的退出状态</span><br><span class="line"></span><br><span class="line">* until 循环</span><br><span class="line">  - 格式：until CONDITION-LIST ; do LIST; done</span><br><span class="line">  - CONDITION-LIST 返回 False，则执行 LIST</span><br><span class="line">  - 退出状态为 LIST 中最后一个执行的命令的退出状态</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>if 条件选择</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  if CONDITION-LIST; then LIST; [ elif CONDITION-LIST; then LIST; ] [ else LIST; ] fi</span><br><span class="line"></span><br><span class="line">* 退出状态</span><br><span class="line">  - 最后一个执行的命令的退出状态</span><br><span class="line">  - 如果没有任何一个 CONDITION-LIST 测试为 True，则退出状态也是 True</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>case 条件选择</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  case WORD in [ [(] PATTERN [ | PATTERN ...] ) LIST ;; ] esac</span><br><span class="line"></span><br><span class="line">* 介绍</span><br><span class="line">  - 按照匹配法则，用 PATTERN 对 WORD 进行测试</span><br><span class="line">  - 在匹配前会先对 WORD 进行扩展</span><br><span class="line">  - 退出状态为最后一个执行的命令的退出状态，如果没有任何 Pattern 匹配成功则返回 0</span><br><span class="line"></span><br><span class="line">* 结束符 &#x27;;;&#x27;</span><br><span class="line">  - 表示如果某个 PatternList 匹配成功，则结束 case 的执行</span><br><span class="line"></span><br><span class="line">* 结束符 &#x27;;&amp;&#x27;</span><br><span class="line">  - 表示如果某个 PatternList 匹配成功，则连同下一个 PatternList 也视为其匹配成功</span><br><span class="line"></span><br><span class="line">* 结束符 &#x27;;;&amp;&#x27;</span><br><span class="line">  - 表示如果某个 PatternList 匹配成功，则继续尝试匹配下一个 PatternList</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 范例</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> foo 3 会输出三行 <span class="string">&#x27;Level Three&#x27;</span>、<span class="string">&#x27;Level Two&#x27;</span>、<span class="string">&#x27;Level One&#x27;</span></span></span><br><span class="line">foo() &#123;</span><br><span class="line">  case &quot;$1&quot; in</span><br><span class="line">    3)</span><br><span class="line">      echo &quot;Level Three&quot;</span><br><span class="line">      ;&amp;</span><br><span class="line">    2)</span><br><span class="line">      echo &quot;Level Two&quot;</span><br><span class="line">      ;&amp;</span><br><span class="line">    1)</span><br><span class="line">      echo &quot;Level One&quot;</span><br><span class="line">      ;;</span><br><span class="line">    esac &#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> foo 3 会输出三行 <span class="string">&#x27;Level Three&#x27;</span>、<span class="string">&#x27;Level Two&#x27;</span>、<span class="string">&#x27;Level One&#x27;</span></span></span><br><span class="line">foo() &#123;</span><br><span class="line">  case &quot;$1&quot; in</span><br><span class="line">    3)</span><br><span class="line">      echo &quot;Level Three&quot;</span><br><span class="line">      ;;&amp;</span><br><span class="line">    3 | 2)</span><br><span class="line">      echo &quot;Level Two&quot;</span><br><span class="line">      ;;&amp;</span><br><span class="line">    3 | 2 | 1)</span><br><span class="line">      echo &quot;Level One&quot;</span><br><span class="line">      ;;</span><br><span class="line">    esac &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>select 条件选择</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  select NAME [ in WORD ] ; do LIST ; done</span><br><span class="line"></span><br><span class="line">* 介绍</span><br><span class="line">  - 交互式的条件选择</span><br><span class="line">  - WORD 会进行扩展，并输出到 STDOUT 上，让用户选择</span><br><span class="line">  - 用户选择一个值，填充到 NAME 中，然后执行 LIST，然后重新返回选择界面</span><br><span class="line">  - EOF 可以结束 select 的执行</span><br><span class="line">  - 省略 WORD 则会使用位置参数</span><br><span class="line">  - 使用 PS3 提示符</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：shell-条件表达式"><a href="#知识点：shell-条件表达式" class="headerlink" title="知识点：shell 条件表达式"></a>知识点：shell 条件表达式</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 条件表达式 Conditional expressions，用在 test 命令或 &#x27;[[ ]]&#x27; 组合命令中</span><br><span class="line">  - 主要用于算术比较、字符串比较、检查文件属性</span><br><span class="line"></span><br><span class="line">* 关于检查变量是否是整数</span><br><span class="line">  - shell 条件表达式无法检查 var 是否是一个 integer，需要使用其他方法来实现</span><br><span class="line">  - 方法一，使用 let 指令</span><br><span class="line">    - 因为对于无法识别为 integer 的值 bash 会将其作为 0 来参与算术运算</span><br><span class="line">    - 缺点，无法检查 var 本身就是 0 的情况</span><br><span class="line">    - 范例，a=xxx ; if (( a )) ; then echo &#x27;integer&#x27; ; else echo &#x27;not integer&#x27; ; fi</span><br><span class="line">  - 方法二，使用 expr 指令</span><br><span class="line">    - expr 指令运算算术表达式时，如果操作数不合法会报错 &#x27;expr: non-integer argument&#x27;</span><br><span class="line">    - 范例，a=xxx; if expr $a + 1 &amp;&gt; /dev/null ; then echo &#x27;integer&#x27; ; else echo &#x27;not integer&#x27; ; fi</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>算术比较</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">* arg1 -eq arg2</span><br><span class="line">  - equal to</span><br><span class="line"></span><br><span class="line">* arg1 -ne arg2</span><br><span class="line">  - net equal to</span><br><span class="line"></span><br><span class="line">* arg1 -lt arg2</span><br><span class="line">  - less than</span><br><span class="line"></span><br><span class="line">* arg1 -le arg2</span><br><span class="line">  - less than or equal to</span><br><span class="line"></span><br><span class="line">* arg1 -ge arg2</span><br><span class="line">  - greater than</span><br><span class="line"></span><br><span class="line">* arg1 -gt arg2</span><br><span class="line">  - greater than or equal to</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>字符串比较</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* -z string</span><br><span class="line">  - Ture 表示字符串长度为 0</span><br><span class="line"></span><br><span class="line">* string</span><br><span class="line">* -n string</span><br><span class="line">  - True 表示字符串长度不为 0</span><br><span class="line"></span><br><span class="line">* string1 = string2</span><br><span class="line">* string1 == string2</span><br><span class="line">  - Ture 表示两个字符串相同</span><br><span class="line"></span><br><span class="line">* string1 != string2</span><br><span class="line">  - True 表示两个字符串不相同</span><br><span class="line"></span><br><span class="line">* string1 &lt; string2</span><br><span class="line">  - True 表示 string1 按照字典序低于 string2</span><br><span class="line"></span><br><span class="line">* string1 &gt; string2</span><br><span class="line">  - True 表示 string1 按照字典序高于 string2</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>检查变量</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* -v varname</span><br><span class="line">  - 检查变量是否具有值</span><br><span class="line"></span><br><span class="line">* -R varname</span><br><span class="line">  - 检查变量是否具有值并且是一个 name reference</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>检查文件属性</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 对于软链接，除非特殊情况，都是检查软链接的 target 而不是软链接本身</span><br><span class="line"></span><br><span class="line">* 检查文件是否存在</span><br><span class="line">  -a file</span><br><span class="line">  -e file</span><br><span class="line"></span><br><span class="line">* 检查目录是否存在</span><br><span class="line">  -d dir</span><br><span class="line"></span><br><span class="line">* 检查文件类型</span><br><span class="line">  -b file   block special file</span><br><span class="line">  -c file   character special file</span><br><span class="line">  -f file   regular file</span><br><span class="line">  -h file   symbolic link</span><br><span class="line">  -L file   symbolic link</span><br><span class="line">  -p file   named pipe (FIFO)</span><br><span class="line">  -S file   socket</span><br><span class="line"></span><br><span class="line">* 检查文件权限</span><br><span class="line">  -r file   readable</span><br><span class="line">  -w file   writable</span><br><span class="line">  -x file   executable</span><br><span class="line"></span><br><span class="line">* 检查文件属性</span><br><span class="line">  -s file   文件大于 0</span><br><span class="line">  -O file   owned by the effective user id</span><br><span class="line">  -G file   owned by the effective group id</span><br><span class="line">  -N file   has been modified since it was last read</span><br><span class="line"></span><br><span class="line">* 比较两个文件</span><br><span class="line">  file1 -ef file2   比较两个文件是否相同，通过检查 device 和 inode numbers 来实现</span><br><span class="line">  file1 -nt file2   比较 file1 是否 newer than file2，或者 file1 存在而 file2 不存在</span><br><span class="line">  file1 -ot file2   比较 file1 是否 older than file2，或者 file1 不存在而 file2 存在</span><br><span class="line"></span><br><span class="line">* 检查文件的特殊属性</span><br><span class="line">  -g file   set-group-id</span><br><span class="line">  -k file   sticky bit</span><br><span class="line">  -u file   set-user-id</span><br><span class="line"></span><br><span class="line">* 文件描述符</span><br><span class="line">  -t fd     fd 已经打开并且指向了一个终端</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* -o optname</span><br><span class="line">  - 检查相应的 shell option 是否开启</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：shell-算数运算法则"><a href="#知识点：shell-算数运算法则" class="headerlink" title="知识点：shell 算数运算法则"></a>知识点：shell 算数运算法则</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - arithmetic evaluation</span><br><span class="line">  - bash 的算术运算使用固定宽度整形数 fixed-width integers</span><br><span class="line"></span><br><span class="line">* 对于变量</span><br><span class="line">  - 可以直接使用变量名来引用变量，不需要必须遵守 $&#123;name&#125; 的格式</span><br><span class="line">  - 不需要变量是一个 -i 变量，bash 会自动尝试将变量值转换为 integer</span><br><span class="line">  - 变量的值如果无法被解析为一个有效的 integer，则视其值为 null</span><br><span class="line">  - null 在运算时视为 0</span><br><span class="line"></span><br><span class="line">* 关于非法运算</span><br><span class="line">  - 除以 0 的运算会被 trap 并抛出异常</span><br><span class="line">  - 其他情况，由于都会将非法值转换为 null 并转为 0，因此不会报错</span><br><span class="line"></span><br><span class="line">* 关于进位制</span><br><span class="line">  - 默认视运算数为十进制数</span><br><span class="line">  - 如果以 &#x27;0&#x27; 开头，则视其为八进制数</span><br><span class="line">  - 如果以 &#x27;0x&#x27; 或 &#x27;0X&#x27; 开头，则视其为十六进制数</span><br><span class="line">  - 可以采用 &#x27;base#n&#x27; 的方式指定运算数的进位制，base 取值为 2-64，n 为此进位制下的数</span><br><span class="line">  - 对于超过十进制的进位制，可以采用小写字母、大写字幕、@、_ 来表示大于 10 的数，对于 35 以下的进位制，小写字母与大写字母代表同一个数</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>运算符</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 以下按照优先级进行排序</span><br><span class="line"></span><br><span class="line">* ( expression )</span><br><span class="line">  - 括号 parentheses</span><br><span class="line"></span><br><span class="line">* id++、id--</span><br><span class="line">  - post-increment、post-decrement</span><br><span class="line"></span><br><span class="line">* +、-</span><br><span class="line">  - 一元正 unary plus、一元负 unary minus</span><br><span class="line"></span><br><span class="line">* ++id、--id</span><br><span class="line">  - pre-increment、pre-decrement</span><br><span class="line"></span><br><span class="line">* !、~</span><br><span class="line">  - 逻辑否 logical negation、比特否 bitwise negation</span><br><span class="line"></span><br><span class="line">* **</span><br><span class="line">  - 幂运算 exponentiation</span><br><span class="line"></span><br><span class="line">* *、/、%</span><br><span class="line">  - 乘法 multiplication、除法 division、余数 remainder</span><br><span class="line"></span><br><span class="line">* +、-</span><br><span class="line">  - 加法 addition、减法 subtraction</span><br><span class="line"></span><br><span class="line">* &lt;&lt;、&gt;&gt;</span><br><span class="line">  - left bitwise shifts、right bitwise shifts</span><br><span class="line"></span><br><span class="line">* &lt;=、&gt;=、&lt;、&gt;</span><br><span class="line">* ==、!=</span><br><span class="line">  - 比较</span><br><span class="line"></span><br><span class="line">* &amp;</span><br><span class="line">* ^</span><br><span class="line">* |</span><br><span class="line">  - bitwise AND、bitwise exclusive OR、bitwise OR</span><br><span class="line"></span><br><span class="line">* &amp;&amp;</span><br><span class="line">* ||</span><br><span class="line">  - logical AND、logical OR</span><br><span class="line"></span><br><span class="line">* expr?expr:expr</span><br><span class="line">  - 条件运算 conditional operator</span><br><span class="line"></span><br><span class="line">* =、*=、/=、%=、+=、-=、&lt;&lt;=、&gt;&gt;=、&amp;=、^=、|=</span><br><span class="line">  - 赋值 assignment</span><br><span class="line"></span><br><span class="line">* expr1 , expr2</span><br><span class="line">  - comma</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：shell-字符匹配原则"><a href="#知识点：shell-字符匹配原则" class="headerlink" title="知识点：shell 字符匹配原则"></a>知识点：shell 字符匹配原则</h3><ol>
<li><strong>基础匹配原则</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 匹配原则 Pattern Matching</span><br><span class="line"></span><br><span class="line">* *</span><br><span class="line">  - 匹配任意数量的任意字符</span><br><span class="line">  - 在路径名匹配中，如果 bash 开启了 globstar 选项</span><br><span class="line">    - ** 可以匹配任意子目录和子文件</span><br><span class="line">    - **/ 可以匹配任意子目录</span><br><span class="line"></span><br><span class="line">* ?</span><br><span class="line">  - 匹配任意单个字符</span><br><span class="line"></span><br><span class="line">* [...]</span><br><span class="line">  - 匹配字符类</span><br><span class="line">  - 支持 &#x27;-&#x27; 表示字符范围</span><br><span class="line">  - 支持 &#x27;!&#x27; 或 &#x27;^&#x27; 表示反向字符类</span><br><span class="line">  - 支持 Posix 中括号表达式 [:class:]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>拓展匹配原则</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 需要 bash 开启 extglob 选项</span><br><span class="line">  - 拓展匹配原则比较慢，</span><br><span class="line"></span><br><span class="line">* pattern-list</span><br><span class="line">  - 一个 pattern，或使用 &#x27;|&#x27; 间隔的多个 pattern</span><br><span class="line"></span><br><span class="line">* ?(pattern-list)</span><br><span class="line">  - Matches zero or one occurrence of the given patterns</span><br><span class="line"></span><br><span class="line">* *(pattern-list)</span><br><span class="line">  - Matches zero or more occurrences of the given patterns</span><br><span class="line"></span><br><span class="line">* +(pattern-list)</span><br><span class="line">  - Matches one or more occurrences of the given patterns</span><br><span class="line"></span><br><span class="line">* @(pattern-list)</span><br><span class="line">  - Matches one of the given patterns</span><br><span class="line"></span><br><span class="line">* !(pattern-list)</span><br><span class="line">  - Matches anything except one of the given patterns</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：shell-函数"><a href="#知识点：shell-函数" class="headerlink" title="知识点：shell 函数"></a>知识点：shell 函数</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - shell 函数，用来将命令进行打包</span><br><span class="line">  - 函数可以像普通命令一样进行调用</span><br><span class="line">  - 函数会在 current shell 运行，脚本会新建一个 bash 并在其中运行</span><br><span class="line">  - 函数默认只在 current scope 中生效，对其 declare -xf 或 export -f 可以将其导出为环境函数</span><br><span class="line"></span><br><span class="line">* 函数的参数</span><br><span class="line">  - 在调用函数时，函数的参数会被放置在 $1、$2 等位置参数中，current shell 的位置参数会被暂时保存</span><br><span class="line">  - 数组 FUNCNAME 的 FUNCNAME[1] 元素保存 function name</span><br><span class="line">  - $# 等特殊参数也会被更新</span><br><span class="line">  - 函数运行结束后，位置参数以及 $# 等特殊参数会恢复为 current shell 的情况</span><br><span class="line"></span><br><span class="line">* 函数的变量</span><br><span class="line">  - local 指令用于在函数中设置局部变量</span><br><span class="line">  - declare -g 指令用于在函数中设置全局变量</span><br><span class="line"></span><br><span class="line">* 退出状态</span><br><span class="line">  - 函数中最后一个执行的命令的退出状态</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>定义函数</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">* 格式一</span><br><span class="line">  NAME () [&#123;]</span><br><span class="line">    COMPOUND-COMMAND</span><br><span class="line">    [&#125;] [REDIRECTION]</span><br><span class="line"></span><br><span class="line">* 格式二</span><br><span class="line">  function NAME &#123;</span><br><span class="line">    COMPOUND-COMMAND</span><br><span class="line">    &#125; [REDIRECTION]</span><br><span class="line"></span><br><span class="line">* 格式三</span><br><span class="line">  function NAME () [&#123;]</span><br><span class="line">    COMPOUND-COMMAND</span><br><span class="line">    [&#125;] [REDIRECTION]</span><br><span class="line"></span><br><span class="line">* NAME</span><br><span class="line">  - 指定函数名</span><br><span class="line"></span><br><span class="line">* COMPOUND-COMMAND</span><br><span class="line">  - 指定函数体</span><br><span class="line">  - 通常放在 &#x27;&#123; &#125;&#x27; 中</span><br><span class="line">  - 如果使用 function NAME 并不带 &#x27;( )&#x27;，COMPOUND-COMMAND 必须放在 &#x27;&#123; &#125;&#x27; 中</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 编写一个幂运算函数 pow()</span></span><br><span class="line"></span><br><span class="line">root@Ubuntu01:~# cat pow.source</span><br><span class="line">function pow() &#123;</span><br><span class="line">  echo $(( $1 ** $2 ))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">root@Ubuntu01:~# pow 10 2</span><br><span class="line">100</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="2-7-Bash-变量"><a href="#2-7-Bash-变量" class="headerlink" title="2.7 Bash 变量"></a>2.7 Bash 变量</h2><hr>
<h3 id="知识点：shell-变量"><a href="#知识点：shell-变量" class="headerlink" title="知识点：shell 变量"></a>知识点：shell 变量</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 变量，Variable，是一个储存值的 entity</span><br><span class="line">  - 变量设置之后，只能使用 unset 指令来撤销变量</span><br><span class="line"></span><br><span class="line">* 只读变量 readonly</span><br><span class="line">  - declare -r</span><br><span class="line">  - 只能在创建时赋值，不能被重新赋值</span><br><span class="line">  - 不能被 unset</span><br><span class="line">  - 不能删除变量的只读属性</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>变量赋值</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* 注意</span><br><span class="line">  - 赋值符号 &#x27;=&#x27; 和 &#x27;-=&#x27; 等，左右两端不可以有 space</span><br><span class="line"></span><br><span class="line">* 格式：NAME=VALUE</span><br><span class="line">  - 对变量进行赋值</span><br><span class="line">  - 只要对变量赋值，就可以设定变量</span><br><span class="line">  - 省略 VALUE，表示变量的值为 null string</span><br><span class="line">  - VALUE 支持波浪线扩展、变量扩展、命令替换、算术扩展、引用移除</span><br><span class="line"></span><br><span class="line">* 格式：NAME+=VALUE</span><br><span class="line">  - 如果变量是 integer 类型，则表示将 VALUE 与变量的原始值进行相加后再赋值</span><br><span class="line">  - 如果变量是 string 类型，则表示将 VALUE 追加的变量的原始值之后再赋值</span><br><span class="line"></span><br><span class="line">* 其他</span><br><span class="line">  - set、declare、export 指令可以在设置变量时同时对变量赋值</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>名称引用 nameref</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 通过 declare -n 来进行设置</span><br><span class="line">  - 变量的间接引用</span><br><span class="line">    - nameref 变量引用其他变量</span><br><span class="line">    - 对 nameref 变量的任何操作都实际作用在其他变量，包括引用、赋值、撤销、修改属性等</span><br><span class="line">    - 对其他变量的操作会实时反馈到 nameref 变量上</span><br><span class="line"></span><br><span class="line">* 移除 nameref 变量</span><br><span class="line">  - unset nameref 实际是撤销被引用变量</span><br><span class="line">  - unset -n nameref 才能撤销 nameref 变量而不是被引用变量</span><br><span class="line"></span><br><span class="line">* nameref 的一个应用场景</span><br><span class="line">  - 在 function 中 declare -n ref=$1</span><br><span class="line">  - ref 会引用传递给 $1 的变量</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：shell-数组"><a href="#知识点：shell-数组" class="headerlink" title="知识点：shell 数组"></a>知识点：shell 数组</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - bash 中的数组都是一维数组 one-dimensional array</span><br><span class="line"></span><br><span class="line">* 索引数组 indexed array</span><br><span class="line">  - 索引数组使用 integer 来引用元素，使用 declare -a 来显式声明数组类型</span><br><span class="line">  - 索引数组是 bash 默认的数组类型，如果不加声明直接执行 Array[subscript]=value 的赋值语句，则默认采用索引数组</span><br><span class="line">  - 索引数组是 zero-based，即索引数组的第一个元素的 index 为 0</span><br><span class="line">  - 本质上，索引数组也是一种关联数组</span><br><span class="line">  - 引用索引数组元素时，如果 subscript 为负，则表示从最大 index 反向查找，&#x27;-1&#x27; 表示最后一个元素</span><br><span class="line"></span><br><span class="line">* 关联数组 associative array</span><br><span class="line">  - 关联数组使用 string 来引用元素</span><br><span class="line">  - 关联数组在使用前，必须显式的通过 declare -A 来实现声明数组</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>使用数组</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 中括号 &#x27;[ ]&#x27; 是格式的一部分</span><br><span class="line">  - 对于索引数组，省略 subscript，即 $&#123;Array&#125;，相当于引用 $&#123;Array[0]&#125;</span><br><span class="line"></span><br><span class="line">* 引用数组元素</span><br><span class="line">  $&#123;Array[subscript]&#125;</span><br><span class="line">  $&#123;Array[*]&#125;</span><br><span class="line">  $&#123;Array[@]&#125;</span><br><span class="line"></span><br><span class="line">* 数组元素赋值</span><br><span class="line">  Array[subscript]=value</span><br><span class="line">  Array[subscript]=       &lt;== 数组元素赋值 null string</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>组合赋值 compound assignment</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 中括号 &#x27;[ ]&#x27; 为格式的一部分</span><br><span class="line">  - 对索引数组进行赋值，&#x27;subscript&#x27; 可以省略</span><br><span class="line">  - 对关联数组进行赋值，&#x27;subscript&#x27; 不可省略</span><br><span class="line">  - &#x27;=&#x27; 方式，会将数组原来的元素全部撤销</span><br><span class="line">  - &#x27;+=&#x27; 方式，不会撤销数组原来的元素，会将新的元素追加到数组末尾</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  Array=([subscript]=value ...)</span><br><span class="line">  Array+=([subscript]=value ...)</span><br><span class="line">  Array=(value0 value1 ... valueN)    &lt;== 索引数组</span><br><span class="line">  Array+=(value0 value1 ... valueN)   &lt;== 索引数组</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>删除数组</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 即使将数组中元素全部删除，数组本身不会被摧毁</span><br><span class="line">  - 摧毁数组必须显式采用 unset 指令</span><br><span class="line"></span><br><span class="line">* 删除数组元素</span><br><span class="line">  unset Array[subscript]</span><br><span class="line"></span><br><span class="line">* 摧毁数组</span><br><span class="line">  unset Array</span><br><span class="line">  unset Array[*]</span><br><span class="line">  unset Array[@]</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：shell-位置参数"><a href="#知识点：shell-位置参数" class="headerlink" title="知识点：shell 位置参数"></a>知识点：shell 位置参数</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 位置参数 Positional Parameters</span><br><span class="line">  - 位置参数支持在脚本和函数中使用</span><br><span class="line">  - $0 不属于位置参数</span><br><span class="line"></span><br><span class="line">* $N</span><br><span class="line">  - 储存第 N 个 argument</span><br><span class="line">  - 可以使用 set 命令对 $N 进行重新赋值，不能使用 NAME=VALUE 的方式进行重新赋值</span><br><span class="line"></span><br><span class="line">* $&#123;NN&#125;</span><br><span class="line">  - 对于大于等于 10 的位置参数，在引用时必须使用大括号</span><br><span class="line"></span><br><span class="line">* $*</span><br><span class="line">* $@</span><br><span class="line">  - 扩展为所有的位置参数组成的列表，每一个位置参数都为一个单独的 word</span><br><span class="line">  - $* 如果放在双引号中使用，即 &quot;$*&quot;，则扩展为由 IFS 第一个字符间隔的列表，即 &quot;$1c$2c...&quot;</span><br><span class="line">  - $@ 如果放在双引号中使用，即 &quot;$@&quot;，仍扩展为空格间隔的列表，即 &quot;$1&quot; &quot;$2&quot; ...</span><br><span class="line"></span><br><span class="line">* $#</span><br><span class="line">  - 扩展为位置参数的个数</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：shell-特殊变量"><a href="#知识点：shell-特殊变量" class="headerlink" title="知识点：shell 特殊变量"></a>知识点：shell 特殊变量</h3><ol>
<li><strong>Special Parameters</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* $?</span><br><span class="line">  - 扩展为最近一次执行的前台进程的退出状态</span><br><span class="line"></span><br><span class="line">* $$</span><br><span class="line">  - 扩展为 current shell 的 pid</span><br><span class="line">  - ($$) 依然扩展为 current shell pid 而不是 subshell 的 pid</span><br><span class="line"></span><br><span class="line">* $-</span><br><span class="line">  - 扩展为 current shell 的 set option flag 列表</span><br><span class="line"></span><br><span class="line">* $!</span><br><span class="line">  - 扩展为最近一次放到后台的进程的 pid</span><br><span class="line"></span><br><span class="line">* $_</span><br><span class="line">  - 在 shell 启动时，储存使用的 shell 的绝对路径名</span><br><span class="line">  - 在之后的运行中，储存最后一次运行的 simple command</span><br><span class="line"></span><br><span class="line">* $0</span><br><span class="line">  - 扩展为 shell 名或脚本名</span><br><span class="line">  - 对于脚本，储存调用脚本时，在经过解析后被 bash 识别为 command 的 word</span><br><span class="line">    - 如果以绝对路径名调用脚本，则 $0 储存脚本的绝对路径名</span><br><span class="line">    - 如果以将对路径名调用脚本，则 $0 储存脚本的相对路径名</span><br><span class="line">    - 如果以 &#x27;./&#x27; 方式调用脚本，则 $0 储存 &#x27;./pathname&#x27; 格式的脚本名</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>Shell Variables</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">* BASH</span><br><span class="line">  - 扩展为 current bash 的程序的绝对路径名</span><br><span class="line"></span><br><span class="line">* BASHPID</span><br><span class="line">* PPID</span><br><span class="line">  - current bash 的 pid、ppid</span><br><span class="line"></span><br><span class="line">* SHLVL</span><br><span class="line">* BASH_SUBSHELL</span><br><span class="line">  - bash 的层级，subshell 的层级</span><br><span class="line"></span><br><span class="line">* EPOCHSECONDS</span><br><span class="line">* EPOCHREALTIME</span><br><span class="line">  - 扩展为当前时间相对于 epoch 的时间戳</span><br><span class="line">  - EPOCHREALTIME 精确到微秒级别 micro-second，即小数点后 6 位</span><br><span class="line">  - EPOCHSECONDS 精确到秒级别</span><br><span class="line"></span><br><span class="line">* UID</span><br><span class="line">* EUID</span><br><span class="line">  - 当前用户的 uid、euid</span><br><span class="line"></span><br><span class="line">* GROUPS</span><br><span class="line">  - 数组，记录了当前用户的所有的 groups</span><br><span class="line"></span><br><span class="line">* HOSTNAME</span><br><span class="line">* HOSTTYPE</span><br><span class="line">  - 当前主机的 hostname、主机类型</span><br><span class="line"></span><br><span class="line">* LINENO</span><br><span class="line">  - 只能用在脚本或函数中</span><br><span class="line">  - 被引用时，扩展为当前位置在脚本或函数中的第几行</span><br><span class="line"></span><br><span class="line">* PWD</span><br><span class="line">* OLDPWD</span><br><span class="line">  - current working directory、previous working directory</span><br><span class="line"></span><br><span class="line">* RANDOM</span><br><span class="line">  - 生成一个 0-32767 的随机数</span><br><span class="line">  - 向其赋值用于对随机数生成器进行初始化</span><br><span class="line"></span><br><span class="line">* SECONDS</span><br><span class="line">  - 记录 current shell 从被调用以来到现在的时间</span><br><span class="line">  - 对其赋值表示重新计时</span><br><span class="line"></span><br><span class="line">* HOME</span><br><span class="line">  - current user 的家目录</span><br><span class="line"></span><br><span class="line">* IFS</span><br><span class="line">  - Internal Field Separator</span><br><span class="line">  - bash 使用此变量的设置来进行分词</span><br><span class="line">  - 默认值为 &lt;space&gt;&lt;tab&gt;&lt;newline&gt;</span><br><span class="line"></span><br><span class="line">* PATH</span><br><span class="line">  - 命令的搜索目录列表，colon-separated list</span><br><span class="line">  - zero-length directory 表示 current directory</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：shell-变量扩展"><a href="#知识点：shell-变量扩展" class="headerlink" title="知识点：shell 变量扩展"></a>知识点：shell 变量扩展</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 变量扩展 parameter and variable expansion</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>普通变量</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* $Var</span><br><span class="line">* $&#123;Var&#125;</span><br><span class="line">  - 扩展为变量 Var 的值</span><br><span class="line">  - 对于大于 9 的位置参数，只能使用 &#x27;$&#123; &#125;&#x27; 格式</span><br><span class="line">  - 对于嵌套的情况，只能使用 &#x27;$&#123; &#125;&#x27; 格式</span><br><span class="line"></span><br><span class="line">* $&#123;#Var&#125;</span><br><span class="line">  - 变量长度 Parameter length</span><br><span class="line">  - 扩展为 Var 的长度</span><br><span class="line">  - $&#123;#*&#125;、$&#123;#@&#125;，扩展为位置参数的个数</span><br><span class="line">  - $&#123;#Array[subscript]&#125;，扩展为数组中相应元素的长度</span><br><span class="line"></span><br><span class="line">* $&#123;!Var&#125;</span><br><span class="line">  - 间接引用扩展 indirect expansion</span><br><span class="line">  - 首先替换为变量 Var 的值，假设为 Para，然后再将 Para 值视为一个变量，并尝试替换扩展 $&#123;Para&#125;</span><br><span class="line">  - 格式中，&#x27;&#123;&#x27; 和 &#x27;!&#x27; 之间不可以有空白</span><br><span class="line">  - 如果 Var 是一个 nameref，则扩展为 Var 的值，即 Var 所引用的变量的变量名</span><br><span class="line"></span><br><span class="line">* $&#123;!prefix*&#125;</span><br><span class="line">* $&#123;!prefix@&#125;</span><br><span class="line">  - 变量名前缀匹配 Names matching prefix</span><br><span class="line">  - 扩展为所有以 &#x27;prefix&#x27; 开头的变量的变量名，以 IFS 的第一个字符进行间隔</span><br><span class="line">  - 如果 $&#123;!prefix@&#125; 放在了一个双括号 &quot; &quot; 中，则扩展的结果为每个变量名都是一个单独的 word</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>数组变量</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* $&#123;Array[index]&#125;</span><br><span class="line">* $&#123;Array[key]&#125;</span><br><span class="line">  - 数组元素扩展</span><br><span class="line">  - 扩展为数组对应的元素的值</span><br><span class="line">  - 中括号 &#x27;[ ]&#x27; 为语法格式，不可省略</span><br><span class="line"></span><br><span class="line">* $&#123;#Array[*]&#125;</span><br><span class="line">* $&#123;#Array[@]&#125;</span><br><span class="line">    - 扩展为数组中元素的个数</span><br><span class="line"></span><br><span class="line">* $&#123;Array[*]&#125;</span><br><span class="line">* $&#123;Array[@]&#125;</span><br><span class="line">  - 数组值扩展</span><br><span class="line">  - 扩展为 Array 的所有的值组成的列表</span><br><span class="line">  - 如果放在双引号 &quot; &quot; 中</span><br><span class="line">    - $&#123;Array[@]&#125; 会将 Array 的每个值都扩展为单独的 word</span><br><span class="line">    - $&#123;Array[*]&#125; 会扩展为使用 IFS 的第一个字符间隔的列表</span><br><span class="line"></span><br><span class="line">* $&#123;!Array[*]&#125;</span><br><span class="line">* $&#123;!Array[@]&#125;</span><br><span class="line">  - 数组键扩展 List of array keys</span><br><span class="line">  - 扩展为 Array 的所有的键组成的列表</span><br><span class="line">  - 如果放在双引号 &quot; &quot; 中，$&#123;!Array[@]&#125; 会将 Array 的每个键都扩展为单独的 word</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>变量测试</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 带有冒号的格式表示针对变量 unset 或 null 的情况</span><br><span class="line">  - 省略冒号的格式表示只针对变量 unset 的情况</span><br><span class="line"></span><br><span class="line">* $&#123;Var-Word&#125;</span><br><span class="line">* $&#123;Var:-Word&#125;</span><br><span class="line">  - 默认值 Default Values</span><br><span class="line">  - 如果 Var 为 unset 或 null，则扩展为 Word</span><br><span class="line">  - 其他情况，直接扩展为 Var 的值</span><br><span class="line"></span><br><span class="line">* $&#123;Var=Word&#125;</span><br><span class="line">* $&#123;Var:=Word&#125;</span><br><span class="line">  - 赋默认值 Assign Default Values</span><br><span class="line">  - 如果 Var 为 unset 或 null，则扩展为 Word，并进行赋值 Var=Word</span><br><span class="line">  - 其他情况，直接扩展为 Var 的值</span><br><span class="line">  - 不支持对位置参数和特殊参数使用此格式</span><br><span class="line"></span><br><span class="line">* $&#123;Var?Word&#125;</span><br><span class="line">* $&#123;Var:?Word&#125;</span><br><span class="line">  - 变量测试</span><br><span class="line">  - 如果 Var 为 unset 或 null，则报出错误 Display Error</span><br><span class="line">  - 其他情况，直接扩展为 Var 的值</span><br><span class="line"></span><br><span class="line">* $&#123;Var+Word&#125;</span><br><span class="line">* $&#123;Var:+Word&#125;</span><br><span class="line">  - 可选值测试 Alternate Value</span><br><span class="line">  - 如果 Var 为 unset 或 null，则不进行扩展</span><br><span class="line">  - 其他情况，则扩展为 Wrod</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>变量内容修改</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 不会修改变量的值，而是在进行变量扩展时，扩展为修改后的结果</span><br><span class="line"></span><br><span class="line">* $&#123;Var:offset&#125;</span><br><span class="line">* $&#123;Var:offset:length&#125;</span><br><span class="line">  - 子字符串扩展 Substring Expansion</span><br><span class="line">  - 扩展为从 Var 中截取的子字符串</span><br><span class="line">  - offset 和 length 可以使用算术表达式</span><br><span class="line">  - offset 从 0 开始计数</span><br><span class="line">  - offset 如果为负</span><br><span class="line">    - 表示从 end 向前确定的字符偏移量，&#x27;-1&#x27; 表示最后一个字符</span><br><span class="line">  - length 如果为负</span><br><span class="line">    - 表示从 end 向前确定的字符偏移量，&#x27;-1&#x27; 表示最后一个字符</span><br><span class="line">    - 此时 length 不再表示字符的数量</span><br><span class="line">    - 此时 length 所指向的字符必须在 offset 所指向的字符的后面</span><br><span class="line">  - 如果 Var 是 &#x27;@&#x27;</span><br><span class="line">    - 表示对位置参数进行获取</span><br><span class="line">    - offset 此时表示位置参数的索引，默认从 1 开始计数，可以为负</span><br><span class="line">    - offset 如果为 0，此时会将 $0 添加到待选择的位置参数列表中</span><br><span class="line">    - length 表示获取的位置参数的数量，不能为负</span><br><span class="line">  - 如果 Var 是被 &#x27;@&#x27; 或 &#x27;*&#x27; 索引的索引数组，即 $&#123;Array[@]:offset:length&#125; 的形式</span><br><span class="line">    - 表示对 Array 的元素进行获取</span><br><span class="line">    - 此时 offset 表示 Array 中的索引，可以为负</span><br><span class="line">    - 此时 length 表示获取的元素的数量，不能为负</span><br><span class="line">  - 如果 Var 是关联数组，则会产生无法准确预测的结果</span><br><span class="line"></span><br><span class="line">* $&#123;Var/Pattern/String&#125;</span><br><span class="line">  - 内容替换 Pattern substitution</span><br><span class="line">  - 扩展为 Var 的值经过替换后的结果，取第一个匹配的位置，按照最长匹配进行替换</span><br><span class="line">  - String 代表替换后的字符串</span><br><span class="line">  - Pattern 符合 shell 基本匹配原则</span><br><span class="line">  - Pattern 如果以 &#x27;/&#x27; 开头，则对 Var 中所有的匹配位置都进行替换</span><br><span class="line">  - Pattern 如果以 &#x27;#&#x27; 开头，则必须从 Var 的开始部分进行匹配</span><br><span class="line">  - Pattern 如果以 &#x27;%&#x27; 开头，则必须匹配到 Var 的结束部分</span><br><span class="line">  - 如果 Var 是 &#x27;*&#x27; 或 &#x27;@&#x27;，则扩展的结果为对所有的位置参数进行匹配替换后组成的列表</span><br><span class="line">  - 如果 Var 是 Array[*] 或 Array[@]，则扩展的结果为对 Array 的所有的元素进行匹配替换后组成的列表</span><br><span class="line"></span><br><span class="line">* $&#123;Var#Pattern&#125;</span><br><span class="line">* $&#123;Var##Pattern&#125;</span><br><span class="line">  - 前缀移除 Remove matching prefix pattern</span><br><span class="line">  - 扩展为对 Var 移除前缀后的结果</span><br><span class="line">  - Pattern 符合 shell 基本匹配原则</span><br><span class="line">  - $&#123;Var#Pattern&#125; 表示移除最短匹配</span><br><span class="line">  - $&#123;Var##Pattern&#125; 表示移除最长匹配</span><br><span class="line">  - 如果 Var 是 &#x27;*&#x27; 或 &#x27;@&#x27;，则扩展的结果为对所有的位置参数移除前缀后组成的列表</span><br><span class="line">  - 如果 Var 是 Array[*] 或 Array[@]，则扩展的结果为对 Array 的所有的元素移除前缀后组成的列表</span><br><span class="line"></span><br><span class="line">* $&#123;Var%Pattern&#125;</span><br><span class="line">* $&#123;Var%%Pattern&#125;</span><br><span class="line">  - 后缀移除 Remove matching suffix pattern</span><br><span class="line">  - 扩展为对 Var 移除后缀后的结果</span><br><span class="line">  - Pattern 符合 shell 基本匹配原则</span><br><span class="line">  - $&#123;Var%Pattern&#125; 表示移除最短匹配</span><br><span class="line">  - $&#123;Var%%Pattern&#125; 表示移除最长匹配</span><br><span class="line">  - 如果 Var 是 &#x27;*&#x27; 或 &#x27;@&#x27;，则扩展的结果为对所有的位置参数移除后缀后组成的列表</span><br><span class="line">  - 如果 Var 是 Array[*] 或 Array[@]，则扩展的结果为对 Array 的所有的元素移除后缀后组成的列表</span><br><span class="line"></span><br><span class="line">* $&#123;Var^Pattern&#125;</span><br><span class="line">* $&#123;Var^^Pattern&#125;</span><br><span class="line">* $&#123;Var,Pattern&#125;</span><br><span class="line">* $&#123;Var,,Pattern&#125;</span><br><span class="line">  - 大小写转换 Case modification</span><br><span class="line">  - 扩展为 Var 中与 Pattern 匹配的部分经过大小写转换后的结果</span><br><span class="line">  - Pattern 符合 shell 基本匹配原则</span><br><span class="line">  - 省略 Pattern，则表示全部匹配</span><br><span class="line">  - $&#123;Var^Pattern&#125; ，小写转大写，只尝试转换 Var 的第一个字符</span><br><span class="line">  - $&#123;Var^^Pattern&#125;，小写转大写，转换匹配部分的全部</span><br><span class="line">  - $&#123;Var,Pattern&#125; ，大写转小写，只尝试转换 Var 的第一个字符</span><br><span class="line">  - $&#123;Var,,Pattern&#125;，大写转小写，转换匹配部分的全部</span><br><span class="line">  - 如果 Var 是 &#x27;*&#x27; 或 &#x27;@&#x27;，则扩展的结果为对所有的位置参数进行大小写转换后组成的列表</span><br><span class="line">  - 如果 Var 是 Array[*] 或 Array[@]，则扩展的结果为对 Array 的所有的元素进行大小写转换后组成的列表</span><br><span class="line"></span><br><span class="line">$&#123;Var@Operator&#125;</span><br><span class="line">  - 变量翻译 Parameter transformation</span><br><span class="line">  - 扩展为一个由 Var 的属性确定的字符串</span><br><span class="line">  - 操作符 Operator</span><br><span class="line">    - a，扩展为一个由 Var 的属性组成的字符串</span><br><span class="line">    - Q</span><br><span class="line">    - E</span><br><span class="line">    - P</span><br><span class="line">    - A，扩展为一个由 declare 和赋值语句组成的字符串，可以用来重建 Var</span><br><span class="line">  - 如果 Var 是 &#x27;*&#x27; 或 &#x27;@&#x27;，则扩展的结果为对所有的位置参数进行 transformation 后组成的列表</span><br><span class="line">  - 如果 Var 是 Array[*] 或 Array[@]，则扩展的结果为 Array 的所有的元素进行 transformation 后组成的列表</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：declare、local-指令"><a href="#知识点：declare、local-指令" class="headerlink" title="知识点：declare、local 指令"></a>知识点：declare、local 指令</h3><ol>
<li><strong>declare 指令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 设置变量的值和属性</span><br><span class="line">  - 查看变量的值</span><br><span class="line">  - 查看函数的定义</span><br><span class="line">  - 用在函数中，默认为设置局部变量</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  declare OPTIONS [-p] [NAME[=VALUE] ...]</span><br><span class="line">  typeset OPTIONS [-p] [NAME[=VALUE] ...]</span><br><span class="line"></span><br><span class="line">* declare</span><br><span class="line">  - 省略 OPTION 和 NAME，则显示所有的相关的变量的值和所有函数的定义，并且格式为可重用的方式</span><br><span class="line"></span><br><span class="line">* declare OPTION</span><br><span class="line">  - 指定 OPTION，省略 NAME，表示显示所有相关属性的对象的值</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>local 指令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - local 指令只能用在函数中</span><br><span class="line">  - 设置局部变量</span><br><span class="line">  - 显示局部变量的值</span><br><span class="line">  - local 的选项与 declare 的选项相同</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  local [OPTION] [NAME[=VALUE]]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - &#x27;-&#x27; 表示设置变量的某个属性</span><br><span class="line">  - &#x27;+&#x27; 表示删除变量的某个属性</span><br><span class="line"></span><br><span class="line">* -p NAME</span><br><span class="line">  - 显示变量的值，并且格式为可重用的方式</span><br><span class="line"></span><br><span class="line">* -f Function</span><br><span class="line">* -F Function</span><br><span class="line">  - 显示函数</span><br><span class="line">  - &#x27;-f&#x27; 显示函数的定义，&#x27;-F&#x27; 仅显示函数的名字和属性</span><br><span class="line">  - shopt 选项 extdebug 可以使 declare 额外显示函数的 source file 和 line number</span><br><span class="line"></span><br><span class="line">* -g</span><br><span class="line">  - 只能用在函数中，用来设置全局变量</span><br><span class="line"></span><br><span class="line">* -a</span><br><span class="line">  - 索引数组</span><br><span class="line"></span><br><span class="line">* -A</span><br><span class="line">  - 关联数组</span><br><span class="line"></span><br><span class="line">* -i</span><br><span class="line">  - integer</span><br><span class="line"></span><br><span class="line">* -l、-u</span><br><span class="line">  - lowercase、uppercase</span><br><span class="line"></span><br><span class="line">* -n</span><br><span class="line">  - nameref</span><br><span class="line"></span><br><span class="line">* -r</span><br><span class="line">  - readonly</span><br><span class="line">  - 只读属性无法被去除</span><br><span class="line"></span><br><span class="line">* -x</span><br><span class="line">  - 环境变量</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：export-指令"><a href="#知识点：export-指令" class="headerlink" title="知识点：export 指令"></a>知识点：export 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 将变量或函数变更为环境变量、环境函数</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  export [-fn] [NAME[=WORD]] ...</span><br><span class="line">  export [-p]</span><br><span class="line"></span><br><span class="line">* -p</span><br><span class="line">  - 打印当前的环境变量、环境函数，相当于 declare -x</span><br><span class="line"></span><br><span class="line">* -f</span><br><span class="line">  - 表示 NAME 是为一个函数</span><br><span class="line"></span><br><span class="line">* -n</span><br><span class="line">  - 将环境变量、环境函数恢复为普通变量、普通函数</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：shift-指令"><a href="#知识点：shift-指令" class="headerlink" title="知识点：shift 指令"></a>知识点：shift 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 对位置参数进行移位</span><br><span class="line">    - $1 的值变为 $n+1 的值</span><br><span class="line">    - $2 的值变为 $n+2 的值</span><br><span class="line">    - 以此类推</span><br><span class="line">    - 位置参数 1 到位置参数 $#-N+1 原来的值被遗弃</span><br><span class="line">    - 位置参数 $#-N+1 到位置参数 $# 被撤销</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  shift [N]</span><br><span class="line"></span><br><span class="line">* N</span><br><span class="line">  - 默认值为 1</span><br><span class="line">  - 0 则不会进行移位</span><br><span class="line">  - N 大于 $# 则不会进行移位</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：unset-指令"><a href="#知识点：unset-指令" class="headerlink" title="知识点：unset 指令"></a>知识点：unset 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 移除变量、函数</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  unset [OPTIONS] NAMES</span><br><span class="line"></span><br><span class="line">* -f</span><br><span class="line">  - 表示 NAME 为函数</span><br><span class="line"></span><br><span class="line">* -n</span><br><span class="line">  - 表示 NAME 为 nameref</span><br><span class="line">  - 移除 nameref 变量</span><br><span class="line"></span><br><span class="line">* 其他</span><br><span class="line">  - 无法移除具有 readonly 的变量、函数</span><br><span class="line">  - 对于 shell 的特殊变量 RANDOM、SECONDS、LINENO、HISTCMD、FUNCNAME、GROUPS 等，一旦被移除，就会失去其特殊功能，即使之后重建</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="2-8-Bash-作业"><a href="#2-8-Bash-作业" class="headerlink" title="2.8 Bash 作业"></a>2.8 Bash 作业</h2><hr>
<h3 id="知识点：bash-作业控制"><a href="#知识点：bash-作业控制" class="headerlink" title="知识点：bash 作业控制"></a>知识点：bash 作业控制</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">* 作业介绍</span><br><span class="line">  - 作业是 bash 管理子进程的一种方式</span><br><span class="line"></span><br><span class="line">* 前台 foreground</span><br><span class="line">  - 前台进程，即 process group ID 等于 current terminal process group ID 的进程</span><br><span class="line">  - 前台进程可以接受到键盘生成的信号，可以读写 terminal</span><br><span class="line"></span><br><span class="line">* 后台 background</span><br><span class="line">  - 后台进程，即 process group ID 不等于 current terminal process group ID 的进程</span><br><span class="line">  - 后台进程无法接受到键盘生成的信号，不能读写 terminal</span><br><span class="line">  - suspend character，通常为 Control-Z，可以将前台进程放到后台，并且状态为 stopped</span><br><span class="line"></span><br><span class="line">* current job</span><br><span class="line">  - 最近一个从前台放到后台的 job，或最近一个在后台中恢复 running 的 job</span><br><span class="line">  - 在 job 列表中，current job 体现为带一个 &#x27;+&#x27; 的标记，previous job 体系为带一个 &#x27;-&#x27; 的标记</span><br><span class="line"></span><br><span class="line">* jobspec</span><br><span class="line">  - job 的表示法，job specification，使用 &#x27;%&#x27; 字符</span><br><span class="line">  - &#x27;%n&#x27;              通过 jobid 表示 job</span><br><span class="line">  - &#x27;%&#x27;、&#x27;%%&#x27;、&#x27;%+&#x27;   current job</span><br><span class="line">  - &#x27;%-&#x27;              previous job</span><br><span class="line"></span><br><span class="line">* 作业状态的报告</span><br><span class="line">  - 默认情况下，bash 会等待下一次输出 prompt 时，报告 job 的变化状态</span><br><span class="line">  - set -b 可以使 bash 立刻报告</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：jobs-指令"><a href="#知识点：jobs-指令" class="headerlink" title="知识点：jobs 指令"></a>知识点：jobs 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 打印当前的作业列表</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  jobs [-lnprs] [ jobspec ... ]</span><br><span class="line"></span><br><span class="line">* jobspec</span><br><span class="line">  - %jobid</span><br><span class="line"></span><br><span class="line">* -l</span><br><span class="line">  - 额外显示 job 的 pid</span><br><span class="line"></span><br><span class="line">* -p</span><br><span class="line">  - 仅显示 job 的 process group 的 leader 的 pid</span><br><span class="line"></span><br><span class="line">* -r</span><br><span class="line">  - 仅显示 running 的 job</span><br><span class="line"></span><br><span class="line">* -s</span><br><span class="line">  - 仅显示 stopped 的 job</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：fg、bg-指令"><a href="#知识点：fg、bg-指令" class="headerlink" title="知识点：fg、bg 指令"></a>知识点：fg、bg 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - fg，将后台 job 恢复到前台</span><br><span class="line">  - bg，将后台中 stopped job 的状态改为 running</span><br><span class="line">  - 如果不指定 jobspec，则会使用 shell 标记为 current job 的 job</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  fg [jobspec]</span><br><span class="line">  bg [jobspec ...]</span><br><span class="line"></span><br><span class="line">* 其他</span><br><span class="line">  - 单独一个 &#x27;%n&#x27; 作为命令，相当于 &#x27;fg %n&#x27;</span><br><span class="line">  - 单独一个 &#x27;%n &amp;&#x27; 作为命令，相当于 &#x27;bg %n&#x27;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：disown-指令"><a href="#知识点：disown-指令" class="headerlink" title="知识点：disown 指令"></a>知识点：disown 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 将 job 从 job list 中移除</span><br><span class="line">  - job 由后台作业变成后台进程</span><br><span class="line">    - 若 shell 退出，作业进程不会结束</span><br><span class="line">    - 若 shell 退出，作业进程的父进程变为 1 号进程</span><br><span class="line">  - 若未指定 jobspec，则对 current job 进行操作</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  disown [-ar] [-h] [jobspec ... | pid ... ]</span><br><span class="line"></span><br><span class="line">* -a</span><br><span class="line">  - 若未指定 jobspec，则将 job list 中所有的 job 均移除</span><br><span class="line"></span><br><span class="line">* -r</span><br><span class="line">  - 若未指定 jobspec，则将 job list 中所有的 running job 均移除</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：nohup-指令"><a href="#知识点：nohup-指令" class="headerlink" title="知识点：nohup 指令"></a>知识点：nohup 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 以忽略 SIGHUP 的方式运行命令</span><br><span class="line">  - nohup 会运行命令，并忽略 SIGHUP 信号</span><br><span class="line"></span><br><span class="line">* 输入输出</span><br><span class="line">  - 对于 STDIN，如果是一个 terminal，则将其重定向为 /dev/null</span><br><span class="line">  - 对于 STDOUT，如果是一个 terminal，则将其重定向到 nohup.out，若失败则重定向到 $HOME/nohup.out</span><br><span class="line">  - 对于 STDERR，如果是一个 terminal，则将其重定向到 STDOUT，通常亦即 nohup.out</span><br><span class="line">  - 可以通过 nohup COMMAND &gt; FILE 的方式，将输出保存到其他地方</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  nohup COMMAND [ARG]...</span><br><span class="line">  nohup OPTION</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  --help</span><br><span class="line">  --version</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：sleep-指令"><a href="#知识点：sleep-指令" class="headerlink" title="知识点：sleep 指令"></a>知识点：sleep 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 沉睡一段时间</span><br><span class="line">  - 如果指定了多个时间，则沉睡的时间为所有时间的总和</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  sleep NUMBER[SUFFIX] ...</span><br><span class="line">  sleep OPTION</span><br><span class="line"></span><br><span class="line">* NUMBER</span><br><span class="line">  - 指定沉睡的时间，单位默认为 s</span><br><span class="line">  - 可以指定整数 integer，也可以指定浮点数 floating point number</span><br><span class="line"></span><br><span class="line">* SUFFIX</span><br><span class="line">  - 指定沉睡的时间的时间单位</span><br><span class="line">  - s 表示秒 second</span><br><span class="line">  - m 表示分 minutes</span><br><span class="line">  - h 表示小时 hours</span><br><span class="line">  - d 表示天 days</span><br><span class="line"></span><br><span class="line">* OPTION</span><br><span class="line">  --help</span><br><span class="line">  --version</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：wait-指令"><a href="#知识点：wait-指令" class="headerlink" title="知识点：wait 指令"></a>知识点：wait 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 等待子进程的执行结束</span><br><span class="line">  - 当子进程改版状态时，立刻报告</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  wait [-fn] [ID ...]</span><br><span class="line"></span><br><span class="line">* ID</span><br><span class="line">  - 可以是 pid</span><br><span class="line">  - 可以是 jobspec，即 %jobid</span><br><span class="line"></span><br><span class="line">* -n</span><br><span class="line">  - 等待所有的 job 结束</span><br><span class="line"></span><br><span class="line">* -f</span><br><span class="line">  - 子进程运行的过程中不再报告，直到子进程运行结束才进行报告</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="2-9-BashBuiltin"><a href="#2-9-BashBuiltin" class="headerlink" title="2.9 BashBuiltin"></a>2.9 BashBuiltin</h2><hr>
<h3 id="知识点：alias-指令"><a href="#知识点：alias-指令" class="headerlink" title="知识点：alias 指令"></a>知识点：alias 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - alias 指令，用来设置命令别名</span><br><span class="line"></span><br><span class="line">* 别名的使用</span><br><span class="line">  - 别名只在 interactive shell 中生效</span><br><span class="line">  - 别名在使用时，必须作为 simple command 的第一个 word</span><br><span class="line">  - 别名进行扩展后，会递归对扩展后的结果的第一个 word 尝试测试是否别名，相同的 word 只会扩展一次</span><br><span class="line">  - 如果别名的 VALUE 以空白结尾，表示在别名扩展后，会尝试对别名之后的第一个 wrod 测试别名</span><br><span class="line">  - shopt 选项 expand_aliases 可以让别名在 non-interactive shell中生效</span><br><span class="line">  - bash 禁止在 function 中使用别名</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  alias [-p] [NAME[=VALUE] ...]</span><br><span class="line">  unalias [-a] [NAME ...]</span><br><span class="line"></span><br><span class="line">* alias [-p]</span><br><span class="line">  - 无参数调用，打印当前的别名列表</span><br><span class="line"></span><br><span class="line">* alias NAME</span><br><span class="line">  - 打印 NAME 所代表的别名设置</span><br><span class="line"></span><br><span class="line">* -a</span><br><span class="line">  - 删除所有的别名</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：echo-指令"><a href="#知识点：echo-指令" class="headerlink" title="知识点：echo 指令"></a>知识点：echo 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 打印 args，并以 newline 结尾</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  echo [-neE] [ARGS]</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -n    以 null string 结尾</span><br><span class="line">  -e    启用对 backslash-escaped 字符的解析</span><br><span class="line">  -E    禁用对 backslash-escaped 字符的解析</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>backslash-escaped 字符</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* echo 支持的 backslash-escaped 字符</span><br><span class="line">  \a      alert (bell)</span><br><span class="line">  \b      backspace</span><br><span class="line">  \c      suppress further output</span><br><span class="line">  \e \E   an escape character</span><br><span class="line">  \f      form feed</span><br><span class="line">  \n      new line</span><br><span class="line">  \r      carriage return</span><br><span class="line">  \t      horizontal tab</span><br><span class="line">  \v      vertical tab</span><br><span class="line">  \\      backslash</span><br><span class="line">  \0nnn   the eight-bit character whose value is the octal value nnn (zero to three octal digits)</span><br><span class="line">  \xHH    the eight-bit character whose value is the hexadecimal value HH (one or two hex digits)</span><br><span class="line">  \uHHHH        the Unicode (ISO/IEC 10646) character whose value is the hexadecimal value HHHH (one to four hex digits)</span><br><span class="line">  \UHHHHHHHH    the Unicode (ISO/IEC 10646) character whose value is the hexadecimal value HHHHHHHH (one to eight hex digits)</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：read-指令"><a href="#知识点：read-指令" class="headerlink" title="知识点：read 指令"></a>知识点：read 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 从 stdin 中读取一行，或从 file descriptor 中读取一行</span><br><span class="line">  - 对读到的行进行 split words，将第一个 word 赋值给第一个 name，将第二个 word 赋值给第二个 name，等等</span><br><span class="line">  - 如果 word 比 name 多，则最后一个 name 储存所有剩余的 word，使用读入的 delimiter 进行分隔</span><br><span class="line">  - 如果 word 比 name 少，则多于的 name 被赋 empty values</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  read [OPTIONS] [NAMES]</span><br><span class="line"></span><br><span class="line">* 退出状态</span><br><span class="line">  - 若 input 以 EOF 中介，则 read 返回 false</span><br><span class="line">  - 若输入超时，则 read 返回 false</span><br><span class="line"></span><br><span class="line">* 相关变量</span><br><span class="line">  - REPLY</span><br><span class="line">    - 如果 read 没有指定储存值的 NAME 或 Array，则将 read 读取到的输入保存到 REPLY 变量中</span><br><span class="line">  - TMOUT</span><br><span class="line">    - 对于 read 命令和 select 命令，设置输入的等待时间</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* -u fd</span><br><span class="line">  - 让 read 从 file descriptor 中读取 input</span><br><span class="line"></span><br><span class="line">* -a Array</span><br><span class="line">  - 将 word 储存到一个索引数组中</span><br><span class="line">  - 指定的 NAMES 会被忽略</span><br><span class="line"></span><br><span class="line">* -d Delim</span><br><span class="line">  - 使用 Delim 而不是 newline，识别为 input 的结束</span><br><span class="line"></span><br><span class="line">* -n N</span><br><span class="line">  - 指定字符数</span><br><span class="line">  - read 会在读取到指定数量的字符数后便返回，space 等分隔符也参与计数</span><br><span class="line">  - 仍然可以使用 newline 来结束 read 的输入</span><br><span class="line"></span><br><span class="line">* -p Prompt</span><br><span class="line">  - 指定提示字符</span><br><span class="line">  - 提示字符只会在交互式输入时使用，会输出到 stderr 上</span><br><span class="line"></span><br><span class="line">* -s</span><br><span class="line">  - Silent mode</span><br><span class="line">  - 在交互式输入时，不回显已经输入的字符</span><br><span class="line"></span><br><span class="line">* -t Timeout</span><br><span class="line">  - 指定 read 的超时时间</span><br><span class="line">  - 可以使用浮点数</span><br><span class="line">  - 如果 read 是从文件中获取输入，则不会生效</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：break、continue-指令"><a href="#知识点：break、continue-指令" class="headerlink" title="知识点：break、continue 指令"></a>知识点：break、continue 指令</h3><ol>
<li><strong>break 指令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 退出 for、while、until、select 循环</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  break [N]</span><br><span class="line"></span><br><span class="line">* N</span><br><span class="line">  - 退出 N 层循环，取值须大于等于 1，默认 1</span><br><span class="line">  - 如果 N 大于实际的层级，则退出全部循环</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>continue 指令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 进行下一轮的 for、while、until、select 循环</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  continue [N]</span><br><span class="line"></span><br><span class="line">* N</span><br><span class="line">  - 指定循环的层级，取值须大于等于 1，默认 1</span><br><span class="line">  - 如果 N 大于实际的层级，则对最顶层的循环 top-level loop 进行下一轮</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：test、true、false-指令"><a href="#知识点：test、true、false-指令" class="headerlink" title="知识点：test、true、false 指令"></a>知识点：test、true、false 指令</h3><ol>
<li><strong>test 指令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 对 shell 条件表达式，给出其逻辑值</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  test expression</span><br><span class="line">  [ expression ]</span><br><span class="line"></span><br><span class="line">* 格式说明</span><br><span class="line">  - 中括号格式 &#x27;[ ]&#x27;，中括号和 expression 之间必须有空格</span><br><span class="line">  - 省略 expression，则 test</span><br><span class="line"></span><br><span class="line">* test 指令相比 &#x27;[[ ]]&#x27; 格式，额外支持四种种条件表达式的逻辑运算</span><br><span class="line">  - ! expression                    取反</span><br><span class="line">  - ( expression )                  改变优先级</span><br><span class="line">  - expression1 -a expression2      AND</span><br><span class="line">  - expression1 -o expression2      OR</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>true、false 指令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 永远返回 true、false 的退出状态</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：exit、logout、return-指令"><a href="#知识点：exit、logout、return-指令" class="headerlink" title="知识点：exit、logout、return 指令"></a>知识点：exit、logout、return 指令</h3><ol>
<li><strong>exit、logout 指令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 退出 shell</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  logout</span><br><span class="line">  exit [N]</span><br><span class="line"></span><br><span class="line">* N</span><br><span class="line">  - 退出 shell 时，返回 N 的退出状态</span><br><span class="line">  - 默认为最后一个执行的 command 的退出状态</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>return 指令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 退出 function 或 source script</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  return [N]</span><br><span class="line"></span><br><span class="line">* N</span><br><span class="line">  - 退出函数时，返回 N 的退出状态，默认 0</span><br><span class="line">  - 默认为函数体中最后一个执行的 command 的退出状态</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：set-指令"><a href="#知识点：set-指令" class="headerlink" title="知识点：set 指令"></a>知识点：set 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 设置 shell 的属性 shell attributes</span><br><span class="line">  - 设置 current shell 的位置参数</span><br><span class="line">  - 显示变量</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  set [OPTIONS] [ARGS]</span><br><span class="line">  set                     &lt;== 显示当前环境中，所有变量以及其变量值，所有函数以及其函数定义</span><br><span class="line"></span><br><span class="line">* ARGS</span><br><span class="line">  - 储存为当前 shell 的位置参数，安装 $1、$2... 的顺序进行</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - &#x27;-&#x27; 表示启用某个选项</span><br><span class="line">  - &#x27;+&#x27; 表示禁用某个选项</span><br><span class="line">  - $- 中记录了当前的 set option flag 列表</span><br><span class="line"></span><br><span class="line">* -a</span><br><span class="line">  - option-name：allexport</span><br><span class="line">  - 所有的变量和函数，自动成为环境变量和环境函数</span><br><span class="line"></span><br><span class="line">* -b</span><br><span class="line">  - option-name：notify</span><br><span class="line">  - 立刻报告后台进程的信息，而不是等下一次 bash 有输出时一起报告</span><br><span class="line"></span><br><span class="line">* -m</span><br><span class="line">  - option-name：monitor</span><br><span class="line">  - 作业控制的监控模式 Monitor mode</span><br><span class="line">  - 交互式 shell 默认开启</span><br><span class="line"></span><br><span class="line">* -n</span><br><span class="line">  - option-name：noexec</span><br><span class="line">  - 读取 command 但不执行 command</span><br><span class="line">  - 通常用来检查脚本的语法</span><br><span class="line"></span><br><span class="line">* -v</span><br><span class="line">  - option-name：verbose</span><br><span class="line">  - 回显模式</span><br><span class="line">  - bash 在执行命令前，先回显读取到的输入</span><br><span class="line"></span><br><span class="line">* -x</span><br><span class="line">  - option-name：xtrace</span><br><span class="line">  - 执行追踪 execution trace</span><br><span class="line">  - bash 在执行命令前，先回显读取到的输入的解析结果</span><br><span class="line"></span><br><span class="line">* -</span><br><span class="line">* --</span><br><span class="line">  - 标识 option 的结束，之后的所有 agrument 会被赋值给位置变量</span><br><span class="line">  - &#x27;--&#x27; 表示即使 arg 是以 &#x27;-&#x27; 开头的 word，依然解析为一个 value 而不是 option</span><br><span class="line"></span><br><span class="line">* -o option-name</span><br><span class="line">  - 以 option-name 的方式指定某个选项</span><br><span class="line">  - option-name</span><br><span class="line">    - history     启用历史命令功能</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：source-指令"><a href="#知识点：source-指令" class="headerlink" title="知识点：source 指令"></a>知识点：source 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 在 current shell environment 中执行 FileName 的内容</span><br><span class="line">  - 默认使用 current shell environment 的位置参数，如果提供了 ARGS，则将 ARGS 作为位置参数使用</span><br><span class="line">  - 搜索文件的顺序</span><br><span class="line">    - 首先搜索 PATH</span><br><span class="line">    - 其次搜索 current directory</span><br><span class="line">    - 如果 FileName 中包含 &#x27;/&#x27;，则不进行搜索</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  . FileName [ARGS]</span><br><span class="line">  source FileName [ARGS]</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：ulimit-指令"><a href="#知识点：ulimit-指令" class="headerlink" title="知识点：ulimit 指令"></a>知识点：ulimit 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 打印或设置当前 shell 以及其所有子孙的资源使用限制</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  ulimit [OPTIONS] [limit]</span><br><span class="line"></span><br><span class="line">* limit</span><br><span class="line">  - 设置的资源限制</span><br><span class="line">  - 可以是带单位的数值，也可以是特殊值如 hard、soft、unlimited</span><br><span class="line">  - 单位</span><br><span class="line">    - 默认为 1024-byte increments</span><br><span class="line">    - -t 单位为秒</span><br><span class="line">    - -p 单位为 512-byte blocks</span><br><span class="line">    - -P、-T、-b、-k、-n、-u 无范围数</span><br><span class="line"></span><br><span class="line">* -a</span><br><span class="line">  - 打印所有的 ulimit 设置</span><br><span class="line">  - 默认打印软限制，指定 &#x27;-H&#x27; 打印硬限制</span><br><span class="line"></span><br><span class="line">* -S</span><br><span class="line">* -H</span><br><span class="line">  - 设置软、硬限制</span><br><span class="line">  - 省略 &#x27;-S&#x27; 和 &#x27;-H&#x27;，则表示同时设置软限制和硬限制</span><br><span class="line"></span><br><span class="line">* 资源控制选项</span><br><span class="line">  -b                The maximum socket buffer size</span><br><span class="line">  -c                The maximum size of core files created</span><br><span class="line">  -d                The maximum size of a process&#x27;s data segment</span><br><span class="line">  -e                The maximum scheduling priority (&quot;nice&quot;)</span><br><span class="line">  -f    写文件      The maximum size of files written by the shell and its children</span><br><span class="line">  -i                The maximum number of pending signals</span><br><span class="line">  -k                The maximum number of kqueues that may be allocated</span><br><span class="line">  -l    内存        The maximum size that may be locked into memory</span><br><span class="line">  -m                The maximum resident set size (many systems do not honor this limit)</span><br><span class="line">  -n    打开文件    The maximum number of open file descriptors (most systems do not allow this value to be set)</span><br><span class="line">  -p                The pipe size in 512-byte blocks (this may not be set)</span><br><span class="line">  -q                The maximum number of bytes in POSIX message queues</span><br><span class="line">  -r                The maximum real-time scheduling priority</span><br><span class="line">  -s                The maximum stack size</span><br><span class="line">  -t    CPU 时间    The maximum amount of cpu time in seconds</span><br><span class="line">  -u                The maximum number of processes available to a single user</span><br><span class="line">  -v                The maximum amount of virtual memory available to the shell and, on some systems, to its children</span><br><span class="line">  -x    锁          The maximum number of file locks</span><br><span class="line">  -P                The maximum number of pseudoterminals</span><br><span class="line">  -T    线程        The maximum number of threads</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：umask-指令"><a href="#知识点：umask-指令" class="headerlink" title="知识点：umask 指令"></a>知识点：umask 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - 设置当前用户的 file-creation mask</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  umask [-p] [-S] [mode]</span><br><span class="line"></span><br><span class="line">* mode</span><br><span class="line">  - 默认采用 8 进制数格式</span><br><span class="line"></span><br><span class="line">* -S</span><br><span class="line">  - mode 采用 symbolic form，即 rwx 的格式</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="Chapter06-软件管理"><a href="#Chapter06-软件管理" class="headerlink" title="Chapter06 软件管理"></a>Chapter06 软件管理</h1><hr>
<h2 id="6-1-软件管理介绍"><a href="#6-1-软件管理介绍" class="headerlink" title="6.1 软件管理介绍"></a>6.1 软件管理介绍</h2><hr>
<h3 id="知识点：Linux-的软件包管理器与在线安装机制"><a href="#知识点：Linux-的软件包管理器与在线安装机制" class="headerlink" title="知识点：Linux 的软件包管理器与在线安装机制"></a>知识点：Linux 的软件包管理器与在线安装机制</h3><ol>
<li><strong>软件包管理器</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">* 源码编译式安装</span><br><span class="line">  - 用户下载源码</span><br><span class="line">  - 用户下载编译器，如 gcc</span><br><span class="line">  - 用户手动对源码进行编译，生成二进制程序文件</span><br><span class="line">  - 优点</span><br><span class="line">    - 定制程度高</span><br><span class="line">    - 适合个性化场景</span><br><span class="line">  - 缺点</span><br><span class="line">    - 麻烦</span><br><span class="line">    - 普适性不足</span><br><span class="line"></span><br><span class="line">* 软件包管理器式安装</span><br><span class="line">  - 用户使用厂商的系统 distribution</span><br><span class="line">  - distribution 厂商事先在固定的硬件平台和系统平台上编译好相关的软件，将二进制程序文件、配置文件、man 文件等打包好</span><br><span class="line">  - 用户下载 distribution 厂商提供的软件包，直接解压即可安装，不需要编译</span><br><span class="line"></span><br><span class="line">* 依赖检测</span><br><span class="line">  - 软件包在安装之前，会自行检测用户的系统环境和依赖软件，符合条件后才会进行安装</span><br><span class="line"></span><br><span class="line">* 数据库</span><br><span class="line">  - 用户在安装厂商给出的软件时，会将安装产生的信息保存到相应的数据库中</span><br><span class="line">  - 这样用户在卸载软件、升级软件时，可以直接查询数据库中的内容方便进行</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>软件包在线安装机制</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 目的</span><br><span class="line">  - 主要为了解决软件的依赖问题</span><br><span class="line">  - 在安装软件之间，如果检测到依赖的软件，就会先在线下载相关的依赖软件，再安装本来的软件</span><br><span class="line"></span><br><span class="line">* 两大流派</span><br><span class="line">  * redhat、centos 软件管理使用 rpm，在线安装使用 yum</span><br><span class="line">  * debian、ubuntu 软件管理使用 dpck，在线安装使用 apt</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：which-指令"><a href="#知识点：which-指令" class="headerlink" title="知识点：which 指令"></a>知识点：which 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 搜索指令的程序文件</span><br><span class="line">  - 根据 PATH 搜索</span><br><span class="line">  - 不能搜索 shell build-in</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  which [-a] &lt;command&gt;</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -a      返回所有的匹配项</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：type-指令"><a href="#知识点：type-指令" class="headerlink" title="知识点：type 指令"></a>知识点：type 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - bash-builtin</span><br><span class="line">  - 可以搜索指令，也可查看某个对象的类型</span><br><span class="line">  - 可以搜索普通指令，也可以搜索 bash-builtin，也可以搜索 shell-function</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  type OPTIONS NAME [...]</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -a    返回所有匹配项</span><br><span class="line">  -f    不搜索 function</span><br><span class="line">  -p    只返回程序文件</span><br><span class="line">  -P    只进行 PATH 的搜索</span><br><span class="line">  -t    返回指令的类型</span><br><span class="line"></span><br><span class="line">* 输出 Output</span><br><span class="line">  alias         指令为别名</span><br><span class="line">  builtin       指令为 bash-builtin</span><br><span class="line">  file          指令为程序文件</span><br><span class="line">  function      指令为 bash-function</span><br><span class="line">  keyword</span><br><span class="line">  shell word</span><br><span class="line">  shell function</span><br><span class="line">  shell builtin</span><br><span class="line">  disk file</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：whereis-指令"><a href="#知识点：whereis-指令" class="headerlink" title="知识点：whereis 指令"></a>知识点：whereis 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 用来搜索指令的程序文件、配置文件、源码文件、man 文件等</span><br><span class="line"></span><br><span class="line">* 从特定的目录进行搜索，而非 PATH</span><br><span class="line">  - 程序文件一般为 /bin、/sbin</span><br><span class="line">  - 配置文件一般为 /etc</span><br><span class="line">  - man 文件一般为 /usr/share/man</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  whereis -l</span><br><span class="line">  whereis [-bmsu] [-BMS DIR[ ...]] [-f] NAME [...]</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -l        列出 whereis 默认的搜索目录</span><br><span class="line">  -b        只搜索程序文件</span><br><span class="line">  -m        只搜索 man 文件</span><br><span class="line">  -s        只搜索源码文件</span><br><span class="line">  -u        搜索不是程序文件、man 文件、源码文件的其他类型的文件</span><br><span class="line">  -B DIR    只在指定的目录下搜索二进制文件</span><br><span class="line">  -M DIR    只在指定的目录下搜索 man 文件</span><br><span class="line">  -S DIR    只在指定的目录下搜索源码文件</span><br><span class="line">  -f        不显示文件名前的路径名</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="6-2-rpm"><a href="#6-2-rpm" class="headerlink" title="6.2 rpm"></a>6.2 rpm</h2><hr>
<h3 id="知识点：rpm-和-srpm"><a href="#知识点：rpm-和-srpm" class="headerlink" title="知识点：rpm 和 srpm"></a>知识点：rpm 和 srpm</h3><ol>
<li><strong>rpm 介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - RedHat Package Manager</span><br><span class="line">  - redhat 系列的包管理器</span><br><span class="line"></span><br><span class="line">* rpm 使用数据库来记录当前系统的软件安装信息</span><br><span class="line">  - 厂商在打包 rpm 包时，会在 header 添加相关信息，如依赖软件</span><br><span class="line">  - 用户使用 rpm 安装软件时，会将 rpm 包头的信息和用户主机中的 rpm 数据库进行对比，以检查软件的依赖性，检查通过则会进行安装</span><br><span class="line">  - 安装时，会将安装信息记录到 rpm 数据库中</span><br><span class="line"></span><br><span class="line">* 优点</span><br><span class="line">  - 便于安装，不需要编译</span><br><span class="line">  - 安装前会检查依赖性和系统资源，防止错误安装</span><br><span class="line">  - 便于了解软件的信息</span><br><span class="line">  - 建立软件信息数据库，便于查询，升级，卸载</span><br><span class="line"></span><br><span class="line">* 缺点</span><br><span class="line">  - 软件安装的环境必须与打包时的环境需求一致或相当</span><br><span class="line">    - 通常不同的 distribution 的 RPM 包不能通用</span><br><span class="line">    - 甚至相同 distribution 的不同版本之间也无法互通</span><br><span class="line">  - 需要满足软件的依赖关系</span><br><span class="line">  - 卸载时需要特别小心，最底层的软件不可先卸载，否则可能造成整个系统的问题</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>srpm 介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Source RPM</span><br><span class="line">  - 软件的源码包，一般副文件名都是 .src.rpm</span><br><span class="line">  - redhat 在放出 rpm 包时，会一起放出相应的 srpm 包，这样用户就可以根据自己的情况来自行编译软件</span><br><span class="line"></span><br><span class="line">* srpm 包里的内容</span><br><span class="line">  - 软件的源码</span><br><span class="line">  - 软件的依赖性说明</span><br><span class="line">  - 所有 RPM 文件所提供的资料</span><br><span class="line">  - 编译所需要的参数设置文件，也就是 configure 与 makefile</span><br><span class="line"></span><br><span class="line">* srpm 包的用法</span><br><span class="line">  - 先将该软件以 RPM 管理的方式编译，此时 srpm 会被编译成为 RPM 文件</span><br><span class="line">  - 然后将编译完成的 RPM 文件安装到 Linux 系统当中</span><br><span class="line">  - 与原版 rpm 包相比，srpm 使用户可以根据自己的系统环境对生成的 rpm 包进行修改，产生适合自己系统环境的 rpm 包</span><br><span class="line"></span><br><span class="line">* Centos 和 srpm</span><br><span class="line">  - redhat 放出 srpm 后，社区中的人将这些 srpm 收集起来，重新编译成为所需要的软件，再重复释出成为 CentOS</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：rpm-包"><a href="#知识点：rpm-包" class="headerlink" title="知识点：rpm 包"></a>知识点：rpm 包</h3><ol>
<li><strong>rpm 相关目录</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* /etc</span><br><span class="line">  - 存放配置文件</span><br><span class="line"></span><br><span class="line">* /usr/bin</span><br><span class="line">  - 存放可执行程序文件</span><br><span class="line"></span><br><span class="line">* /usr/lib</span><br><span class="line">  - 存放库文件</span><br><span class="line"></span><br><span class="line">* /usr/share/doc</span><br><span class="line">  - 存放说明文件</span><br><span class="line"></span><br><span class="line">* /usr/share/man</span><br><span class="line">  - 存放 man 文件</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>rpm 包的命名规则</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">* Program-Version-Pack.el_Version-Hardware.rpm</span><br><span class="line"></span><br><span class="line">* Pack</span><br><span class="line">  - 打包次数</span><br><span class="line">  - 多次打包的原因一般是修复一些小 bug</span><br><span class="line"></span><br><span class="line">* el_Version</span><br><span class="line">  - 指定针对的 distribution 的版本，如 el7 表示要安装到 centos7</span><br><span class="line"></span><br><span class="line">* Hardware</span><br><span class="line">  - rpm 包对应的硬件平台，常见为 i386、i586、i686、x86_64、noarch</span><br><span class="line">    - 由于硬件平台都支持向下兼容，所以理论上旧版本的软件可以安装的高级的硬件上</span><br><span class="line">    - 但实际使用中通常都选择搭配的 RPM 包，以保证性能</span><br><span class="line">  - noarch</span><br><span class="line">    - 没有任何硬件上的限制</span><br><span class="line">    - 一般这种类型的 RPM 文件里面没有 binary program，通常都是 shell script</span><br><span class="line">  - i386，i586，i686</span><br><span class="line">    - i 指的是 Intel 相容的 CPU</span><br><span class="line">    - i386，针对 386 CPU 平台所设计，几乎适用于所有的 x86 平台</span><br><span class="line">  - x86_64</span><br><span class="line">    - 针对 64 位的 CPU 进行设计</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>rpm 包的数字签名</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 数字签名</span><br><span class="line">  - 安装 rpm 包时，会校验原厂公钥文件</span><br><span class="line">  - rpm 指令安装 rpm 包时，会先读取 RPM 文件的签名信息，与本机系统内安装的原厂数字签名信息进行对比</span><br><span class="line">  - 若签名相同则安装</span><br><span class="line">  - 若签名不同则给予警告并且停止安装</span><br><span class="line"></span><br><span class="line">* CentOS 使用的数字签名系统为 GNU 计划的 GnuPG(GNU Privacy Guard，GPG)</span><br><span class="line"></span><br><span class="line">* 在本机上安装数字签名</span><br><span class="line">  - 使用 rpm --import，导入镜像中自带的数字签名文件 GPG-KEY*</span><br><span class="line">  - 数字签名文件可以当作一个普通的 rpm 包查看，通过指令 rpm -qa | grep pubkey</span><br><span class="line">  - 不同的 distribution 的数字签名放在不同的地方，一般文件名中都含有 GPG-KEY</span><br><span class="line">  - Centos 的数字签名文件放在 /etc/pki/rpm-gpg 下</span><br><span class="line">  - 实际一般在安装系统时，已经自动导入了数字签名文件</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：rpm-指令"><a href="#知识点：rpm-指令" class="headerlink" title="知识点：rpm 指令"></a>知识点：rpm 指令</h3><ol>
<li><strong>常用用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">* rpm -qa</span><br><span class="line">  - 查询所有已安装的包</span><br><span class="line"></span><br><span class="line">* rpm -ql PackageName</span><br><span class="line">  - 查询包中所包含的文件</span><br><span class="line"></span><br><span class="line">* rpm -qf FilenName</span><br><span class="line">  - 查询文件属于哪个包</span><br><span class="line"></span><br><span class="line">* rpm -Va</span><br><span class="line">  - 校验所有已安装的包</span><br><span class="line"></span><br><span class="line">* rpm -ivh PackageName01 PackageName02 PackageName03</span><br><span class="line">  - 一次性安装多个软件</span><br><span class="line"></span><br><span class="line">* rpm -ivh http://website.name/path/pkgname.rpm</span><br><span class="line">  - 直接从 url 下载并安装</span><br><span class="line"></span><br><span class="line">* rpm -evh PackageName</span><br><span class="line">  - 卸载包</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - rpm 指令使用时，必须指定一种模式 mode</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  rpm -q [&lt;package-select-options&gt;] [&lt;package-query-options&gt;]   查询模式</span><br><span class="line">  rpm -i [&lt;install-options&gt;] &lt;PackageFile&gt; [...]                安装模式</span><br><span class="line">  rpm -U [&lt;install-options&gt;] &lt;PackageFile&gt; [...]                强制升级模式</span><br><span class="line">  rpm -F [&lt;install-options&gt;] &lt;PackageFile&gt; [...]                非强制升级模式</span><br><span class="line">  rpm -V [&lt;package-select-options&gt;] [&lt;verify-options&gt;]          校验模式</span><br><span class="line">  rpm -e [&lt;erase-options&gt;] &lt;package_name&gt;[ ...]                 卸载模式</span><br><span class="line"></span><br><span class="line">* 通用选项 GENERAL OPTIONS</span><br><span class="line">  -v    显示 verbose information</span><br><span class="line">  -vv   显示 debugging information</span><br><span class="line"></span><br><span class="line">* 包选择选项 package-select-options</span><br><span class="line">  PackageName                             直接指定包名</span><br><span class="line">  -a, --all                               选择所有已安装的包</span><br><span class="line">  -f FileName, --file FileName            选择具有某个文件的包</span><br><span class="line">  -g GroupName, --group GroupName         选择某个组中的包</span><br><span class="line">  --whatprovides Capability               选择提供了某个 Capability 的包</span><br><span class="line">  --whatrequires Capability               选择依赖某个 capability 的包</span><br><span class="line">  -p PackageFile, --package PackageFile   直接对包文件进行操作，可以是 ftp 地址或 http 地址</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>查询模式</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* -q, --query</span><br><span class="line">  - 指定查询模式</span><br><span class="line"></span><br><span class="line">* 包查询选项 package-query-options</span><br><span class="line">  -i, --info          查看包的介绍信息</span><br><span class="line">  -l, --list          列出包的所有文件</span><br><span class="line">  -c, --configfiles   列出包的所有配置文件</span><br><span class="line">  -d, --docfiles      列出包的说明文件</span><br><span class="line">  --provides          列出包提供的 capabilities</span><br><span class="line">  -R, --requires      列出包依赖的 capabilities</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>安装升级模式</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">* -i, --install</span><br><span class="line">  - 指定安装模式</span><br><span class="line"></span><br><span class="line">* -U, --upgrade</span><br><span class="line">  - 指定强制升级模式</span><br><span class="line">  - 不管包是否已安装，均强制安装新版本的包</span><br><span class="line"></span><br><span class="line">* -F, --Freshen</span><br><span class="line">  - 指定非强制升级模式</span><br><span class="line">  - 如果包未安装则安装最新版本，如果包已安装则不再操作</span><br><span class="line"></span><br><span class="line">* 安装升级选项 install-option</span><br><span class="line">  -h                    显示进度条</span><br><span class="line">  --test                仅测试一下包是否可以被安装，主要用来检查是否有依赖性问题</span><br><span class="line">  --force               强制安装，相当于 --replacefiles 与 --replacepkgs 的结合</span><br><span class="line">  --replacefiles        覆盖旧软件，强制安装</span><br><span class="line">  --replacepkgs         已安装的软件，强制安装</span><br><span class="line">  --nodeps              忽略依赖性检测</span><br><span class="line">  --nosignature         忽略数字证书检测</span><br><span class="line">  --prefix &lt;newpath&gt;    将软件安装到其他路径</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>卸载模式</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* -e, --erase</span><br><span class="line">  - 指定卸载模式</span><br><span class="line"></span><br><span class="line">* --test</span><br><span class="line">  - 仅进行测试，主要用于检查包的依赖关系，看是否被其他的包所依赖</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>校验模式</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* -V</span><br><span class="line">  - 指定校验模式</span><br><span class="line">  - 将包中的信息和 rpm 数据库中的信息进行校验</span><br><span class="line">  - 仅当不一致时才会输出</span><br><span class="line"></span><br><span class="line">* 验证模式的输出项</span><br><span class="line">  - 五种字符，指定有问题的文件的文件类型</span><br><span class="line">    c   配置文件 config file</span><br><span class="line">    d   说明文件 documentation</span><br><span class="line">    g   鬼文件 ghost file，通常是该文件不被某个软件所包含，较少发生</span><br><span class="line">    l   授权文件 license file</span><br><span class="line">    r   指南文件 readme file</span><br><span class="line">  - 九个字符的序列，表示问题的类型</span><br><span class="line">    S         &lt;== 文件的大小有变化 file Size differs</span><br><span class="line">    M         &lt;== 文件的类型或文件的权限(rwx)有变化 Mode differs</span><br><span class="line">    5         &lt;== 指纹码有变化 MD5 sum differs</span><br><span class="line">    D         &lt;== 设备的主/次代码有变化 Device major/minor number mis-match</span><br><span class="line">    L         &lt;== readLink(2) path mis-match</span><br><span class="line">    U         &lt;== 文件的拥有者有变化 User ownership differs</span><br><span class="line">    G         &lt;== 文件的所属组有变化 Group ownership differs</span><br><span class="line">    T         &lt;== 文件的建立时间有变化 mTime differs</span><br><span class="line">    P         &lt;== 功能有变化 caPabilities differ</span><br><span class="line">    missing   &lt;== 文件丢失</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="6-3-yum"><a href="#6-3-yum" class="headerlink" title="6.3 yum"></a>6.3 yum</h2><hr>
<h3 id="知识点：yum-介绍"><a href="#知识点：yum-介绍" class="headerlink" title="知识点：yum 介绍"></a>知识点：yum 介绍</h3><ol>
<li><strong>相关文件</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 指令文件</span><br><span class="line">  - /usr/bin/yum</span><br><span class="line"></span><br><span class="line">* 配置文件</span><br><span class="line">  - /etc/yum.conf</span><br><span class="line">  - /etc/yum.repos.d/*.repo</span><br><span class="line"></span><br><span class="line">* man 文件</span><br><span class="line">  - /usr/share/man/man8/yum.8</span><br><span class="line">  - /usr/share/man/man5/yum.conf.5</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：yum-指令"><a href="#知识点：yum-指令" class="headerlink" title="知识点：yum 指令"></a>知识点：yum 指令</h3><ol>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - yum 指令在使用时必须指定一个 Command</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  yum [OTPIONS] Command [Package ...]</span><br><span class="line"></span><br><span class="line">* 通用选项 General Options</span><br><span class="line">  -y, --assumeyes       统一回答 yes</span><br><span class="line">      --assumeno        统一回答 no</span><br><span class="line">  -q, --quiet           安静模式</span><br><span class="line">  -v, --verbose         显示更多信息</span><br><span class="line">  -C, --cacheonly       不联网，仅让 yum 运行在 cache 中</span><br><span class="line">  --showduplicates      显示包的更多版本</span><br><span class="line">  --installroot=Dir     将软件安装到其他路径</span><br><span class="line">  --downloadonly        不安装或更新某个包，仅进行下载</span><br><span class="line">  --downloaddir=Dir     指定 yum 下载包的目录</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>命令 Command</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">* 安装升级卸载</span><br><span class="line">  install             安装</span><br><span class="line">  reinstall           重新安装</span><br><span class="line">  update | upgrade    升级</span><br><span class="line">  check-update        检查是否有可升级的包</span><br><span class="line">  remove, erase       卸载</span><br><span class="line"></span><br><span class="line">* 列表</span><br><span class="line">  list                  列出 repo 中软件包列表</span><br><span class="line">  list all</span><br><span class="line">  list avaliable</span><br><span class="line">  list installed</span><br><span class="line">  list recent</span><br><span class="line">  list updates          列出目前本机可以升级的软件有哪些</span><br><span class="line">  list distro-extras    列出不符合当前 distribution 的包</span><br><span class="line">  list extras           列出不是通过 yum 安装的包</span><br><span class="line"></span><br><span class="line">* 查询</span><br><span class="line">  info                      查看 package 的详细信息</span><br><span class="line">  deplist                   查看 package 需要的 dependency 以及提供了此依赖的包</span><br><span class="line">  search                    搜索 package</span><br><span class="line">  provides | whatprovides   搜索提供了某个 feature 或 file 的 package</span><br><span class="line"></span><br><span class="line">* 缓存</span><br><span class="line">  makecache         重建 yum 缓存</span><br><span class="line">  makecache fast    仅重建 repo 相关的缓存</span><br><span class="line">  clean             清除缓存</span><br><span class="line">  clean all         清除全部 yum 缓存</span><br><span class="line">  clean package     清除已经下载的包</span><br><span class="line"></span><br><span class="line">* 组</span><br><span class="line">  groups</span><br><span class="line">    groups list</span><br><span class="line">    groups install</span><br><span class="line">    groups remove</span><br><span class="line"></span><br><span class="line">* repo</span><br><span class="line">  repolist            查看 repo 列表</span><br><span class="line">    repolist all</span><br><span class="line">    repolist enabled</span><br><span class="line">    repolist disabled</span><br><span class="line">  repoinfo            查看 repo 信息</span><br><span class="line">    repoinfo all</span><br><span class="line">    repoinfo enabled</span><br><span class="line">    repoinfo disabled</span><br><span class="line">  repo-pkgs | repository-packages</span><br><span class="line">    repository-packages Repo list               仅查看指定的 repo 中的包的列表</span><br><span class="line">    repository-packages Repo info Package       仅查看指定的 repo 中的包的信息</span><br><span class="line">    repository-packages Repo check-update       仅针对指定的 repo 进行检查是否有可升级的包</span><br><span class="line">    repository-packages Repo install Package    仅从某一个 repo 中安装软件包</span><br><span class="line">    repository-packages Repo upgrade Package    仅从某一个 repo 中升级软件包</span><br><span class="line"></span><br><span class="line">* distro-sync | distribution-synchronization    进行 distribution 同步</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：yum-repo-配置范例"><a href="#知识点：yum-repo-配置范例" class="headerlink" title="知识点：yum repo 配置范例"></a>知识点：yum repo 配置范例</h3><hr>
<h3 id="知识点：yumdownloader-指令"><a href="#知识点：yumdownloader-指令" class="headerlink" title="知识点：yumdownloader 指令"></a>知识点：yumdownloader 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 功能</span><br><span class="line">  - 从 repo 中手动下载 rpm 包文件</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  yumdownloader [Options] Package</span><br><span class="line"></span><br><span class="line">* 范例</span><br><span class="line">  yumdownloader --resolve --destdir ./temp/ vsftpd</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* -h, --help</span><br><span class="line">  - 查看帮助</span><br><span class="line"></span><br><span class="line">* --destdir DIR</span><br><span class="line">  - 指定下载目录</span><br><span class="line"></span><br><span class="line">* --resolve</span><br><span class="line">  - 解析依赖，同时把依赖的 rpm 包一起下载</span><br><span class="line"></span><br><span class="line">* --urls</span><br><span class="line">  - 不下载 rpm 包，而是列出需要下载的 rpm 包的 url</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="6-4-dpkg"><a href="#6-4-dpkg" class="headerlink" title="6.4 dpkg"></a>6.4 dpkg</h2><hr>
<h3 id="知识点：dpkg-介绍"><a href="#知识点：dpkg-介绍" class="headerlink" title="知识点：dpkg 介绍"></a>知识点：dpkg 介绍</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* dpkg</span><br><span class="line">  - Debian 派系的包管理器</span><br><span class="line">  - dpkg 机制由 Debian Linux 社区所开发，是 Debian 用于对已下载到本地软件包、已安装的软件包进行管理的软件包管理工具</span><br><span class="line">  - dpkg 机制使软件包的安装变的简单，并且能提供安装后的软件信息</span><br><span class="line">  - 派生于 Debian 的其它 Linux distributions 大多使用 dpkg 机制，如 B2D、Ubuntu</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>dpkg 相关文件</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">* /etc/dpkg/dpkg.cfg</span><br><span class="line">  - dpkg 的配置文件</span><br><span class="line"></span><br><span class="line">* /var/log/dpkg.log</span><br><span class="line">  - dpkg 的日志文件</span><br><span class="line"></span><br><span class="line">* /var/lib/dpkg</span><br><span class="line">  - dpkg 的数据库</span><br><span class="line">  - dpkg 使用文本文件作为数据库来维护系统中软件</span><br><span class="line"></span><br><span class="line">* /var/lib/dpkg/available</span><br><span class="line">  - 存放目前安装的软件包的信息</span><br><span class="line">  - 存放以前安装过的软件包的信息，即使软件包被卸载，这些信息依然保留</span><br><span class="line">  - 仅对使用 dselect 时有效，APT has its own system to keep track of available packages</span><br><span class="line"></span><br><span class="line">* /var/lib/dpkg/status</span><br><span class="line">  - 存放当前安装的所有安装软件包的状态信息</span><br><span class="line"></span><br><span class="line">* /var/lib/dpkg/info/</span><br><span class="line">  - 备份软件包控制目录中的各种控制信息文件</span><br><span class="line">  - 用于后期软件包的查询和卸载</span><br><span class="line"></span><br><span class="line">* /var/lib/dpkg/info/XXX.list</span><br><span class="line">  - 软件包的文件清单</span><br><span class="line"></span><br><span class="line">* /var/lib/dpkg/info/XXX.mdasums</span><br><span class="line">  - 软件包的文件 MD5 编码</span><br><span class="line"></span><br><span class="line">* /var/dpkg.*.N.gz</span><br><span class="line">  - 每日对 dpkg 数据进行的备份，N 代表轮替</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>dpkg status</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 用于表示 deb 包当前在本机的状态</span><br><span class="line">  - 包含三个字段</span><br><span class="line">    - Package states</span><br><span class="line">    - Package flags</span><br><span class="line">    - Package selection states，与 dselect 指令相关</span><br><span class="line"></span><br><span class="line">* Package states</span><br><span class="line">  - installed         The package is correctly unpacked and configured.</span><br><span class="line">  - not-installed     The package is not installed on your system.</span><br><span class="line">  - half-installed    The installation of the package has been started, but not completed for some reason.</span><br><span class="line">  - unpacked          The package is unpacked, but not configured.</span><br><span class="line">  - config-files      Only the configuration files of the package exist on the system.</span><br><span class="line">  - half-configured   The package is unpacked and configuration has been started, but not yet completed for some reason.</span><br><span class="line">  - triggers-awaited  The package awaits trigger processing by another package.</span><br><span class="line">  - triggers-pending  The package has been triggered.</span><br><span class="line"></span><br><span class="line">* Package flags</span><br><span class="line">  - ok          A package marked ok is in a known state, but might need further processing.</span><br><span class="line">  - reinstreq   A package marked reinstreq is broken and requires reinstallation. These packages cannot be removed, unless forced with option --force-remove-reinstreq.</span><br><span class="line"></span><br><span class="line">* Package selection states</span><br><span class="line">  - 主要给 dselect 指令使用，没什么用，不需要深究，因为 dselect 指令没什么用</span><br><span class="line">  - install   The package is selected for installation.</span><br><span class="line">  - hold      A package marked to be on hold is not handled by dpkg, unless forced to do that with option --force-hold.</span><br><span class="line">  - deinstall The package is selected for deinstallation (i.e. we want to remove all files, except configuration files).</span><br><span class="line">  - purge     The package is selected to be purged (i.e. we want to remove everything from system directories, even configuration files).</span><br><span class="line">  - unknown   The package selection is unknown. A package that is also in a not-installed state, and with an ok flag will be forgotten in the next database store.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：deb-包"><a href="#知识点：deb-包" class="headerlink" title="知识点：deb 包"></a>知识点：deb 包</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* Debian 世界中，软件包都称为 deb 包</span><br><span class="line"></span><br><span class="line">* deb 软件包名规则</span><br><span class="line">  - Package_Version-Build_Architecture.deb</span><br><span class="line">  - 如 nano_1.3.10-2_i386.deb</span><br><span class="line">    Package Name: nano      软件包名称</span><br><span class="line">    Version Number: 1.3.10  版本号</span><br><span class="line">    Build Number: 2         修订号</span><br><span class="line">    Architecture: i386      平台</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>deb 包的内容</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">* 主要包括两方面</span><br><span class="line">  - Package control data</span><br><span class="line">  - Upstream data</span><br><span class="line"></span><br><span class="line">* Upstream data</span><br><span class="line">  - 需要解压复制到系统中的文件，如二进制程序文件、库程序文件、配置文件模板等</span><br><span class="line"></span><br><span class="line">* Package control data</span><br><span class="line">  - 软件包控制数据，主要是一些脚本文件，用来指导该软件包应该如何安装，dpkg 就是根据这些文件来安装该软件包的</span><br><span class="line">  - control</span><br><span class="line">    - 文本文件</span><br><span class="line">    - 软件包的 metadata，对软件包进行基本的描述，如括软件包的名称、版本、作者、功能描述、依赖关系、架构等</span><br><span class="line">  - conffiles</span><br><span class="line">    - 文本文件</span><br><span class="line">    - configure files 的缩写</span><br><span class="line">    - 记录该软件包所包含的配置文件的完整路径</span><br><span class="line">  - preinst</span><br><span class="line">    - 脚本文件</span><br><span class="line">    - pre install 的缩写</span><br><span class="line">    - 安装软件包之前要做的工作，通常为建立相关目录、检测系统环境等</span><br><span class="line">  - postinst</span><br><span class="line">    - 脚本文件</span><br><span class="line">    - post install 的缩写</span><br><span class="line">    - 安装软件包之后要做的工作，通常为开启 daemon、建立链接等</span><br><span class="line">  - prerm</span><br><span class="line">    - 脚本文件</span><br><span class="line">    - pre remove 的缩写</span><br><span class="line">    - 移除、重新安装、升级软件包之前要做的工作</span><br><span class="line">  - postrm</span><br><span class="line">    - 脚本文件</span><br><span class="line">    - post remove 的缩写</span><br><span class="line">    - 移除、重新安装、升级软件包之后要做的工作</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>deb 包的安装过程</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1. Extract the control files of the new package.</span><br><span class="line"></span><br><span class="line">2. If another version of the same package was installed before the new installation, execute prerm script of the old package.</span><br><span class="line"></span><br><span class="line">3. Run preinst script, if provided by the package.</span><br><span class="line"></span><br><span class="line">4. Unpack the new files, and at the same time back up the old files, so that if something goes wrong, they can be restored.</span><br><span class="line"></span><br><span class="line">5. If another version of the same package was installed before the new installation, execute the postrm script of the old package. Note that this script is executed after the preinst script of the new package, because new files are written at the same time old files are removed.</span><br><span class="line"></span><br><span class="line">6. Configure the package.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>deb 包的卸载过程</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. Run prerm script</span><br><span class="line"></span><br><span class="line">2. Remove the installed files</span><br><span class="line"></span><br><span class="line">3. Run postrm script</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>deb 包的 purge 过程</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. Remove the package, if not already removed.</span><br><span class="line"></span><br><span class="line">2. Run postrm script.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：dpkg-指令"><a href="#知识点：dpkg-指令" class="headerlink" title="知识点：dpkg 指令"></a>知识点：dpkg 指令</h3><ol>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - dpkg 指令用来安装、移除、验证 deb 包</span><br><span class="line">  - dpkg 指令必须有且只有一个 ACTION</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  dpkg ACITON [OPTIONS] ARGUMENTS</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>ACTION</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - ACTION 如果配合 -R or --recursive 选项一起使用，则参数不能是 PackageFile 而需要是 Dir</span><br><span class="line"></span><br><span class="line">* -i, --install PackageFile ...</span><br><span class="line">  - 安装 package</span><br><span class="line"></span><br><span class="line">* --unpack PackageFile ...</span><br><span class="line">  - 仅解包，不安装</span><br><span class="line"></span><br><span class="line">* -r, --remove Package</span><br><span class="line">  - 移除</span><br><span class="line">  - 并非彻底删除，会保留 conffiles 和需要由 postrm 清除的文件</span><br><span class="line"></span><br><span class="line">* -P, --purge Package</span><br><span class="line">  - 净化</span><br><span class="line">  - 彻底删除，包括 conffiles 和需要由 postrm 清除的文件</span><br><span class="line"></span><br><span class="line">* -V, --verify Package</span><br><span class="line">  - 验证</span><br><span class="line">  - 检查 package 的文件是否完整，根据 package 的 metadata 进行检验</span><br><span class="line">  - 使用 md5sum 进行校验</span><br><span class="line"></span><br><span class="line">* -C, --audit Package</span><br><span class="line">  - 审计</span><br><span class="line">  - 检查 package 的文件是否完整，根据 dpkg 数据库中的记录进行检验</span><br><span class="line"></span><br><span class="line">* --print-architecture</span><br><span class="line">  - 打印当前系统所支持的包的 architecture</span><br><span class="line"></span><br><span class="line">* --compare-versions version-1 OP version-2</span><br><span class="line">  - 比价两个版本号的大小</span><br><span class="line">  - 具体用法去看 man dpkg</span><br><span class="line"></span><br><span class="line">* dpkg-deb actions，dpkg-query actions</span><br><span class="line">  - 去看 man dpkg</span><br><span class="line">  - 对于这些 action，dpkg 是将相关的信息传递给 dpkg-query 或 dpkg-deb，然后由这两个命令实际执行</span><br><span class="line">  - 推荐直接使用 dpkg-query 或 dpkg-deb</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* -Doctal, --debug=octal</span><br><span class="line">  - 输出 debug 信息</span><br><span class="line">  - -Dh 或 --debug=help 可以查看 octal 代表什么含义</span><br><span class="line"></span><br><span class="line">* --no-act, --dry-run, --simulate</span><br><span class="line">  - 不实际产生修改，仅查看会产生什么样的变更</span><br><span class="line">  - 此选项需要放在 ACTION 之前</span><br><span class="line"></span><br><span class="line">* -R, --recursive</span><br><span class="line">  - 对目录，及其所有子目录下的 .deb 文件执行 ACTION</span><br><span class="line">  - 通常配合 install、unpack 一起使用</span><br><span class="line"></span><br><span class="line">* -G</span><br><span class="line">  - 不安装旧版本的软件</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：dpkg-query-指令"><a href="#知识点：dpkg-query-指令" class="headerlink" title="知识点：dpkg-query 指令"></a>知识点：dpkg-query 指令</h3><ol>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - dpkg-query 指令，可以用来查询 dpkg 数据库，输出信息</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  dpkg-query [OPTIONS] ACTION</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>ACTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* -l, --list [PackageNamePattern] ...</span><br><span class="line">  - 以人类阅读友好的方式列出 dpkg 数据库中记录的包</span><br><span class="line">  - PackageNamePattern 可以使用 wildcard</span><br><span class="line">  - 输出格式不可调整</span><br><span class="line">  - 输出的开头的三列，分别使用 single character 来表示 Desired action、Package status、Error flags，详情见 man dpkg-query</span><br><span class="line"></span><br><span class="line">* -W, --show [PackageNamePattern] ...</span><br><span class="line">  - 以机器阅读友好的方式列出 dpkg 数据库中记录的包</span><br><span class="line">  - 与 -l 功能类似，只是输出内容有所区别</span><br><span class="line">  - 可以通过 --showformat 调整输出的内容</span><br><span class="line"></span><br><span class="line">* -L, --listfiles PackageName ...</span><br><span class="line">  - 列出 package 中包含的文件</span><br><span class="line"></span><br><span class="line">* -S, --search FilenameSearchPattern ...</span><br><span class="line">  - 搜索 File 属于哪个 Package</span><br><span class="line"></span><br><span class="line">* -s, --status [PackageName...]</span><br><span class="line">  - 查看 package 的详细介绍，即 status 信息</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* -f, --showformat=Format</span><br><span class="line">  - 调整 -W ACTION 的输出内容</span><br><span class="line">  - Format 格式详情见 man dpkg-query &#x27;--showformat&#x27; 部分</span><br><span class="line">  - dpkg-query -W 的默认 Format 为 -f &#x27;$&#123;binary:Package&#125;\t$&#123;Version&#125;\n&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：dpkg-deb-指令"><a href="#知识点：dpkg-deb-指令" class="headerlink" title="知识点：dpkg-deb 指令"></a>知识点：dpkg-deb 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 对 deb 包进行各种操作</span><br><span class="line">  - 将本地文件或目录打包为 deb 包</span><br><span class="line">  - 从 deb 包中抽取文件</span><br><span class="line">  - 查看 deb 包的内容</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  dpkg-deb [OPTIONS] ACTION</span><br><span class="line"></span><br><span class="line">* 常用</span><br><span class="line">  dpkg-deb -I Pachage     查看 deb 包的介绍信息，即 status</span><br><span class="line">  dpkg-deb -c Pachage     查看 deb 包中包含的文件</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="6-5-apt"><a href="#6-5-apt" class="headerlink" title="6.5 apt"></a>6.5 apt</h2><hr>
<h3 id="知识点：apt-介绍"><a href="#知识点：apt-介绍" class="headerlink" title="知识点：apt 介绍"></a>知识点：apt 介绍</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* apt 介绍</span><br><span class="line">  - Debian 派系提供的在线包管理器</span><br><span class="line">  - 主要目的，解决依赖性问题 dependency</span><br><span class="line">  - simple dependency，一个 package 需用另一个 package 才能正常运行</span><br><span class="line">  - conflicting dependency，一个 package 不可以与另一个 package 一起安装</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>相关文件</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* /etc/apt/sources.list、/etc/apt/sources.list.d/</span><br><span class="line">  - repo 配置文件</span><br><span class="line"></span><br><span class="line">* /etc/apt/apt.conf、/etc/apt/apt.conf.d/</span><br><span class="line">  - 配置文件</span><br><span class="line"></span><br><span class="line">* /etc/apt/preferences、/etc/apt/preferences.d/</span><br><span class="line">  - 偏好配置文件</span><br><span class="line"></span><br><span class="line">* /var/cache/apt/archives/</span><br><span class="line">  - 本地缓存，用来保留下载的 deb 包文件</span><br><span class="line"></span><br><span class="line">* /var/lib/apt/lists/</span><br><span class="line">  - 本地缓存，用来保存每一个 repo 的 index 数据</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：source-list"><a href="#知识点：source-list" class="headerlink" title="知识点：source.list"></a>知识点：source.list</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - apt 的 repo 配置文件</span><br><span class="line">  - /etc/apt/sources.list 为主配置文件</span><br><span class="line">  - /etc/apt/sources.list.d/ 存放分段配置</span><br><span class="line"></span><br><span class="line">* 支持两种格式的语法</span><br><span class="line">  - one-line style，文件以 .list 结尾</span><br><span class="line">  - deb822 style，文件以 .source 结尾</span><br><span class="line">    - 结构化语法</span><br><span class="line">    - 相比 one-line 方式更高效，但因为较新可能存在支持不足的情况</span><br><span class="line">    - 详细可以去看 man</span><br><span class="line"></span><br><span class="line">* &#x27;#&#x27; 用来表示注释</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>one-line style 语法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 最传统的语法，所有版本的 apt 都支持</span><br><span class="line">  - 每一行表示一个 repo，repo 的顺序代表了其优先级</span><br><span class="line">  - 采用 typical two-level Debian archive, distribution/component</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  TYPE [ OTPION=VALUE ... ] URI SUITE COMPONENT ...</span><br><span class="line">  - OPTION 的中括号也是语法的一部分</span><br><span class="line">  - OPTION 部分不需要关注，提供的都是一些高级功能</span><br><span class="line"></span><br><span class="line">* TYPE</span><br><span class="line">  - deb 表示 deb 二进制包源</span><br><span class="line">  - deb-sec 表示 deb 源码包源</span><br><span class="line"></span><br><span class="line">* URI</span><br><span class="line">  - 指定要访问的源的地址</span><br><span class="line">  - 可以使用 http、https、file 指定本地目录、cdrom 指定 CD</span><br><span class="line"></span><br><span class="line">* SUITE</span><br><span class="line">  - 指定要访问的源的版本</span><br><span class="line">  - 如 debian 的 stable、testing，或 CodeName</span><br><span class="line">  - 如 ubuntu 的 CodeName-updates、CodeName-security 等</span><br><span class="line"></span><br><span class="line">* COMPONENT</span><br><span class="line">  - 指定要访问的组件</span><br><span class="line">  - 如 debian 的 main、contrib、non-free</span><br><span class="line">  - 如 ubuntu 的 main、restrict 等</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* deb file:/home/apt/debian stable main contrib non-free</span><br><span class="line"></span><br><span class="line">* deb-src file:/home/apt/debian stable main contrib non-free</span><br><span class="line"></span><br><span class="line">* deb http://deb.debian.org/debian buster main</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：apt-get-指令"><a href="#知识点：apt-get-指令" class="headerlink" title="知识点：apt-get 指令"></a>知识点：apt-get 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - apt 中执行在线安装、卸载 package 的指令</span><br><span class="line">  - 从 repo 下载 deb</span><br><span class="line">  - 本机安装、卸载 deb</span><br><span class="line"></span><br><span class="line">* apt-get 的操作是基于 package 的 name 而不是 package 的内容</span><br><span class="line">  - Unlike dpkg, apt-get does not understand .deb files, it works with the package&#x27;s proper name and can only install .deb archives from a Source.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - apt-get 指令必须指定一个 ACTION，或 &#x27;-h&#x27; &#x27;-v&#x27; 选项</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  apt-get [OPTIONS] ACTION</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>Action</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">* update</span><br><span class="line">  - 对 apt 数据库进行更新</span><br><span class="line">  - 从 source 对 apt 数据库进行同步，下载 package index files</span><br><span class="line">  - 本质上是下载 source 上提供的 Package.gz 文件</span><br><span class="line"></span><br><span class="line">* install PackageName[+|-][=PackageVersion|/TargetRelease] ...</span><br><span class="line">  - 安装、升级、卸载 package</span><br><span class="line">  - latter feature</span><br><span class="line">    - 如果 PackageName 以一个连字符 hyphen &#x27;-&#x27; 结尾，则实际表示 remove</span><br><span class="line">  - PackageName=PackageVersion</span><br><span class="line">    - 手动指定安装的软件的版本</span><br><span class="line">  - PackageName/TargetRelease</span><br><span class="line">    - 手动指定要使用的 repo</span><br><span class="line"></span><br><span class="line">* reinstall PackageName</span><br><span class="line">  - 相当于 install --reinstall</span><br><span class="line"></span><br><span class="line">* remove PackageName</span><br><span class="line">  - 移除</span><br><span class="line">  - 会保留 configuration files</span><br><span class="line"></span><br><span class="line">* purge PackageName</span><br><span class="line">  - 净化</span><br><span class="line">  - 不保留 configuration files</span><br><span class="line"></span><br><span class="line">* download PackageName</span><br><span class="line">  - 下载 package 的 deb 包</span><br><span class="line"></span><br><span class="line">* source PackageName</span><br><span class="line">  - 下载 package 的源码包</span><br><span class="line">  - 将 newest available version 下载到 current directory</span><br><span class="line">  - 会自动进行解包</span><br><span class="line"></span><br><span class="line">* upgrade</span><br><span class="line">  - 全局软件升级</span><br><span class="line">    - 将所有软件升级到最新版本</span><br><span class="line">    - 不会卸载已安装的软件，也不会安装本机没有的软件</span><br><span class="line">    - 如果升级后会影响到其他软件的正常使用，则不会进行升级</span><br><span class="line"></span><br><span class="line">* dist-upgrade</span><br><span class="line">  - 对全局软件进行基于 distribution 版本的升级</span><br><span class="line">  - 与 upgrade 不同，dist-upgrade 会考虑包的重要性，可能会因为重要的包而忽略不重要的包的可用性，因此 dist-upgrade 操作可能导致软件被卸载</span><br><span class="line"></span><br><span class="line">* check</span><br><span class="line">  - 对 apt 数据库进行检查</span><br><span class="line"></span><br><span class="line">* clean</span><br><span class="line">  - 清除本地缓存中保留的 package 文件</span><br><span class="line"></span><br><span class="line">* autoclean</span><br><span class="line">  - 清除本地缓存中保留的 package 文件</span><br><span class="line">  - 与 clean 的区别，仅会清除无法再下载的 package，如已经有新版本的软件、已经从 repo 中移除的软件</span><br><span class="line"></span><br><span class="line">* autoremove</span><br><span class="line">  - 自动卸载无用的 package</span><br><span class="line">  - 如仅用来提供 dependencies，且已经不再需要了的包</span><br><span class="line"></span><br><span class="line">* changelog PackageName</span><br><span class="line">  - 从 repo 处下载某个 package 的变更历史</span><br><span class="line"></span><br><span class="line">* indextargets</span><br><span class="line">  - 以 deb822 格式列出每一个 apt-get update 需要下载的文件的详细信息</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">* -y, --yes, --assume-yes</span><br><span class="line"></span><br><span class="line">* -V, --verbose-versions</span><br><span class="line"></span><br><span class="line">* --allow-unauthenticated</span><br><span class="line">  - 禁用 gpg 检查</span><br><span class="line"></span><br><span class="line">* -d, --download-only</span><br><span class="line">  - 配合 source 一起使用，只下载，不解包</span><br><span class="line"></span><br><span class="line">* -f, --fix-broken</span><br><span class="line">  - 配合 install、remove 一起使用</span><br><span class="line">  - 修复 apt 的 broken dependencies</span><br><span class="line"></span><br><span class="line">* --no-upgrade</span><br><span class="line">  - 配合 install 一起使用</span><br><span class="line">  - 若本机已经安装了某个软件时，则不对此软件进行升级</span><br><span class="line"></span><br><span class="line">* --only-upgrade</span><br><span class="line">  - 配合 install 一起使用</span><br><span class="line">  - 仅对本机已经安装的软件进行升级，不安装新软件</span><br><span class="line"></span><br><span class="line">* -s, --simulate, --just-print, --dry-run, --recon, --no-act</span><br><span class="line">  - 测试</span><br><span class="line">  - 不实际执行 action，仅进行检查、模拟，查看会对主机产生哪些变化</span><br><span class="line"></span><br><span class="line">* --print-uris</span><br><span class="line">  - 测试</span><br><span class="line">  - 配合 install 一起使用，不实际下载包文件，仅打印出待下载包的 uri、文件名、MD5 等信息</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：apt-cache-指令"><a href="#知识点：apt-cache-指令" class="headerlink" title="知识点：apt-cache 指令"></a>知识点：apt-cache 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - apt 的缓存搜索工具，用来对 apt cache 进行与 Package 有关的各种查询</span><br><span class="line">  - apt-cache 指令必须有且仅有一个 ACTION，或 &#x27;-h&#x27; &#x27;-v&#x27; 选项</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  apt-cache [OPTIONS] ACTION</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>ACTION</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* search regex</span><br><span class="line">  - 搜索 package</span><br><span class="line">  - regex 用于在 package name 和 package description 中进行搜索</span><br><span class="line"></span><br><span class="line">* show PackageName</span><br><span class="line">  - 显示所有 repo 中的 package 的 status 信息</span><br><span class="line"></span><br><span class="line">* showpkg PackageName ...</span><br><span class="line">  - 显示 package 的各种信息，尤其是 dependency 相关的信息</span><br><span class="line">  - Forward dependencies，此 package 需要依赖哪些 package</span><br><span class="line">  - reverse dependencies，哪些 package 需要依赖此 package</span><br><span class="line"></span><br><span class="line">* madison PackageName</span><br><span class="line">  - 列出某个 package 的所有版本和所在的 repo</span><br><span class="line"></span><br><span class="line">* showsrc PackageName</span><br><span class="line">  - 显示一个 package 的源码文件情况</span><br><span class="line"></span><br><span class="line">* stats</span><br><span class="line">  - 输出当前 apt 缓存的统计信息</span><br><span class="line"></span><br><span class="line">* dump</span><br><span class="line">  - 对 apt 缓存中所有的源中的所有的 package，给出一个简略的描述</span><br><span class="line"></span><br><span class="line">* pkgnames [prefix]</span><br><span class="line">  - 列出 apt 缓存中记录的所有 package</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* -n, --names-only</span><br><span class="line">  - 配合 search 使用，仅针对 package name 进行搜索</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：apt-file-指令"><a href="#知识点：apt-file-指令" class="headerlink" title="知识点：apt-file 指令"></a>知识点：apt-file 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - apt 的缓存搜索工具，用来搜索 package 中的文件</span><br><span class="line">  - 需要 repo 启用 content file，否则无法对此 repo 进行搜索，一般官方源都开启了 content file，但 cd 源一般没开启</span><br><span class="line"></span><br><span class="line">* Pattern</span><br><span class="line">  - 默认 Pattern 没有启用正则，也不支持 wildcard</span><br><span class="line">  - 指定选项 &#x27;-x&#x27; 后可以支持 perl 正则</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  apt-file [OPTIONS] ACTION</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>ACTION</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* search PATTERN</span><br><span class="line">* fild PATTERN</span><br><span class="line">  - 搜索哪个 package 包含 PATTERN 所代表的文件</span><br><span class="line">  - 不开启正则时，只针对文件的 basename 进行搜索</span><br><span class="line">  - 开启正则后，针对文件的 fullname 进行搜索，此时要求 Pattern 与 fullname 完全匹配</span><br><span class="line"></span><br><span class="line">* list PackageName</span><br><span class="line">* show PackageName</span><br><span class="line">  - 列出某个 package 包含的文件</span><br><span class="line">  - 与 dpkg-query -L 类似，只是不需要下载 package</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>OPTION</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">* -i, --ignore-case</span><br><span class="line">  - Pattern 忽略大小写</span><br><span class="line"></span><br><span class="line">* -x, --regexp</span><br><span class="line">  - Pattern 使用 perl 正则，缺点是搜索速度会变慢</span><br><span class="line"></span><br><span class="line">* -F, --fixed-string</span><br><span class="line">  - 认为 Pattern 与文件绝对路径完全匹配</span><br><span class="line"></span><br><span class="line">* --substring-match</span><br><span class="line">  - 认为 Pattern 是文件绝对路径的一个子字符串，与 &#x27;-F&#x27; 选项互斥</span><br><span class="line">  - search 和 show 命令会默认开启此选项</span><br><span class="line"></span><br><span class="line">* -l, --package-only</span><br><span class="line">  - 仅打印 PackageName，不打印 FileName</span><br><span class="line"></span><br><span class="line">* -a, --architecture Architecture [, ...]</span><br><span class="line">  - 在搜索 package 时，指定 Architecture</span><br><span class="line"></span><br><span class="line">* --filter-suites suite[,...]</span><br><span class="line">  - 在搜索 package 时，指定 distribution</span><br><span class="line"></span><br><span class="line">* 其他选项</span><br><span class="line">  -h, --help</span><br><span class="line">  -v, --verbose</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="6-6-repo"><a href="#6-6-repo" class="headerlink" title="6.6 repo"></a>6.6 repo</h2><hr>
<h3 id="知识点：常用-repo"><a href="#知识点：常用-repo" class="headerlink" title="知识点：常用 repo"></a>知识点：常用 repo</h3><ol>
<li><strong>centos 系列 repo</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - https://wiki.centos.org/AdditionalResources/Repositories</span><br><span class="line">  - http://fedoraproject.org/wiki/EPEL</span><br><span class="line"></span><br><span class="line">* base</span><br><span class="line">  - 基础仓库</span><br><span class="line">  - 包含 centos 的全部核心包</span><br><span class="line">  - 与 Everthing iso 文件中包含的包相同</span><br><span class="line"></span><br><span class="line">* updates</span><br><span class="line">  - 升级</span><br><span class="line">  - 主要包含 bug 修复、功能升级、安全相关的包</span><br><span class="line">  - python3 的安装包就放在 updates 中</span><br><span class="line">  - centos 7 开始默认启用</span><br><span class="line"></span><br><span class="line">* extras</span><br><span class="line">  - 包含一些额外的功能的包</span><br><span class="line">  - centos 7 开始默认启用</span><br><span class="line"></span><br><span class="line">* epel</span><br><span class="line">  - Extra Packages for Enterprise Linux</span><br><span class="line">  - 包含一些更多的功能的包</span><br><span class="line">  - 对系统存在不稳定性</span><br><span class="line">  - 通过执行 yum --enablerepo=extras install epel-release 来安装 epel 源</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>ubuntu 系列 repo</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - https://help.ubuntu.com/community/Repositories/Ubuntu</span><br><span class="line">  - https://askubuntu.com/questions/401941/what-is-the-difference-between-security-updates-proposed-and-backports-in-etc</span><br><span class="line">  - https://help.ubuntu.com/community/UbuntuBackports</span><br><span class="line"></span><br><span class="line">* distribution 级别</span><br><span class="line">  - CodeName</span><br><span class="line">    - Ubuntu 提供的原始 repo</span><br><span class="line">  - CodeName-security</span><br><span class="line">    - Important security updates</span><br><span class="line">    - 关键安全升级</span><br><span class="line">    - Ubuntu 强烈建议开启</span><br><span class="line">  - CodeName-updates</span><br><span class="line">    - Recommended Updates</span><br><span class="line">    - 漏洞修复，与不重要的漏洞修复有关的升级</span><br><span class="line">    - Ubuntu 推荐开启</span><br><span class="line">  - CodeName-proposed</span><br><span class="line">    - 测试功能</span><br><span class="line">    - 没有经过详细的测试的功能</span><br><span class="line">    - Ubuntu 不建议普通用户开启此 repo</span><br><span class="line">  - CodeName-backports</span><br><span class="line">    - Backported updates</span><br><span class="line">    - 向下兼容升级，当 Ubuntu 发布新版本后，新版本中新增的功能会以 backports 的方式提供给老版本</span><br><span class="line">    - 有可能导致老版本系统崩溃</span><br><span class="line">    - Ubuntu 建议用户视情况开启</span><br><span class="line"></span><br><span class="line">* component 级别</span><br><span class="line">  - Main</span><br><span class="line">    - 包含最基础，最通用的自由开源软件</span><br><span class="line">  - Universe</span><br><span class="line">    - 包含社区维护的自由开源软件</span><br><span class="line">  - Restricted</span><br><span class="line">    - 包含特定硬件的驱动</span><br><span class="line">  - Multiverse</span><br><span class="line">    - 版权、法律原因受限的软件</span><br><span class="line">  - Ubuntu 安装光盘包含 Main 和 Restricted 中的软件</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>debian 系列 repo</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* distribution 级别</span><br><span class="line">  - CodeName</span><br><span class="line">  - CodeName-updates</span><br><span class="line">  - CodeName-backports</span><br><span class="line">  - CodeName-backports-sloppy</span><br><span class="line">  - CodeName-proposed-updates</span><br><span class="line">  - stable</span><br><span class="line">  - unstable</span><br><span class="line">  - testing</span><br><span class="line"></span><br><span class="line">* component 级别</span><br><span class="line">  - main</span><br><span class="line">  - contrib</span><br><span class="line">  - non-free</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：reposync"><a href="#知识点：reposync" class="headerlink" title="知识点：reposync"></a>知识点：reposync</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - redhat 系列的 repo 同步工具</span><br><span class="line">  - reposync 通过调用 yum 实现功能，因而没有自己的配置文件</span><br><span class="line"></span><br><span class="line">* 从远程 repo 同步全部的 rpm 包</span><br><span class="line">  - 远程 repo 中有而 local 没有，则下载</span><br><span class="line">  - 远程 repo 中没有而 local 有，则删除</span><br><span class="line">  - 对比远程 repo 和 local，查看是否有更新的包</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  reposync [OPTIONS]</span><br><span class="line"></span><br><span class="line">* 常用</span><br><span class="line">  reposync -r updates -p /var/repos/updates          对 updates repo 进行同步，将包下载到指定的位置</span><br><span class="line">  reposync -r updates -p /var/repos/updates -n       对 updates repo 进行同步，将包下载到指定的位置，只下载最新的包</span><br><span class="line">  reposync -r updates -p /var/repos/updates -n -s    对 updates repo 进行同步，将包下载到指定的位置，只下载最新的包，删除没有的包</span><br><span class="line"></span><br><span class="line">* 选项 OPTIONS</span><br><span class="line">  -h, --help                              显示帮助</span><br><span class="line">  -r RepoID, --repoid=RepoID              指定要同步的 repo 的 id，如果不指定，则同步所有已经 enabled 的 repo</span><br><span class="line">  -p DestDir, --download_path=DestDir     指定本地的保存路径，默认为 current directory</span><br><span class="line">  -n, --newest-only                       仅下载最新的包</span><br><span class="line">  --source                                同时下载源码包</span><br><span class="line">  -c ConfigFile, --config=ConfigFile      让 yum 使用指定的配置文件，而不是默认的配置文件</span><br><span class="line">  -a Arch, --arch=Arch                    让 yum 下载指定的架构的包，而不是当前的主机的架构</span><br><span class="line">  -e CacheDir, --cachedir CacheDir        指定存放 metadata 的缓存目录</span><br><span class="line">  -d, --delete                            从 local 中删除远程 repo 中已经不存在的包</span><br><span class="line">  -u, --urls                              仅显示准备下载的包的 url，并不实际下载</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：createrepo"><a href="#知识点：createrepo" class="headerlink" title="知识点：createrepo"></a>知识点：createrepo</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - redhat 派系的创建 repo 的指令</span><br><span class="line">  - 可以将 reposync 创建的本地保存目录创建为 repo</span><br><span class="line">  - 自动创建 repo 的各种 metadata</span><br><span class="line">  - 自动对 rpm 包建立索引</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  createrepo DIR</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：apt-mirror"><a href="#知识点：apt-mirror" class="headerlink" title="知识点：apt-mirror"></a>知识点：apt-mirror</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - debian 派系的 repo 同步工具，适用于 debian、ubuntu</span><br><span class="line">  - 通过读取主配置文件 /etc/apt/mirror.list 来指导镜像动作</span><br><span class="line">  - 语法与 source.list 基本相同</span><br><span class="line"></span><br><span class="line">* 用法</span><br><span class="line">  - 在配置好 mirror.list 文件后，执行 &#x27;su - apt-mirror -c apt-mirror&#x27; 来开始操作</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>相关文件</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* /etc/apt/mirror.list</span><br><span class="line">  - 主配置文件</span><br><span class="line"></span><br><span class="line">* /var/spool/apt-mirror/mirror</span><br><span class="line">  - 保存路径</span><br><span class="line"></span><br><span class="line">* /etc/cron.d/apt-mirror</span><br><span class="line"></span><br><span class="line">* /var/spool/apt-mirror/skel</span><br><span class="line"></span><br><span class="line">* /var/spool/apt-mirror/var</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>主配置文件范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* 普通</span><br><span class="line">  deb http://example.com/debian stable main contrib non-free</span><br><span class="line"></span><br><span class="line">* 指定其他 arch</span><br><span class="line">  deb-powerpc http://example.com/debian stable main contrib non-free</span><br><span class="line"></span><br><span class="line">* 指定其他协议或端口</span><br><span class="line">  deb http://user:pass@example.com:8080/debian stable main contrib non-free</span><br><span class="line"></span><br><span class="line">* 指定源码仓库</span><br><span class="line">  deb-src http://example.com/debian stable main contrib non-free</span><br><span class="line"></span><br><span class="line">* 指定参数</span><br><span class="line">  set auth_no_challenge 1 deb https://user:pass@example.com:443/debian stable main contrib non-free</span><br><span class="line">  set no_check_certificate 1 deb https://example.com:443/debian stable main contrib non-free</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="Chapter07-ssh"><a href="#Chapter07-ssh" class="headerlink" title="Chapter07 ssh"></a>Chapter07 ssh</h1><hr>
<h2 id="7-1-ssh"><a href="#7-1-ssh" class="headerlink" title="7.1 ssh"></a>7.1 ssh</h2><hr>
<h3 id="知识点：ssh-相关软件包"><a href="#知识点：ssh-相关软件包" class="headerlink" title="知识点：ssh 相关软件包"></a>知识点：ssh 相关软件包</h3><ol>
<li><strong>openssh-client 包</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">* 常用</span><br><span class="line">  /usr/share/man/man1/ssh.1.gz</span><br><span class="line">  /usr/share/man/man5/ssh_config.5.gz</span><br><span class="line">  /usr/share/man/man1/scp.1.gz</span><br><span class="line">  /usr/share/man/man1/sftp.1.gz</span><br><span class="line">  /usr/share/man/man1/ssh-copy-id.1.gz</span><br><span class="line">  /usr/share/man/man1/ssh-keygen.1.gz</span><br><span class="line"></span><br><span class="line">* 其他</span><br><span class="line">  /usr/share/man/man1/ssh-add.1.gz</span><br><span class="line">  /usr/share/man/man1/ssh-agent.1.gz</span><br><span class="line">  /usr/share/man/man1/ssh-argv0.1.gz</span><br><span class="line">  /usr/share/man/man1/ssh-keyscan.1.gz</span><br><span class="line">  /usr/share/man/man8/ssh-keysign.8.gz</span><br><span class="line">  /usr/share/man/man8/ssh-pkcs11-helper.8.gz</span><br><span class="line">  /usr/share/man/man8/ssh-sk-helper.8.gz</span><br><span class="line">  /usr/share/man/man1/slogin.1.gz</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>openssh-server 包</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 常用</span><br><span class="line">  /usr/share/man/man8/sshd.8.gz</span><br><span class="line">  /usr/share/man/man5/authorized_keys.5.gz</span><br><span class="line">  /usr/share/man/man5/sshd_config.5.gz</span><br><span class="line"></span><br><span class="line">* 其他</span><br><span class="line">  /usr/share/man/man5/moduli.5.gz</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他 ssh 相关包</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* rsync 包</span><br><span class="line">  /usr/share/man/man1/rsync.1.gz</span><br><span class="line">  /usr/share/man/man5/rsyncd.conf.5.gz</span><br><span class="line"></span><br><span class="line">* pssh 包</span><br><span class="line">  /usr/share/man/man1/parallel-ssh.1.gz</span><br><span class="line">  /usr/share/man/man1/parallel-scp.1.gz</span><br><span class="line">  /usr/share/man/man1/parallel-rsync.1.gz</span><br><span class="line"></span><br><span class="line">* sshpass 包</span><br><span class="line">  /usr/share/man/man1/sshpass.1.gz</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="7-2-sshd"><a href="#7-2-sshd" class="headerlink" title="7.2 sshd"></a>7.2 sshd</h2><hr>
<h2 id="7-3-ssh-周边指令"><a href="#7-3-ssh-周边指令" class="headerlink" title="7.3 ssh 周边指令"></a>7.3 ssh 周边指令</h2><hr>
<h3 id="知识点：pssh-指令"><a href="#知识点：pssh-指令" class="headerlink" title="知识点：pssh 指令"></a>知识点：pssh 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - pssh，是可以并发 ssh 并在远程主机执行相应的命令的工具</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  pssh [OPTIONS] COMMAND [...]</span><br><span class="line">  pssh -I [COMMAND [...] ]</span><br><span class="line"></span><br><span class="line">* COMMAND</span><br><span class="line">  - 指定要在远程主机上执行的命令</span><br><span class="line">  - 如果指定多个命令，则除了最后一个命令，前面的每一个命令中必须包含分号 ;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">* -H,--host                                            &lt;== 直接在命令行中指定主机，可以一次性添加多个主机</span><br><span class="line">    * -H [&lt;user&gt;@]&lt;host&gt;[:&lt;port&gt;]</span><br><span class="line">    * --host [&lt;user&gt;@]&lt;host&gt;[:&lt;port&gt;]</span><br><span class="line">    * -H &quot;[&lt;user&gt;@]&lt;host&gt;[:&lt;port&gt;] [ ... ]&quot;</span><br><span class="line">    * --host &quot;[&lt;user&gt;@]&lt;host&gt;[:&lt;port&gt;] [ ... ]&quot;</span><br><span class="line"></span><br><span class="line">* -h &lt;host_file&gt;，--hosts &lt;host_file&gt;                  &lt;== 从文件中读取主机，格式为 [&lt;user&gt;@]&lt;host&gt;[:&lt;port&gt;]，可以包含空行和 # 注释，可以多次使用</span><br><span class="line"></span><br><span class="line">* -l &lt;user&gt;，--user &lt;user&gt;                             &lt;== 指定登录的用户名</span><br><span class="line"></span><br><span class="line">* -p &lt;parallelism&gt;，--par &lt;parallelism&gt;                &lt;== 指定每次并行的数量。如果 -h 指定主机并且数量较多时，适合使用此选项</span><br><span class="line"></span><br><span class="line">* -t &lt;timeout&gt;，--timeout &lt;timeout&gt;                    &lt;== 指定超时的时间，0 表示 pssh 不会进行超时断连</span><br><span class="line"></span><br><span class="line">* -o &lt;outdir&gt;，--outdir &lt;outdir&gt;                       &lt;== 将 STDOUT 保存到指定的目录中</span><br><span class="line"></span><br><span class="line">* -e &lt;errdir&gt;，--errdir &lt;errdir&gt;                       &lt;== 将 STDERR 保存到指定目录</span><br><span class="line"></span><br><span class="line">* -x &lt;args&gt;，--extra-args &lt;args&gt;                       &lt;== 发送额外的的 ssh 命令行参数，&lt;args&gt; 需要放在引号中并且可以包含多个项，可以多次指定</span><br><span class="line"></span><br><span class="line">* -X &lt;arg&gt;，--extra-arg &lt;arg&gt;                          &lt;== 只发送一个 ssh 命令行参数，需要放在引号中，可以多次指定</span><br><span class="line"></span><br><span class="line">* -O &lt;options&gt;，--options &lt;options&gt;                    &lt;== 直接在 pssh 上使用 ssh 的 -o 选项，可以多次指定</span><br><span class="line"></span><br><span class="line">* -A，--askpass                                        &lt;== 要求 pssh 提供 prompt 以输入密码。</span><br><span class="line"></span><br><span class="line">* -i，--inline                                         &lt;== 直接显示出 STDOUT 和 STDERR</span><br><span class="line"></span><br><span class="line">* --inline-stdout                                      &lt;== 仅显示出 STDOUT</span><br><span class="line"></span><br><span class="line">* -v，--verbose                                        &lt;== 繁冗模式</span><br><span class="line"></span><br><span class="line">* -I，--send-input</span><br><span class="line">  - 读取输入，并发送到每个 ssh 进程</span><br><span class="line">  - 可以实现在远程主机运行本地脚本</span><br><span class="line">  - 如果是交互模式，则结束时需要输入 Ctrl + D 表示 eof</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 登录到两台主机，让其打印出 hello world</span></span><br><span class="line">pssh -i -H &quot;host1 host2&quot; echo &quot;hello, world&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 通过文件指定远程主机，打印出 hello world</span></span><br><span class="line">pssh -i -h hosts.txt echo &quot;hello, world&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将输出保存到 output 目录中</span></span><br><span class="line">pssh -i -h hosts.txt -o output echo &quot;hello, world&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定 prompt 以输入密码</span></span><br><span class="line">pssh -i -h hosts.txt -A echo &quot;hello world&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在建立连结时直接添加远程主机的指纹到 known_hosts 文件中</span></span><br><span class="line">pssh -i -h hosts.txt -O StrictHostKeyChecking=no echo &quot;hello world&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 远程运行本地脚本</span></span><br><span class="line">pssh -H host1 -I &lt; script</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：sshpass-指令"><a href="#知识点：sshpass-指令" class="headerlink" title="知识点：sshpass 指令"></a>知识点：sshpass 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - sshpass 可以实现非交互方式的 ssh 密码登录</span><br><span class="line">  - sshpass 会运行一个 tty，并在此 tty 中运行 ssh 指令，并将密码传递给 ssh</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  sshpass [&lt;password_option&gt;] [&lt;other_options&gt;] COMMAND Argument</span><br><span class="line"></span><br><span class="line">* COMMAND Argument</span><br><span class="line">  - COMMAND 是实际要在 tty 中运行的 ssh 指令，可以是 ssh、scp 等</span><br><span class="line">  - Argument 是 ssh 指令的参数</span><br><span class="line"></span><br><span class="line">* 密码选项 password_option</span><br><span class="line">  - 密码选项用来指定 sshpass 获取密码的方式</span><br><span class="line">  - 如果未指定则表示从 STDIN/键盘输入来获取</span><br><span class="line">  - -p &lt;password&gt;        &lt;== 直接将密码放在命令行上</span><br><span class="line">  - -f &lt;filename&gt;        &lt;== 密码放在指定文件的第一行</span><br><span class="line">  - -d &lt;number&gt;          &lt;== 密码通过 file descriptor 来获得</span><br><span class="line">  - -e                   &lt;== 密码通过环境变量 SSHPASS 来获得</span><br><span class="line"></span><br><span class="line">* 其他选项 other_options</span><br><span class="line">  - -P &lt;prompt&gt;        &lt;== 设置密码的 prompt</span><br><span class="line">  - -v                 &lt;== 繁冗模式</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在命令行中指定密码</span></span><br><span class="line">sshpass -p PassWord ssh Host</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 非交互式做免密登录</span></span><br><span class="line">sshpass -p PassWord ssh-copy-id -o StrictHostKeyChecking=no Host</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在 rsync 中调用 sshpass，以建立 ssh 通道</span></span><br><span class="line">rsync --rsh=&#x27;sshpass -p 12345 ssh&#x27; Host:Path</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="Chapter08-网络"><a href="#Chapter08-网络" class="headerlink" title="Chapter08 网络"></a>Chapter08 网络</h1><hr>
<h2 id="8-1-网络介绍"><a href="#8-1-网络介绍" class="headerlink" title="8.1 网络介绍"></a>8.1 网络介绍</h2><hr>
<h3 id="知识点：网络相关包"><a href="#知识点：网络相关包" class="headerlink" title="知识点：网络相关包"></a>知识点：网络相关包</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">* NetworkManager</span><br><span class="line">  - nmcli</span><br><span class="line">  - ifup</span><br><span class="line">  - ifdown</span><br><span class="line"></span><br><span class="line">* netplan</span><br><span class="line">  - netplan</span><br><span class="line"></span><br><span class="line">* net-tools</span><br><span class="line">  - ifconfig</span><br><span class="line">  - netstat</span><br><span class="line">  - route</span><br><span class="line">  - arp</span><br><span class="line"></span><br><span class="line">* iproute</span><br><span class="line">  - ip</span><br><span class="line">  - ss</span><br><span class="line"></span><br><span class="line">* iputils</span><br><span class="line">  - ping</span><br><span class="line">  - arping</span><br><span class="line">  - tracepath</span><br><span class="line"></span><br><span class="line">* 其他工具</span><br><span class="line">  - netcat、ncat</span><br><span class="line">  - ethtool</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="8-2-主机名"><a href="#8-2-主机名" class="headerlink" title="8.2 主机名"></a>8.2 主机名</h2><hr>
<h3 id="知识点：主机名"><a href="#知识点：主机名" class="headerlink" title="知识点：主机名"></a>知识点：主机名</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* Hostname</span><br><span class="line"></span><br><span class="line">* DNS DomainName</span><br><span class="line"></span><br><span class="line">* FQDN</span><br><span class="line">  - Fully Qualified Domain Name</span><br><span class="line">  - 通常格式为 Hostname + DNS domain name</span><br><span class="line">  - FQDN 无法通过 hostname 等指令进行修改，通常是在 /etc/hosts 中进行记录</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>相关文件</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* /etc/hostname</span><br><span class="line">  - 记录本机主机名</span><br><span class="line">  - 在系统启动时，由 sethostname(2) 系统呼叫进行调用，来设置系统的 hostname</span><br><span class="line">  - 内容应当仅包含一行字符串，不超过 64 个字符，以 newline 结尾</span><br><span class="line">  - 尽量不要包含 sapce 和 dot</span><br><span class="line">  - &quot;#&quot; 表示注释</span><br><span class="line"></span><br><span class="line">* /etc/hosts</span><br><span class="line">  - 本地解析文件，记录主机名和 IP 的对应关系</span><br><span class="line">  - 每行记录一个 IP</span><br><span class="line">  - 支持使用 space、tab 进行间隔</span><br><span class="line">  - 对于重复配置，从上向下，以先解析到的为准；如果先解析到的 ip 地址不可用，才会使用后续的配置</span><br><span class="line">  - 格式：IP_address canonical_hostname [aliases...]</span><br><span class="line"></span><br><span class="line">* C:\WINDOWS\system32\drivers\etc\hosts</span><br><span class="line">  - windows 的 hosts 文件</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：hostname-指令"><a href="#知识点：hostname-指令" class="headerlink" title="知识点：hostname 指令"></a>知识点：hostname 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - hostname        查看或修改 the system&#x27;s host name</span><br><span class="line">  - domainname      查看或修改 the system&#x27;s NIS/YP domain name</span><br><span class="line">  - dnsdomainname   查看本机的 the system&#x27;s DNS domain name</span><br><span class="line">  - 只有超级用户可以进行修改</span><br><span class="line">  - 修改只是临时修改，并非永久修改，在重启后会恢复</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  hostname [OPTIONS] [HOSTNAME]</span><br><span class="line">  domainname [NisDomain] [-F File]</span><br><span class="line">  dnsdomainname</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">* -F, --file FILE</span><br><span class="line">  - 在设置主机名时，将文件中的内容设置为主机名</span><br><span class="line"></span><br><span class="line">* -d, --domain</span><br><span class="line">  - 打印主机的 DNS 域名</span><br><span class="line"></span><br><span class="line">* -f, --fqdn, --long</span><br><span class="line">  - 打印主机的 FQDN</span><br><span class="line"></span><br><span class="line">* -A, --all-fqdns</span><br><span class="line">  - 打印主机所有的 FQDN</span><br><span class="line"></span><br><span class="line">* -i, --ip-addresses</span><br><span class="line">  - 打印主机的主机名对应的 ip</span><br><span class="line"></span><br><span class="line">* -I, --all-ip-addresses</span><br><span class="line">  - 打印主机所有的 IP 地址</span><br><span class="line"></span><br><span class="line">* 其他</span><br><span class="line">  -V, --version</span><br><span class="line">  -h, --help</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：hostmanectl-指令"><a href="#知识点：hostmanectl-指令" class="headerlink" title="知识点：hostmanectl 指令"></a>知识点：hostmanectl 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 查看或修改系统的 hostname，以及 machine-info</span><br><span class="line">  - 查看或修改本地容器的 hostname，以及 machine-info</span><br><span class="line">  - 会同时修改当前内核和 /etc/hostname 文件</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  hostnamectl [OPTIONS] COMMAND</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>命令 COMMAND</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* status</span><br><span class="line">  - 查看当前的 hostname 等信息</span><br><span class="line"></span><br><span class="line">* set-hostname NAME</span><br><span class="line">  - 修改系统的 hostname</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* -M, --machine=</span><br><span class="line">  - 指定本地容器</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 配置修改主机名</span></span><br><span class="line">hostnamectl set-hostname centos121</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="8-3-DNS"><a href="#8-3-DNS" class="headerlink" title="8.3 DNS"></a>8.3 DNS</h2><hr>
<h3 id="知识点：DNS-介绍"><a href="#知识点：DNS-介绍" class="headerlink" title="知识点：DNS 介绍"></a>知识点：DNS 介绍</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* DNS 记录类型</span><br><span class="line">  - A 记录，域名对应 ipv4 IP</span><br><span class="line">  - AAAA 记录，域名对应 ipv6 IP</span><br><span class="line">  - CNAME 记录，域名对应域名</span><br><span class="line">  - TXT 记录，用于验证</span><br><span class="line">  - MX 记录，用于配置企业邮箱</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：dig-指令"><a href="#知识点：dig-指令" class="headerlink" title="知识点：dig 指令"></a>知识点：dig 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 用于对域名进行 dns 解析</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  dig [OPTIONS] Name</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="8-4-NetworkManager"><a href="#8-4-NetworkManager" class="headerlink" title="8.4 NetworkManager"></a>8.4 NetworkManager</h2><hr>
<h2 id="8-5-netplan"><a href="#8-5-netplan" class="headerlink" title="8.5 netplan"></a>8.5 netplan</h2><hr>
<h2 id="8-6-网络工具"><a href="#8-6-网络工具" class="headerlink" title="8.6 网络工具"></a>8.6 网络工具</h2><hr>
<h3 id="知识点：ifconfig-指令"><a href="#知识点：ifconfig-指令" class="headerlink" title="知识点：ifconfig 指令"></a>知识点：ifconfig 指令</h3><hr>
<h3 id="知识点：netstat-指令"><a href="#知识点：netstat-指令" class="headerlink" title="知识点：netstat 指令"></a>知识点：netstat 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* 作用，打印各种网络相关的信息</span><br><span class="line">  - 网络连接 network connections</span><br><span class="line">  - 路由表 routing tables</span><br><span class="line">  - 接口统计信息 interface statistics</span><br><span class="line">  - masquerade connections</span><br><span class="line">  - multicast memberships</span><br><span class="line"></span><br><span class="line">* 说明</span><br><span class="line">  - netstat 已基本废弃</span><br><span class="line">  - ss 指令代替 netstat</span><br><span class="line">  - ip route 指令代替 netstat -r</span><br><span class="line">  - link 指令代替 netstat -i</span><br><span class="line">  - maddr 指令代替 netstat -g</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>格式</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* netstat [ADDRESS_FAMILY_OPTIONS] [OPTIONS]</span><br><span class="line">  - 默认模式</span><br><span class="line">  - 打印 open socket 的信息</span><br><span class="line">  - 如果不指定 protocol，则打印所有 protocol 的信息</span><br><span class="line"></span><br><span class="line">* netstat -r [ADDRESS_FAMILY_OPTIONS] [OPTIONS]</span><br><span class="line">* netstat --route [ADDRESS_FAMILY_OPTIONS] [OPTIONS]</span><br><span class="line">  - 路由模式</span><br><span class="line">  - 打印路由表</span><br><span class="line"></span><br><span class="line">* netstat -i [OPTIONS]</span><br><span class="line">* netstat --interfaces [OPTIONS]</span><br><span class="line">  - 接口模式</span><br><span class="line">  - 打印网络接口</span><br><span class="line"></span><br><span class="line">* netstat -s [OPTIONS] [--tcp|-t] [--udp|-u] [--udplite|-U] [--sctp|-S] [--raw|-w]</span><br><span class="line">* netstat --statistics [OPTIONS] [--tcp|-t] [--udp|-u] [--udplite|-U] [--sctp|-S] [--raw|-w]</span><br><span class="line">  - 统计模式</span><br><span class="line">  - 打印指定 protocol 的统计信息</span><br><span class="line"></span><br><span class="line">* 其他模式</span><br><span class="line">  netstat --groups|-g</span><br><span class="line">  netstat --masquerade|-M</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>部分 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">* ADDRESS_FAMILY_OPTIONS</span><br><span class="line">  - 指定针对的 protocol 的类型</span><br><span class="line">  -4|--inet</span><br><span class="line">  -6|--inet6</span><br><span class="line">  --protocol=&#123;inet,inet6,unix,ipx,ax25,netrom,ddp,bluetooth,  ... &#125;</span><br><span class="line"></span><br><span class="line">* --tcp, -t</span><br><span class="line">* --udp, -u</span><br><span class="line">  - 指定针对的运输层协议类型</span><br><span class="line"></span><br><span class="line">* --verbose, -v</span><br><span class="line"></span><br><span class="line">* --numeric, -n</span><br><span class="line">  - 针对网络地址、端口、用户名等，显示数字形式的格式而不是解析后的结果</span><br><span class="line">  - 对应三个独立选项，--numeric-hosts、--numeric-ports、--numeric-users</span><br><span class="line"></span><br><span class="line">* -c, --continuous</span><br><span class="line">  - 持续性输出，每秒输出一次</span><br><span class="line"></span><br><span class="line">* -e, --extend</span><br><span class="line">  - 输出额外信息，可以最多复用两层</span><br><span class="line"></span><br><span class="line">* -p, --program</span><br><span class="line">  - 显示进程的 pid 和程序名</span><br><span class="line"></span><br><span class="line">* -l, --listening</span><br><span class="line">  - 仅显示监听端口</span><br><span class="line"></span><br><span class="line">*  -a, --all</span><br><span class="line">  - 显示所有端口，包括非监听端口和监听端口</span><br><span class="line">  - 用在接口模式中，还会显示未启用的接口</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：netstat-指令输出信息"><a href="#知识点：netstat-指令输出信息" class="headerlink" title="知识点：netstat 指令输出信息"></a>知识点：netstat 指令输出信息</h3><ol>
<li><strong>Active Internet connections</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 显示当前的活动连接，针对 -4 和 -6 协议</span><br><span class="line"></span><br><span class="line">* Proto</span><br><span class="line">  - 对应的协议</span><br><span class="line"></span><br><span class="line">* Recv-Q</span><br><span class="line">  - 对于 Established 连接，表示已接收到但仍未复制给进程的数据字节数</span><br><span class="line"></span><br><span class="line">* Send-Q</span><br><span class="line">  - 对于 Established 连接，表示仍未被远程主机 ACK 的数据字节数</span><br><span class="line"></span><br><span class="line">* Local Address</span><br><span class="line">  - 连接的本地地址和端口</span><br><span class="line"></span><br><span class="line">* Foreign Address</span><br><span class="line">  - 连接的远程地址和端口</span><br><span class="line"></span><br><span class="line">* State</span><br><span class="line">  - 显示此 socket 的状态</span><br><span class="line">  - ESTABLISHED</span><br><span class="line">  - SYN_SENT</span><br><span class="line">  - SYN_RECV</span><br><span class="line">  - FIN_WAIT1</span><br><span class="line">  - FIN_WAIT2</span><br><span class="line">  - TIME_WAIT</span><br><span class="line">  - CLOSE</span><br><span class="line">  - CLOSE_WAIT</span><br><span class="line">  - LAST_ACK</span><br><span class="line">  - LISTEN</span><br><span class="line">  - CLOSING</span><br><span class="line">  - UNKNOWN</span><br><span class="line"></span><br><span class="line">* PID/Program name</span><br><span class="line">  - 程序的 pid 和程序名，中间使用一个 &#x27;/&#x27; 间隔</span><br><span class="line">  - 需要指定 -p 选项</span><br><span class="line">  - 普通用户只能看到自己的连接的程序信息，只有超级用户能看到所有的连接的程序信息</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：ss-指令"><a href="#知识点：ss-指令" class="headerlink" title="知识点：ss 指令"></a>知识点：ss 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 查看 socket 的信息</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  ss [OPTIONS] [FILTER]</span><br><span class="line"></span><br><span class="line">* 基本选项</span><br><span class="line">  -h, --help</span><br><span class="line">  -V, --version</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>部分 OPTION</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">* -4, --ipv4</span><br><span class="line">* -6, --ipv6</span><br><span class="line">* -t, --tcp</span><br><span class="line">* -u, --udp</span><br><span class="line">* -w, --raw</span><br><span class="line">* -x, --unix</span><br><span class="line">  - 指定查看的 socket 的协议</span><br><span class="line"></span><br><span class="line">* -H, --no-header</span><br><span class="line">  - 输出内容中不显示列标题</span><br><span class="line"></span><br><span class="line">* -O, --oneline</span><br><span class="line">  - 在一行上显示每个 socket 的信息</span><br><span class="line"></span><br><span class="line">* -n, --numeric</span><br><span class="line">  - 对于服务，显示端口号而非服务名</span><br><span class="line"></span><br><span class="line">* -r, --resolve</span><br><span class="line">  - 对于地址，显示主机名而非 ip 地址</span><br><span class="line">  - 对于服务，显示服务名而非端口号</span><br><span class="line"></span><br><span class="line">* -a, --all</span><br><span class="line">  - 显示所有的 socket，包括监听的和非监听的</span><br><span class="line"></span><br><span class="line">* -l, --listening</span><br><span class="line">  - 仅显示监听的 socket</span><br><span class="line"></span><br><span class="line">* -p, --processes</span><br><span class="line">  - 显示 socket 的进程</span><br><span class="line"></span><br><span class="line">* -s, --summary</span><br><span class="line">  - 输出统计信息</span><br><span class="line"></span><br><span class="line">* -E, --events</span><br><span class="line">  - 监控输出，持续输出被摧毁的 socket</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>过滤器 FILTER</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 用来限定 ss 指令查看的 socket</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  [ state STATE-FILTER ] [ EXPRESSION ]</span><br><span class="line"></span><br><span class="line">* state STATE-FILTER</span><br><span class="line">  - 限定连接的状态</span><br><span class="line">  - STATE-FILTER 的可用值</span><br><span class="line">    - established</span><br><span class="line">    - syn-sent</span><br><span class="line">    - syn-recv</span><br><span class="line">    - fin-wait-1</span><br><span class="line">    - fin-wait-2</span><br><span class="line">    - time-wait</span><br><span class="line">    - closed</span><br><span class="line">    - close-wait</span><br><span class="line">    - last-ack</span><br><span class="line">    - listening</span><br><span class="line">    - closing</span><br><span class="line"></span><br><span class="line">* EXPRESSION</span><br><span class="line">  - 由操作数和操作符 OP 组成的表达式</span><br><span class="line">  - 支持使用括号</span><br><span class="line">  - 对于可能被 shell 误解析的情况，可以放在单引号中</span><br><span class="line">  - 两个表达式之间若没有指定 and/or，则表示 and</span><br><span class="line">  - 操作数</span><br><span class="line">    - src，表示源地址</span><br><span class="line">    - dst，表示目标地址</span><br><span class="line">    - sport ，表示源端口</span><br><span class="line">    - dport，表示目标端口</span><br><span class="line">    - 关于 sport 和 dport，可以使用端口号，也可以使用服务名</span><br><span class="line">  - 操作符</span><br><span class="line">    - and</span><br><span class="line">    - or</span><br><span class="line">  - 端口操作符</span><br><span class="line">    - &lt;=、le，小于或等于某个端口号</span><br><span class="line">    - &gt;=、ge，大于或等于某个端口号</span><br><span class="line">    - ==、eq，等于某个端口号</span><br><span class="line">    - !=、ne，不等于某个端口号</span><br><span class="line">    - &gt; 、gt，大于某个端口号</span><br><span class="line">    - &lt; 、lt，小于某个端口号</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* ss established &#x27;( sport = :http or sport = :https )&#x27; dst 193.233.7/24</span><br><span class="line">  - 查看所有与 193.233.7/24 网段的远程主机建立的 http 连接</span><br><span class="line"></span><br><span class="line">* ss dst 192.168.119.113:22</span><br><span class="line">  - 查看连接到远程主机的 ssh 连接</span><br><span class="line"></span><br><span class="line">* ss dport ssh</span><br><span class="line">* ss dport 22</span><br><span class="line">* ss dport = :22</span><br><span class="line">* ss dport = :ssh</span><br><span class="line">* ss dport == 22</span><br><span class="line">* ss dport == ssh</span><br><span class="line">  - 查看所有的连接到远程 sshd 的连接</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：ss-指令高级"><a href="#知识点：ss-指令高级" class="headerlink" title="知识点：ss 指令高级"></a>知识点：ss 指令高级</h3><ol>
<li><strong>计时器相关</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* -o, --options</span><br><span class="line">  - 输出计时器 timer 信息</span><br><span class="line"></span><br><span class="line">* 输出格式</span><br><span class="line">  timer:(timer_name,expire_time,retrans)</span><br><span class="line"></span><br><span class="line">* timer_name</span><br><span class="line">  - 计时器的名字，有五种</span><br><span class="line">  - on : means one of these timers: TCP retrans timer, TCP early retrans timer and tail loss probe timer</span><br><span class="line">  - keepalive: tcp keep alive timer</span><br><span class="line">  - timewait: timewait stage timer</span><br><span class="line">  - persist: zero window probe timer</span><br><span class="line">  - unknown: none of the above timers</span><br><span class="line"></span><br><span class="line">* expire_time</span><br><span class="line">  - 超时时间</span><br><span class="line"></span><br><span class="line">* retrans</span><br><span class="line">  - 已经发生过几次 retransmission</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>内存相关</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">* -m, --memory</span><br><span class="line">  - 输出 socket 的内存使用情况</span><br><span class="line"></span><br><span class="line">* 输出格式</span><br><span class="line">  skmem:(r&lt;rmem_alloc&gt;,rb&lt;rcv_buf&gt;,t&lt;wmem_alloc&gt;,tb&lt;snd_buf&gt;, f&lt;fwd_alloc&gt;,w&lt;wmem_queued&gt;,o&lt;opt_mem&gt;, bl&lt;back_log&gt;,d&lt;sock_drop&gt;)</span><br><span class="line"></span><br><span class="line">* rmem_alloc</span><br><span class="line">  the memory allocated for receiving packet</span><br><span class="line"></span><br><span class="line">* rcv_buf</span><br><span class="line">  the total memory can be allocated for receiving packet</span><br><span class="line"></span><br><span class="line">* wmem_alloc</span><br><span class="line">  the memory used for sending packet (which has been sent to layer 3)</span><br><span class="line"></span><br><span class="line">* snd_buf</span><br><span class="line">  the total memory can be allocated for sending packet</span><br><span class="line"></span><br><span class="line">* fwd_alloc</span><br><span class="line">  - 已分配给 socket，但尚未使用的内存</span><br><span class="line">  - 当 socket 需要发送/接收包时，会先使用此处的内存</span><br><span class="line"></span><br><span class="line">* wmem_queued</span><br><span class="line">  The memory allocated for sending packet (which has not been sent to layer 3)</span><br><span class="line"></span><br><span class="line">* ropt_mem</span><br><span class="line">  The memory used for storing socket option, e.g., the key for TCP MD5 signature</span><br><span class="line"></span><br><span class="line">* back_log</span><br><span class="line">  The memory used for the sk backlog queue.</span><br><span class="line">  On a process context, if the process is receiving packet, and a new packet is received, it will be put into the sk backlog queue, so it can be received by the process immediately</span><br><span class="line"></span><br><span class="line">* sock_drop</span><br><span class="line">  the number of packets dropped before they are de-multiplexed into the socket</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>额外信息</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* -e, --extended</span><br><span class="line">  - 输出 socket 的额外信息</span><br><span class="line"></span><br><span class="line">* 输出格式</span><br><span class="line">  uid:uid_number ino:inode_number sk:cookie</span><br><span class="line"></span><br><span class="line">* uid_number</span><br><span class="line">  socket 的 user id</span><br><span class="line"></span><br><span class="line">* inode_number</span><br><span class="line">  socket 的 inode id</span><br><span class="line"></span><br><span class="line">* cookie</span><br><span class="line">  an uuid of the socket</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：ss-指令其他"><a href="#知识点：ss-指令其他" class="headerlink" title="知识点：ss 指令其他"></a>知识点：ss 指令其他</h3><ol>
<li><strong>tos 相关</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* --tos</span><br><span class="line">  - 输出 tos 信息</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>cgroup 相关</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* --cgroup</span><br><span class="line">  输出 cgroup 信息</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>TCP 汇总相关</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">* -i, --info</span><br><span class="line">  - 输出内部的 tcp 统计信息</span><br><span class="line"></span><br><span class="line">* ts</span><br><span class="line">  show string &quot;ts&quot; if the timestamp option is set</span><br><span class="line"></span><br><span class="line">* sack</span><br><span class="line">  show string &quot;sack&quot; if the sack option is set</span><br><span class="line"></span><br><span class="line">* ecn</span><br><span class="line">  show string &quot;ecn&quot; if the explicit congestion notification option is set</span><br><span class="line"></span><br><span class="line">* ecnseen</span><br><span class="line">  show string &quot;ecnseen&quot; if the saw ecn flag is found in received packets</span><br><span class="line"></span><br><span class="line">* fastopen</span><br><span class="line">  show string &quot;fastopen&quot; if the fastopen option is set</span><br><span class="line"></span><br><span class="line">* cong_alg</span><br><span class="line">  the congestion algorithm name, the default congestion algorithm is &quot;cubic&quot;</span><br><span class="line"></span><br><span class="line">* wscale:&lt;snd_wscale&gt;:&lt;rcv_wscale&gt;</span><br><span class="line">  if window scale option is used, this field shows the send scale factor and receive scale factor</span><br><span class="line"></span><br><span class="line">* rto:&lt;icsk_rto&gt;</span><br><span class="line">  tcp re-transmission timeout value, the unit is millisecond</span><br><span class="line"></span><br><span class="line">* backoff:&lt;icsk_backoff&gt;</span><br><span class="line">  used for exponential backoff re-transmission, the actual re-transmission timeout value is icsk_rto &lt;&lt; icsk_backoff</span><br><span class="line"></span><br><span class="line">* rtt:&lt;rtt&gt;/&lt;rttvar&gt;</span><br><span class="line">  rtt is the average round trip time, rttvar is the mean deviation of rtt, their units are millisecond</span><br><span class="line"></span><br><span class="line">* ato:&lt;ato&gt;</span><br><span class="line">  ack timeout, unit is millisecond, used for delay ack mode</span><br><span class="line"></span><br><span class="line">* mss:&lt;mss&gt;</span><br><span class="line">  max segment size</span><br><span class="line"></span><br><span class="line">* cwnd:&lt;cwnd&gt;</span><br><span class="line">  congestion window size</span><br><span class="line"></span><br><span class="line">* pmtu:&lt;pmtu&gt;</span><br><span class="line">  path MTU value</span><br><span class="line"></span><br><span class="line">* ssthresh:&lt;ssthresh&gt;</span><br><span class="line">  tcp congestion window slow start threshold</span><br><span class="line"></span><br><span class="line">* bytes_acked:&lt;bytes_acked&gt;</span><br><span class="line">  bytes acked</span><br><span class="line"></span><br><span class="line">* bytes_received:&lt;bytes_received&gt;</span><br><span class="line">  bytes received</span><br><span class="line"></span><br><span class="line">* segs_out:&lt;segs_out&gt;</span><br><span class="line">  segments sent out</span><br><span class="line"></span><br><span class="line">* segs_in:&lt;segs_in&gt;</span><br><span class="line">  segments received</span><br><span class="line"></span><br><span class="line">* send &lt;send_bps&gt;bps</span><br><span class="line">  egress bps</span><br><span class="line"></span><br><span class="line">* lastsnd:&lt;lastsnd&gt;</span><br><span class="line">  how long time since the last packet sent, the unit is millisecond</span><br><span class="line"></span><br><span class="line">* lastrcv:&lt;lastrcv&gt;</span><br><span class="line">  how long time since the last packet received, the unit is millisecond</span><br><span class="line"></span><br><span class="line">* lastack:&lt;lastack&gt;</span><br><span class="line">  how long time since the last ack received, the unit is millisecond</span><br><span class="line"></span><br><span class="line">* pacing_rate &lt;pacing_rate&gt;bps/&lt;max_pacing_rate&gt;bps</span><br><span class="line">  the pacing rate and max pacing rate</span><br><span class="line"></span><br><span class="line">* rcv_space:&lt;rcv_space&gt;</span><br><span class="line">  a helper variable for TCP internal auto tuning socket receive buffer</span><br><span class="line"></span><br><span class="line">* tcp-ulp-mptcp flags:[MmBbJjecv] token:&lt;rem_token(rem_id)/loc_token(loc_id)&gt; seq:&lt;sn&gt; sfseq:&lt;ssn&gt; ssnoff:&lt;off&gt; maplen:&lt;maplen&gt;</span><br><span class="line">  MPTCP subflow information</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：ping-指令"><a href="#知识点：ping-指令" class="headerlink" title="知识点：ping 指令"></a>知识点：ping 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 通过 icmp 协议，检查网络的联通性</span><br><span class="line">  - 发送一个 ICMP Echo Request Message（类型 8）等待对端主机发回来 ICMP Echo Reply Message（类型 0）</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  ping [OPTIONS] DEST</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">* -c COUNT</span><br><span class="line">  - 固定次数 ping</span><br><span class="line"></span><br><span class="line">* -D</span><br><span class="line">  - 输出时在每一行前面加上时间戳</span><br><span class="line"></span><br><span class="line">* -i INTERVAL</span><br><span class="line">  - 设置每一次 ping 之间的时间间隔，只有超级用户可以设置小于 0.2 秒的时间间隔</span><br><span class="line"></span><br><span class="line">* -I INTERFACE</span><br><span class="line">  - 指定用来 ping 的接口</span><br><span class="line">  - 可以是一个地址，或者是接口名</span><br><span class="line"></span><br><span class="line">* -q</span><br><span class="line">  - 安静模式，仅输出汇总行</span><br><span class="line"></span><br><span class="line">* -s PACKETSIZE</span><br><span class="line">  - 指定发送的数据的大小，默认是 56 字节</span><br><span class="line"></span><br><span class="line">* -w DEADLINE</span><br><span class="line">  - 设置 ping 命令的结束时间，不管是否已经全部发送完 -c COUNT 数量的包</span><br><span class="line"></span><br><span class="line">* -W TIMEOUT</span><br><span class="line">  - 设置每一次 ping 行为等待 response 的时间</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：netcat-指令"><a href="#知识点：netcat-指令" class="headerlink" title="知识点：netcat 指令"></a>知识点：netcat 指令</h3><ol>
<li><p><strong>介绍</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - netcat 可以进行任何与 TCP/UDP/UNIX-domain sockets 有关的操作，如打开 TCP 连接、发送 UDP 包、监听端口、端口扫描等</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  nc [OPTIONS] Destination [Port]</span><br><span class="line">  nc [-l] [OPTIONS] [Destination] [Port]</span><br><span class="line"></span><br><span class="line">* Port</span><br><span class="line">  - 可以使用端口号，也可以使用 Service Name，也可以使用端口范围，如 22-1022</span><br><span class="line"></span><br><span class="line">* 关于 nc、netcat、ncat</span><br><span class="line">  - nc 指令、ncat 指令、netcat 指令，都是用来进行端口检测的工具，都是基于相同理念开发，具有类似的功能</span><br><span class="line">  - 区别为，不同的指令隶属于不同的项目，具有支持不同的选项</span><br><span class="line">  - nc 通常是 netcat 的一个别名</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p><strong>选项</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">* -l</span><br><span class="line">  - 启动一个监听</span><br><span class="line"></span><br><span class="line">* -u</span><br><span class="line">  - 使用 UDP 而不是 TCP</span><br><span class="line"></span><br><span class="line">* -w Timeout</span><br><span class="line"></span><br><span class="line">* -v</span><br><span class="line">  - verbose</span><br><span class="line"></span><br><span class="line">* -z</span><br><span class="line">  - 仅检查远程端口，不发送任何数据</span><br><span class="line"></span><br><span class="line">* -p SourcePort</span><br><span class="line">  - 指定使用的本地端口</span><br><span class="line"></span><br><span class="line">* -s SourceAddress</span><br><span class="line">  - 指定使用的本地地址</span><br><span class="line"></span><br><span class="line">* -X ProxyProtocol</span><br><span class="line">  - 指定使用的代理协议</span><br><span class="line">  - 可选值包括 4(SOCKSv4)、5(SOCKSv5)、connect(HTTPS proxy)</span><br><span class="line"></span><br><span class="line">* -x ProxyAddress[:Port]</span><br><span class="line">  - 指定使用的代理服务器</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>范例</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 检查远程主机的端口是否打开</span><br><span class="line">  netcat -z -w 1 -v www.baidu.com 20-30</span><br><span class="line"></span><br><span class="line"># 临时启动一个监听</span><br><span class="line">  nc -l 1234</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：ncat-指令"><a href="#知识点：ncat-指令" class="headerlink" title="知识点：ncat 指令"></a>知识点：ncat 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 选项和功能相比 netcat 更强大一些，报告内容更全面一些</span><br><span class="line"></span><br><span class="line">* connect mode</span><br><span class="line">  - 格式：ncat [Options] HostName Port</span><br><span class="line">  - HostName 和 Port 用来指定远程主机的地址</span><br><span class="line"></span><br><span class="line">* listen mode</span><br><span class="line">  - 格式：ncat -l [Options] [HostName] [Port]</span><br><span class="line">  - HostName 和 Port 用来指定监听的地址</span><br><span class="line">  - HostName 如果省略，则表示监听所有的地址</span><br><span class="line">  - Port 如果省略，则监听 31337</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">* -4、-6</span><br><span class="line">  - Use IPv4 only</span><br><span class="line">  - Use IPv6 only</span><br><span class="line"></span><br><span class="line">* -u、--udp</span><br><span class="line">  - 使用 UDP</span><br><span class="line"></span><br><span class="line">* -h、--help</span><br><span class="line">  - 打印帮助信息</span><br><span class="line"></span><br><span class="line">* --version</span><br><span class="line">  - 打印版本信息</span><br><span class="line"></span><br><span class="line">* -v、--verbose</span><br><span class="line">  - 打印更详细的信息</span><br><span class="line">  - 可以指定多次</span><br><span class="line"></span><br><span class="line">* -p、--source-port SourcePort</span><br><span class="line">  - 指定使用的源端口</span><br><span class="line"></span><br><span class="line">* -s、--source SourceAddress</span><br><span class="line">  - 指定使用的源地址</span><br><span class="line"></span><br><span class="line">* -l、--listen</span><br><span class="line">  - 启动监听模式</span><br><span class="line"></span><br><span class="line">* -w、--wait TimeOut</span><br><span class="line">  - 指定超时时间</span><br><span class="line">  - TimeOut 支持时间单位，ms、s、m、h</span><br><span class="line"></span><br><span class="line">* -z</span><br><span class="line">  - Zero-I/O 模式，仅报告连接状态</span><br><span class="line"></span><br><span class="line">* --proxy-type Type</span><br><span class="line">  - 指定使用的代理的协议，&quot;http&quot;、&quot;socks4&quot;、&quot;socks5&quot;</span><br><span class="line"></span><br><span class="line">* --proxy Address:Port</span><br><span class="line">  - 指定代理服务器的地址</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 检查远程主机的端口是否打开</span><br><span class="line">  ncat -z -w 100ms -vvv www.baidu.com 20-30</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：wget-指令"><a href="#知识点：wget-指令" class="headerlink" title="知识点：wget 指令"></a>知识点：wget 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 非交互式的网络下载器 non-interactive network downloader</span><br><span class="line">  - 交互模式下，将日志输出到 stderr 上</span><br><span class="line"></span><br><span class="line">* 代理</span><br><span class="line">  - 通过 http_proxy、https_proxy 环境变量来设置代理</span><br><span class="line">  - wget 并没有自己的指定代理的选项</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  wget [OPTIONs] [URLs]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">* -h, --help</span><br><span class="line">* -V, --version</span><br><span class="line">  - 打印帮助信息、版本信息</span><br><span class="line"></span><br><span class="line">* -b, --background</span><br><span class="line">  - 后台下载</span><br><span class="line">  - 如果没有指定日志文件，则默认会将日志保存到 wget-log.X 的文件中</span><br><span class="line"></span><br><span class="line">* -o LogFile, --output-file=LogFile</span><br><span class="line">* -a LogFile, --append-output=LogFile</span><br><span class="line">  - 指定日志文件</span><br><span class="line"></span><br><span class="line">* -q, --quiet</span><br><span class="line">* -v, --verbose</span><br><span class="line">* -d, --debug</span><br><span class="line">  - 指定输出日志的级别</span><br><span class="line"></span><br><span class="line">* -i File, --input-file=File</span><br><span class="line">  - 从 File 中读取 URL，一行一条</span><br><span class="line"></span><br><span class="line">* -O File, --output-document=File</span><br><span class="line">  - 指定输出文件</span><br><span class="line"></span><br><span class="line">* --bind-address=ADDRESS</span><br><span class="line">  - 在多网卡环境中，使用指定的网卡</span><br><span class="line"></span><br><span class="line">* -t Number, --tries=Number</span><br><span class="line">  - 指定失败重试的次数，0 或 &quot;inf&quot; 表示一直重试</span><br><span class="line">  - 不指定则默认值为 20</span><br><span class="line"></span><br><span class="line">* --backups=Number</span><br><span class="line">  - 先创建备份</span><br><span class="line"></span><br><span class="line">* -c, --continue</span><br><span class="line">  - 继续下载，断点续传</span><br><span class="line"></span><br><span class="line">* --no-use-server-timestamps</span><br><span class="line">  - 修改下载的文件的时间</span><br><span class="line">  - 默认行为是，使用文件在服务器上的时间</span><br><span class="line"></span><br><span class="line">* --no-check-certificate</span><br><span class="line">  - 对于 https 的资源，不进行检查</span><br><span class="line"></span><br><span class="line">* -S, --server-response</span><br><span class="line">  - 打印 server 返回的 http header 信息</span><br><span class="line"></span><br><span class="line">* -T Seconds, --timeout=Seconds</span><br><span class="line">  - 指定超时时间</span><br><span class="line"></span><br><span class="line">* --limit-rate=Amount</span><br><span class="line">  - 进行下载限速</span><br><span class="line"></span><br><span class="line">* --user=user</span><br><span class="line">* --password=password</span><br><span class="line">  - 对于 http 或 ftp 资源，指定 user 和 password</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 常用，后台下载</span></span><br><span class="line">wget -b -c -t 0 --no-check-certificate XXXX</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：curl-指令"><a href="#知识点：curl-指令" class="headerlink" title="知识点：curl 指令"></a>知识点：curl 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - curl 是一个用于发送各种网络请求的命令行工具，它支持多种协议，包括 HTTP、HTTPS、FTP、SMTP 等</span><br><span class="line">  - curl 可以用来下载文件、上传文件、发送 POST 请求、发送表单数据等</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  curl [Options] [URLs]</span><br><span class="line"></span><br><span class="line">* Options</span><br><span class="line">  - 对于 boolean 型的选项，curl 都支持 --OPTION 表示 enable 和 --no-OPTION 表示关闭</span><br><span class="line"></span><br><span class="line">* URL 支持的格式</span><br><span class="line">  - 普通格式:   http://site.app.com</span><br><span class="line">  - 多选格式:   http://site.&#123;one,two,three&#125;.com</span><br><span class="line">  - 序列格式:</span><br><span class="line">      ftp://ftp.numericals.com/file[1-100].txt</span><br><span class="line">      ftp://ftp.numericals.com/file[001-100].txt</span><br><span class="line">      ftp://ftp.letters.com/file[a-z].txt</span><br><span class="line">  - 带步长的序列:</span><br><span class="line">      http://www.numericals.com/file[1-100:10].txt</span><br><span class="line">      http://www.letters.com/file[a-z:2].txt</span><br><span class="line">  - 组合:</span><br><span class="line">      http://any.org/archive[1996-1999]/vol[1-4]/part&#123;a,b,c&#125;.html</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>基础选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">* -h, --help</span><br><span class="line">* -M, --manual</span><br><span class="line">  - 查看帮助信息</span><br><span class="line"></span><br><span class="line">* -V, --version</span><br><span class="line">  - 查看版本信息，同时会打印 curl 支持的功能</span><br><span class="line"></span><br><span class="line">* -v, --verbose</span><br><span class="line">  - 打印 debug 信息</span><br><span class="line"></span><br><span class="line">* -u, --user User[:Password]</span><br><span class="line">  - 指定用户名和密码</span><br><span class="line"></span><br><span class="line">* -x, --proxy [Protocol://][User:Password@]ProxyHost[:Port]</span><br><span class="line">  - 指定代理服务器</span><br><span class="line"></span><br><span class="line">* -U, --proxy-user User[:Password]</span><br><span class="line">  - 指定代理服务器的用户名和密码</span><br><span class="line"></span><br><span class="line">* -o, --output File</span><br><span class="line">  - 下载文件</span><br><span class="line">  - 当同时下载多个 url 的文件时，可以采用 &quot;#&quot; 加数字的方式，来对保存的文件自动命名，例如：</span><br><span class="line">    curl http://&#123;one,two&#125;.site.com -o &quot;file_#1.txt&quot;</span><br><span class="line">    curl http://&#123;site,host&#125;.host[1-5].com -o &quot;#1_#2&quot;</span><br><span class="line"></span><br><span class="line">* -O, --remote-name</span><br><span class="line">  - 下载文件</span><br><span class="line">  - 与 &quot;-o&quot; 的区别，&quot;-O&quot; 会直接使用文件在 server 上的名字进行命名，保存在 cwd 中</span><br><span class="line"></span><br><span class="line">* --limit-rate Speed</span><br><span class="line">  - 限制网速</span><br><span class="line"></span><br><span class="line">* -m, --max-time Seconds</span><br><span class="line">  - 限制 curl 的运行时间</span><br><span class="line"></span><br><span class="line">* --interface Name</span><br><span class="line">  - 使用指定的网络接口，可以是设备名 eth、hostname、ip</span><br><span class="line"></span><br><span class="line">* --retry Num</span><br><span class="line">* --retry-delay Seconds</span><br><span class="line">* --retry-max-time Seconds</span><br><span class="line">  - 重试相关</span><br><span class="line"></span><br><span class="line">* -s, --silent</span><br><span class="line">  - 隐藏错误信息</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>http 相关选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">* -X, --request Command</span><br><span class="line">  - 指定使用的 http 方法，必须大写</span><br><span class="line"></span><br><span class="line">* -H, --header Header</span><br><span class="line">  - 在发送请求时在 header 添加字段，格式为 &quot;Field: Value&quot;</span><br><span class="line"></span><br><span class="line">* -d, --data Data</span><br><span class="line">  - 在发送 POST 请求时，指定数据</span><br><span class="line">  - 数据 Data，可以是字符串，也可以是 &quot;@File&quot; 指定的数据文件</span><br><span class="line"></span><br><span class="line">* -k, --insecure</span><br><span class="line">  - 信任不安全的 https 连接</span><br><span class="line"></span><br><span class="line">* -i, --include</span><br><span class="line">  - 同时打印出 HTTP-header 信息</span><br><span class="line"></span><br><span class="line">* -I, --head</span><br><span class="line">  - 只打印出 HTTP-header 信息</span><br><span class="line"></span><br><span class="line">* -D, --dump-header File</span><br><span class="line">  - 将 server 返回的 header 保存到某个文件中</span><br><span class="line"></span><br><span class="line">* -L, --location</span><br><span class="line">  - 当发生跳转时，即响应码为 3XX，让 curl 继续访问跳转的页面</span><br><span class="line">  - 与 -i 或 -I 一起使用时，所有的请求的 header 都会被打印出来</span><br><span class="line"></span><br><span class="line">* -A, --user-agent AgentString</span><br><span class="line">  - 指定发送的 http 包中的 user-agent 字段的值</span><br><span class="line">  - 也可以通过 -H 选项实现</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="8-7-iptables"><a href="#8-7-iptables" class="headerlink" title="8.7 iptables"></a>8.7 iptables</h2><hr>
<h3 id="知识点：netfilter-介绍"><a href="#知识点：netfilter-介绍" class="headerlink" title="知识点：netfilter 介绍"></a>知识点：netfilter 介绍</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - netfilter 框架，是 Linux 内核提供的一个网络数据包处理框架，通过对 packet 的操作，来实现各种与网络相关的功能</span><br><span class="line">  - netfilter 最主要的两个功能，数据包过滤 packet filtering、网络地址转换 network address translation</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>HOOK</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - netfilter 框架在 packet 的处理流程中的一些关键点中定义的五个钩子 Hook</span><br><span class="line">  - 其他的程序，如 iptables，通过在相应的钩子中注册回调函数，来设置相应的功能</span><br><span class="line"></span><br><span class="line">* PRE_ROUTING</span><br><span class="line">  - 预路由，对网卡发来的 packet 进行路由比对</span><br><span class="line">  - packet 的目标是本机的，则将 packet 转往 INPUT</span><br><span class="line">  - packet 的目标不是本机的，则将 packet 转往 FORWARD</span><br><span class="line"></span><br><span class="line">* INPUT</span><br><span class="line">  - 输入，对需要进入本机的 packet 进行处理</span><br><span class="line">  - 处理后的 packet 可以进入本机</span><br><span class="line"></span><br><span class="line">* FORWARD</span><br><span class="line">  - 转发，对需要由本机进行转发的 packet 进行处理</span><br><span class="line">  - 处理后的 packet 转往 POST_ROUTING</span><br><span class="line"></span><br><span class="line">* OUTPUT</span><br><span class="line">  - 输出，对本机产生的 packet 进行处理</span><br><span class="line">  - 处理后的 packet 转往 POST_ROUTING</span><br><span class="line"></span><br><span class="line">* POST_ROUTING</span><br><span class="line">  - 路由选择，本机向外发送 packet 的最后一步，用于确定 packet 的转发接口</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<img src="/2000/01/01/Blog01-Linux/netfilter%E6%B5%81%E7%A8%8B.jpg"></li>
</ol>
<hr>
<h3 id="知识点：iptables-介绍"><a href="#知识点：iptables-介绍" class="headerlink" title="知识点：iptables 介绍"></a>知识点：iptables 介绍</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - iptables 相当于 netfilter 的客户端，用户通过 iptables 指令来实现 netfilter 提供的功能</span><br><span class="line">  - iptables 通过在 netfilter 相应的 HOOK 中注册回调函数，来实现期望的数据包处理功能</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>表 table</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 表，相当于链的容器，在其中封装了需要在 HOOK 中进行注册的链</span><br><span class="line">  - 不同的表中的链在实现技术上并没有本质的区别，只是在实际使用中具有约定俗成的习惯</span><br><span class="line">  - 相同类型的链都会在 netfilter 中相应的 HOOK 进行注册</span><br><span class="line">  - 不同的表具有不同的优先级，数值越低，优先级越高，优先级高的表，其包含的链在 hook 中会先进行匹配</span><br><span class="line"></span><br><span class="line">* raw 表</span><br><span class="line">  - 优先级 -300，优先级最高</span><br><span class="line">  - 通常用来对数据包进行跟踪</span><br><span class="line">  - PREROUTING</span><br><span class="line">  - OUTPUT</span><br><span class="line"></span><br><span class="line">* mangle 表</span><br><span class="line">  - 优先级 -150</span><br><span class="line">  - 通常用来给数据包做标记</span><br><span class="line">  - PREROUTING</span><br><span class="line">  - INPUT</span><br><span class="line">  - FORWARD</span><br><span class="line">  - OUTPUT</span><br><span class="line">  - POSTROUTING</span><br><span class="line"></span><br><span class="line">* filter 表</span><br><span class="line">  - 优先级 0</span><br><span class="line">  - 用来进行数据包过滤</span><br><span class="line">  - INPUT</span><br><span class="line">  - FORWART</span><br><span class="line">  - OUTPUT</span><br><span class="line"></span><br><span class="line">* nat 表</span><br><span class="line">  - DST 优先级 -100</span><br><span class="line">  - SRC 优先级 100</span><br><span class="line">  - 用来进行网络地址转换</span><br><span class="line">  - PREROUTING</span><br><span class="line">  - INPUT</span><br><span class="line">  - OUTPUT</span><br><span class="line">  - POSTROUTING</span><br><span class="line"></span><br><span class="line">* security 表</span><br><span class="line">  - 优先级 50</span><br><span class="line">  - 用来实现网络安全管理，通常由 Linux 的模块来调用，如 selinux</span><br><span class="line">  - INPUT</span><br><span class="line">  - OUTPUT</span><br><span class="line">  - FORWARD</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>链 chain</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 链，由一个或多个规则组成的有序列表</span><br><span class="line"></span><br><span class="line">* 链的遍历 traversing</span><br><span class="line">  - 当一个 packet 被转发到某一个 chain 后，从 chain 中的第一个 rule 开始匹配</span><br><span class="line">  - 若匹配，则按照 rule 中设置的 target 转往相应的位置</span><br><span class="line">  - 若不匹配，则继续尝试下一个 rule 的匹配，直到 chain 中所有的规则均完成匹配</span><br><span class="line"></span><br><span class="line">* 默认策略 policy</span><br><span class="line">  - 当一个 packet 在遍历完 chain 中的所有规则后，若仍然没有匹配任何规则，则会按照 chain 设置的默认策略进行处理</span><br><span class="line">  - 默认策略只有 builtin 链可以设置，并且只能是 ACCEPT 或 DROP</span><br><span class="line"></span><br><span class="line">* builtin 链</span><br><span class="line">  - table 中定义的链，就是 builtin 链，iptables 在 hook 注册的也就是 builtin 链</span><br><span class="line">  - 一个 hook 中的多个 builtin 链之间是顺序的关系，即前一个 builtin 链 ACCEPT 的 packet，会继续在 hook 中的下一个 builtin 链中进行遍历</span><br><span class="line"></span><br><span class="line">* user-defined 链</span><br><span class="line">  - 由用户自定义的链</span><br><span class="line">  - user-defined 链必须最终属于 builtin，否则无法生效</span><br><span class="line">  - user-defined 链可以是 builtin 链的子链，也可以是某个 user-defined 链的子链，也可以被某个 rule 的 target 所指向</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>规则 rule</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 规则，是具体的一个对 packet 进行处理的设置，对于匹配的 packet，将其转往 target 指定的位置</span><br><span class="line">  - 一个 rule 包含一个或多个匹配标准，包含有且仅有一个 target</span><br><span class="line"></span><br><span class="line">* 规则的顺序</span><br><span class="line">  - 在一个链中，每个规则都有其序号</span><br><span class="line">  - packet 在进行规则的遍历时，会从序号为 1 的规则开始遍历</span><br><span class="line">  - iptables 支持通过指定序号来操作具体的某条规则</span><br><span class="line">  - 在链中添加/删除规则时，所有规则的序号也会自动进行修改</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>目标 target</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 目标，定义在规则或默认策略中，用来设置对与规则匹配的 packet 应该将其转向何处</span><br><span class="line">  - target 可以指向同一个表中其他的 user-defined chain、可以指向某个 target extensions，也可以指向 ACCEPT、DROP、RETURN 三个默认 target 之一</span><br><span class="line">  - 如果在 rule 中并没有指定 target，则 rule 对于 packet 的处理并不产生任何影响，但 rule 的流量统计会增加</span><br><span class="line"></span><br><span class="line">* ACCEPT</span><br><span class="line">  - 允许 packet 通过当前 builtin 链，不需要与当前 builtin 链中的规则进行匹配</span><br><span class="line"></span><br><span class="line">* DROP</span><br><span class="line">  - 直接丢弃 packet，并且不发送任何回执</span><br><span class="line">  - 丢弃的 packet 不会再参与任何之后的规则匹配</span><br><span class="line"></span><br><span class="line">* RETURN</span><br><span class="line">  - 停止当前 chain 的遍历，返回上一级链的下一个规则或子链并继续进行遍历</span><br><span class="line">  - 上一级链是指两种情况</span><br><span class="line">    - 当前链是父链中的一个子链，则上一级链就是父链</span><br><span class="line">    - 当前链是被某个链的 target 调用，则上一级链就是调用链</span><br><span class="line">  - 若规则是 builtin 链的一个规则，则直接按照 builtin 链的默认策略进行处理</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：iptables-指令"><a href="#知识点：iptables-指令" class="headerlink" title="知识点：iptables 指令"></a>知识点：iptables 指令</h3><ol>
<li><strong>格式</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  iptables [-t Table] Command [Options]</span><br><span class="line"></span><br><span class="line">* -t, --table Table</span><br><span class="line">  - 指定 iptables 操作的表</span><br><span class="line">  - 默认为 filter 表</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看当前 filter 表中的规则设置</span></span><br><span class="line">iptables -t filter -nvL --line-numbers</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 对 192.168.1.0 网段开放 80、443 端口</span></span><br><span class="line">iptables -I INPUT -p tcp -s 192.168.1.0/24 -m multiport --dport 80,443 -j ACCEPT</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>动作 Command</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">* -L, --list [Chain [RuleNum]]</span><br><span class="line">  - 查看链中的所有规则</span><br><span class="line"></span><br><span class="line">* -S, --list-rules [Chain [RuleNum]]</span><br><span class="line">  - 列出链中所有的规则，输出内容可以直接作为 iptables 指令的参数</span><br><span class="line"></span><br><span class="line">* -N, --new-chain Chain</span><br><span class="line">  - 创建一个新链</span><br><span class="line"></span><br><span class="line">* -X, --delete-chain [Chain]</span><br><span class="line">  - 删除一个链</span><br><span class="line">  - 要求链中不包含任何规则，并且链没有被其他任何 rule 所引用</span><br><span class="line">  - 如果不指定 Chain，则表示删除所有的 user-defined 链</span><br><span class="line"></span><br><span class="line">* -A, --append Chain RuleSpecification</span><br><span class="line">* -I, --insert Chain [RuleNum] RuleSpecification</span><br><span class="line">  - 向链中添加 rule</span><br><span class="line">  - &quot;-A&quot; 表示插入到 chain 的末尾</span><br><span class="line">  - &quot;-I&quot; 表示添加到 &quot;RuleNum&quot; 指定的位置，默认为 1，即 chain 的开头</span><br><span class="line"></span><br><span class="line">* -R, --replace Chain RuleNum RuleSpecification</span><br><span class="line">  - 替换一个 rule 的内容</span><br><span class="line"></span><br><span class="line">* -D, --delete Chain RuleSpecification</span><br><span class="line">* -D, --delete Chain Rulenum</span><br><span class="line">  - 删除一个 rule</span><br><span class="line"></span><br><span class="line">* -P, --policy Chain Target</span><br><span class="line">  - 修改一个 builtin chain 的默认策略</span><br><span class="line"></span><br><span class="line">* -E, --rename-chain old-Chain-name new-Chain-name</span><br><span class="line">  - 对 chain 进行重命名</span><br><span class="line"></span><br><span class="line">* -F, --flush [Chain]</span><br><span class="line">  - 删除 chain 中所有的 rule</span><br><span class="line">  - 如果未指定 chain，则删除所有的 chain 的所有的 rule</span><br><span class="line"></span><br><span class="line">* -Z, --zero [Chain [RuleNum]]</span><br><span class="line">  - 清空某个 chain 或某个 rule 的流量统计</span><br><span class="line"></span><br><span class="line">* -C, --check Chain RuleSpecification</span><br><span class="line">  - 检查，查看某个 chain 中是否具有某个 rule</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* -v, --verbose</span><br><span class="line">  - 输出详细信息，支持多次指定</span><br><span class="line">  - 配合 &quot;-L&quot; 动作使用</span><br><span class="line"></span><br><span class="line">* -n, --numeric</span><br><span class="line">  - 将 IP 地址和端口解析为数字格式</span><br><span class="line">  - 配合 &quot;-L&quot; 动作使用</span><br><span class="line"></span><br><span class="line">* --line-numbers</span><br><span class="line">  - 同时输出 rule 的序号</span><br><span class="line">  - 配合 &quot;-L&quot; 动作使用</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：iptables-rule-格式"><a href="#知识点：iptables-rule-格式" class="headerlink" title="知识点：iptables rule 格式"></a>知识点：iptables rule 格式</h3><ol>
<li><strong>格式</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* RuleSpecification</span><br><span class="line">  [Parameter ...] [Matche ...] [Target]</span><br><span class="line"></span><br><span class="line">* Match</span><br><span class="line">  -m MatchExtension [per-match-options]</span><br><span class="line">  --match MatchExtension [per-match-options]</span><br><span class="line"></span><br><span class="line">* Target</span><br><span class="line">  -j TargetExtension [per-target-options]</span><br><span class="line">  --jump TargetExtension [per-target-options]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>Parameters</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* [!] -p, --protocol Protocol</span><br><span class="line">  - 指定 rule 对 packet 的协议进行检查，tcp/udp/icmp 等</span><br><span class="line">  - 省略 &quot;-p&quot; 则表示 all，表示针对所有协议</span><br><span class="line">  - 感叹号 &quot;!&quot; 表示反向指定</span><br><span class="line"></span><br><span class="line">* [!] -s, --src, --source Address[/Mask][,...]</span><br><span class="line">* [!] -d, --dst, --destination Address[/Mask][,...]</span><br><span class="line">  - 指定 rule 对 packet 的 source address / destination address 进行检查</span><br><span class="line">  - Address 可以是 IP、network、hostname</span><br><span class="line">  - 感叹号 &quot;!&quot; 表示反向指定</span><br><span class="line">  - 若指定多个 address，则会被解析为多条 rule，每个 address 一条</span><br><span class="line"></span><br><span class="line">* [!] -i, --in-interface InterfaceName</span><br><span class="line">* [!] -o, --out-interface name</span><br><span class="line">  - 指定 rule 对 packet 的接口进行检查，省略则表示所有 Interface</span><br><span class="line">  - &quot;-i&quot; 只针对 INPUT、FORWARD、PREROUTING 三个链适用</span><br><span class="line">  - &quot;-o&quot; 只针对 FORWARD、OUTPUT、POSTROUTING 三个链适用</span><br><span class="line">  - &quot;!&quot; 表示反向指定</span><br><span class="line">  - InterfaceName 可以以 &quot;+&quot; 结尾，表示所有以 &quot;InterfaceName&quot; 为前缀的接口名，例如 &quot;eth&quot; 之于 &quot;eth0&quot;</span><br><span class="line"></span><br><span class="line">* [!] -f, --fragment</span><br><span class="line">  - 指定 rule 只针对分片了的 packet 生效，并只针对从第二个开始的分片</span><br><span class="line">  - &quot;!&quot; 表示，只针对第一个分片，或未分片的 packet 生效</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：iptables-match-extension"><a href="#知识点：iptables-match-extension" class="headerlink" title="知识点：iptables match extension"></a>知识点：iptables match extension</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - match extension，匹配扩展，可以额外提供一些对 packet 进行匹配测试的条件，通过 &quot;-m&quot; 参数来引入</span><br><span class="line">  - 每个 match extension 都具有自己的独有的参数</span><br><span class="line">  - 可以在一个 rule 上指定多个 &quot;-m&quot;，多个 &quot;-m&quot; 之间为 AND 逻辑，并且具有短路逻辑</span><br><span class="line"></span><br><span class="line">* 查看在线帮助</span><br><span class="line">  iptables -m MatchName -h</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>iprange Match</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 对 packet 的 ip 地址进行检查</span><br><span class="line">  - 是 &quot;-s&quot;、&quot;-d&quot; 选项的升级版，额外支持 IP 范围的格式</span><br><span class="line"></span><br><span class="line">* [!] --src-range From[-To]</span><br><span class="line">  - 对 packet 的 src 地址进行检查</span><br><span class="line"></span><br><span class="line">* [!] --dst-range From[-To]</span><br><span class="line">  - 对 packet 的 dst 地址进行检查</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>multiport Match</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 对 packet 的 port 进行检查</span><br><span class="line">  - 相比其他的端口检查选项，额外支持端口范围 port range、端口列表 port list 等方式</span><br><span class="line"></span><br><span class="line">* [!] --sports port[,port|,port:port]</span><br><span class="line">* [!] --source-ports port[,port|,port:port]</span><br><span class="line">  - 对 packet 的 src port 进行检查</span><br><span class="line"></span><br><span class="line">* [!] --dports port[,port|,port:port]</span><br><span class="line">* [!] --destination-ports port[,port|,port:port]</span><br><span class="line">  - 对 packet 的 dst port 进行检查</span><br><span class="line"></span><br><span class="line">* [!] --ports port[,port|,port:port]</span><br><span class="line">  - 对 packet 的 src port 和 dst port 同时进行检查，只要有一个符合即成立</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>tcp Match</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 对 tcp packet 的一系列 tcp 相关的属性进行检查</span><br><span class="line">  - 在 -p tcp 时，Match 中的选项可以直接使用</span><br><span class="line"></span><br><span class="line">* [!] --sport, --source-port port[:port]</span><br><span class="line">* [!] --dport, --destination-port port[:port]</span><br><span class="line">  - 对 packet 的 src port、dst port 进行检查</span><br><span class="line"></span><br><span class="line">* [!] --syn</span><br><span class="line">  - 检查 packet 是否是三次握手的第一次握手</span><br><span class="line">  - 用处，在 &quot;INPUT&quot; 链中对 &quot;--syn&quot; 进行 DROP，可以实现阻止任何人访问本地但同时本地可以访问任何人</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>udp Match</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* udp</span><br><span class="line">  - 对 udp packet 的一系列 tcp 相关的属性进行检查</span><br><span class="line">  - 在 -p udp 时，Match 中的选项可以直接使用</span><br><span class="line"></span><br><span class="line">* [!] --sport, --source-port port[:port]</span><br><span class="line">* [!] --dport, --destination-port port[:port]</span><br><span class="line">  - 对 packet 的 src port、dst port 进行检查</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>conntrack Match</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 对 packet 的进行基于 connection 追踪的检测，包括 connection 状态、connection ip 等</span><br><span class="line"></span><br><span class="line">* [!] --ctstate StateList</span><br><span class="line">  - 对 connection 的状态进行检测</span><br><span class="line">  - StateList 是一个 comma separated list，可以包含以下元素</span><br><span class="line">    INVALID     The packet is associated with no known connection.</span><br><span class="line">    NEW         The packet has started a new connection or otherwise associated with a connection which has not seen packets in both directions.</span><br><span class="line">    ESTABLISHED The packet is associated with a connection which has seen packets in both directions.</span><br><span class="line">    RELATED     The packet is starting a new connection, but is associated with an existing connection, such as an FTP data transfer or an ICMP error.</span><br><span class="line">    UNTRACKED   The packet is not tracked at all, which happens if you explicitly untrack it by using -j CT --notrack in the raw table.</span><br><span class="line">    SNAT        A virtual state, matching if the original source address differs from the reply destination.</span><br><span class="line">    DNAT        A virtual state, matching if the original destination differs from the reply source.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他部分 Match</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* comment</span><br><span class="line">  - 在 rule 中添加注释</span><br><span class="line"></span><br><span class="line">* time</span><br><span class="line">  - 以时间为条件检查 package</span><br><span class="line"></span><br><span class="line">* statistic</span><br><span class="line">  - 以概率的方式，选取部分 packet</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：iptables-target-extension"><a href="#知识点：iptables-target-extension" class="headerlink" title="知识点：iptables target extension"></a>知识点：iptables target extension</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - target extension，是对 iptables 的基础 target 的扩展</span><br><span class="line">  - iptables 的某些高级功能，如 NAT，会必须用到 target extension</span><br><span class="line">  - 所有的 target 在指定时，都必须要大写</span><br><span class="line"></span><br><span class="line">* terminating target 和 non-terminating target</span><br><span class="line">  - terminating target，是指对于匹配的 packet，其在当前链/调用链的匹配就结束了，不会再继续在当前链中进行遍历，典型如 ACCEPT、REJECT</span><br><span class="line">  - non-terminating target，是指对于匹配的 packet，在执行的当前 target 指定的动作后，会继续在当前链中遍历 rule，典型如 LOG</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>REGECT target</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 将 packet 丢弃</span><br><span class="line">  - 只能在 INPUT、FORWARD、OUTPUT 链中使用，或者这些链的子链</span><br><span class="line">  - 与 DROP 非常相似，唯一的区别是，REJECT 在拒绝 packet 时可以向源返回一个信息，而 DROP 只是丢弃包而不返回任何信息</span><br><span class="line"></span><br><span class="line">* --reject-with Type</span><br><span class="line">  - 指定返回的信息的类型，默认为 icmp-port-unreachable</span><br><span class="line">  - Type 的可选值包括：</span><br><span class="line">    - icmp-net-unreachable</span><br><span class="line">    - icmp-host-unreachable</span><br><span class="line">    - icmp-port-unreachable</span><br><span class="line">    - icmp-proto-unreachable</span><br><span class="line">    - icmp-net-prohibited</span><br><span class="line">    - icmp-host-prohibited</span><br><span class="line">    - icmp-admin-prohibited</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他 target</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* SNAT</span><br><span class="line">* DNAT</span><br><span class="line">* MASQUERADE</span><br><span class="line">  - NAT 相关</span><br><span class="line"></span><br><span class="line">* LED</span><br><span class="line">  - 用来控制网卡的指示灯</span><br><span class="line">  - 当系统收到了特定的某些包时，可以控制网卡灯闪烁、亮、灭等</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：firewall-cmd-指令"><a href="#知识点：firewall-cmd-指令" class="headerlink" title="知识点：firewall-cmd 指令"></a>知识点：firewall-cmd 指令</h3><hr>
<h1 id="Chapter09-进程"><a href="#Chapter09-进程" class="headerlink" title="Chapter09 进程"></a>Chapter09 进程</h1><hr>
<h2 id="9-1-进程介绍"><a href="#9-1-进程介绍" class="headerlink" title="9.1 进程介绍"></a>9.1 进程介绍</h2><hr>
<h3 id="知识点：Linux-内存类型"><a href="#知识点：Linux-内存类型" class="headerlink" title="知识点：Linux 内存类型"></a>知识点：Linux 内存类型</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 物理内存 physical memory</span><br><span class="line">  - a limited resource where code and data must reside when executed or referenced.</span><br><span class="line"></span><br><span class="line">* 交换空间 swap file</span><br><span class="line">  - where modified (dirty) memory can be saved and later retrieved if too many demands are made on physical memory.</span><br><span class="line"></span><br><span class="line">* 虚拟内存 virtual memory</span><br><span class="line">  - a nearly unlimited resource serving the following goals:</span><br><span class="line">    1. abstraction, free from physical memory addresses/limits</span><br><span class="line">    2. isolation, every process in a separate address space</span><br><span class="line">    3. sharing, a single mapping can serve multiple needs</span><br><span class="line">    4. flexibility, assign a virtual address to a file</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">For each such process, every memory page is restricted to a single quadrant from the table below.</span><br><span class="line">Both physical memory and virtual memory can include any of the four, while the swap file only includes #1 through #3.</span><br><span class="line">The memory in quadrant #4, when modified, acts as its own dedicated swap file.</span><br><span class="line"></span><br><span class="line">                              Private | Shared</span><br><span class="line">                          1           |        2</span><br><span class="line">      Anonymous . stack               |</span><br><span class="line">                . malloc()            |</span><br><span class="line">                . brk()/sbrk()        | . POSIX shm*</span><br><span class="line">                . mmap(PRIVATE, ANON) | . mmap(SHARED, ANON)</span><br><span class="line">                ----------------------+----------------------</span><br><span class="line">                . mmap(PRIVATE, fd)   | . mmap(SHARED, fd)</span><br><span class="line">    File-backed . pgms/shared libs    |</span><br><span class="line">                          3           |        4</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="9-2-进程指令"><a href="#9-2-进程指令" class="headerlink" title="9.2 进程指令"></a>9.2 进程指令</h2><hr>
<h3 id="知识点：watch-指令"><a href="#知识点：watch-指令" class="headerlink" title="知识点：watch 指令"></a>知识点：watch 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 每隔一段时间运行一次指定的命令，并显示输出</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  watch [Options] Command</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* -d, --differences [permanent]</span><br><span class="line">  - 高亮两次执行之间的变化</span><br><span class="line"></span><br><span class="line">* -n, --interval Seconds</span><br><span class="line">  - 指定时间间隔，默认 2 秒</span><br><span class="line"></span><br><span class="line">* -e, --errexit</span><br><span class="line">  - 当程序发生错误时，冻结输出并退出执行</span><br><span class="line"></span><br><span class="line">* -g, --chgexit</span><br><span class="line">  - 当输出发生变化时，退出执行</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：ps-指令"><a href="#知识点：ps-指令" class="headerlink" title="知识点：ps 指令"></a>知识点：ps 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - ps 指令，用来显示进程的信息</span><br><span class="line">  - ps 通过读取 proc 文件系统中的内容来实现功能</span><br><span class="line">  - ps 的默认输出的信息为：PID、TTY、累积 CPU 时间、程序名</span><br><span class="line">  - ps 支持 BSD 风格选项和 UNIX 风格选项</span><br><span class="line">    - 一般不使用 BSD 选项，除非很常用，或者功能为 BSD 独有</span><br><span class="line">    - BSD 风格选项默认比 UNIX 风格选项，会多显示进程状态 STAT、程序参数这两个信息</span><br><span class="line">  - ps 的选项的参数可以采用列表形式，可以是 comma 分隔的，也可以是 space 分隔的</span><br><span class="line">    - 建议将 list 放在 &#x27;&#x27; 中</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>用法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  ps [OPTIONS]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>常用</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ps aux</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看所有进程的信息，BSD 风格</span></span><br><span class="line"></span><br><span class="line">ps -ef</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看所有进程的信息</span></span><br><span class="line"></span><br><span class="line">ps -ef --forest</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看进程森林</span></span><br><span class="line"></span><br><span class="line">ps -efL</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看进程和线程的信息</span></span><br><span class="line"></span><br><span class="line">ps -e -o &#x27;pid,ppid,arg&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看所有进程，并只输出指定的列</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程的状态代码 STAT</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* 基本</span><br><span class="line">  D     &lt;== 不可中断的睡眠，通常是正在 IO</span><br><span class="line">  R     &lt;== running 或者 runnable</span><br><span class="line">  S     &lt;== 可中断的睡眠，等待某个事件才能完成</span><br><span class="line">  T     &lt;== 被作业控制信号给 stopped 了</span><br><span class="line">  t     &lt;== 在 tracing 时被 debugger 给 stopped 了</span><br><span class="line">  W     &lt;== 正在分页</span><br><span class="line">  X     &lt;== desd</span><br><span class="line">  Z     &lt;== zombie，已经被 terminated 了，但并没有被其父进程给 destroy</span><br><span class="line"></span><br><span class="line">* BSD 独有</span><br><span class="line">  &lt;     &lt;== 高权限</span><br><span class="line">  N     &lt;== 低权限</span><br><span class="line">  s     &lt;== 是一个 session leader</span><br><span class="line">  l     &lt;== 以多线程的方式在运行</span><br><span class="line">  +     &lt;== 前台进程</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：ps-指令选项"><a href="#知识点：ps-指令选项" class="headerlink" title="知识点：ps 指令选项"></a>知识点：ps 指令选项</h3><ol>
<li><strong>选取进程</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* -e, -A</span><br><span class="line">  - 选取所有进程</span><br><span class="line"></span><br><span class="line">* -N</span><br><span class="line">  - 反向选取进程</span><br><span class="line"></span><br><span class="line">* ax</span><br><span class="line">  - 选取所有进程，BSD 风格</span><br><span class="line"></span><br><span class="line">* t</span><br><span class="line">  - 选取所有属于当前终端的进程</span><br><span class="line"></span><br><span class="line">* r</span><br><span class="line">  - 仅选取 running 的进程</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>按照列表选取进程</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* -123, -p PidList, --pid PidList</span><br><span class="line">  - 按照 pid 来选取进程</span><br><span class="line"></span><br><span class="line">* --ppid PidList</span><br><span class="line">  - 按照 ppid 来选取进程</span><br><span class="line"></span><br><span class="line">* -C CmdList</span><br><span class="line">  - 按照 command 来选取进程</span><br><span class="line"></span><br><span class="line">* -u UserList, --user UserList</span><br><span class="line">  - 按照 EUID 来选取进程</span><br><span class="line"></span><br><span class="line">* -U UserList, --User UserList</span><br><span class="line">  - 按照 RUID 来选取基础</span><br><span class="line"></span><br><span class="line">* --group Grplist</span><br><span class="line">  - 按照 EGID 来选取进程</span><br><span class="line"></span><br><span class="line">* -G GrpList, --Group GrpList</span><br><span class="line">  - 按照 RGID 来选取进程</span><br><span class="line"></span><br><span class="line">* -t TtyList, --tty TtyList</span><br><span class="line">  - 按照 tty 来选取进程</span><br><span class="line"></span><br><span class="line">* -s SessList, --sid SessList</span><br><span class="line">  - 按照 session id 来选取进程</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>控制输出的内容</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* --context</span><br><span class="line">  - 显示进程的安全性信息</span><br><span class="line"></span><br><span class="line">* -f, -F</span><br><span class="line">  - 详细输出，其中 -F 比 -f 更详细</span><br><span class="line"></span><br><span class="line">* -l</span><br><span class="line">  - 长输出</span><br><span class="line"></span><br><span class="line">* -o Format</span><br><span class="line">  - 输出指定的信息</span><br><span class="line"></span><br><span class="line">* -O Format</span><br><span class="line">  - 输出指定的信息，相比 -o 会默认加载一些基础的列</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>控制输出的样式</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* --forest</span><br><span class="line">  - 进程树，ASCII 风格</span><br><span class="line"></span><br><span class="line">* -H</span><br><span class="line">  - 进程树，缩进方式</span><br><span class="line"></span><br><span class="line">* -w</span><br><span class="line">  - 宽输出，-ww 表示无限宽</span><br><span class="line"></span><br><span class="line">* e</span><br><span class="line">  - 输出 command 时同时输出环境变量</span><br><span class="line"></span><br><span class="line">* --sort Spec</span><br><span class="line">  - 指定排序依据</span><br><span class="line">  - Spec 的语法：[+|-]Key[,...]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>线程相关</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* -L</span><br><span class="line">  - 显示线程</span><br><span class="line"></span><br><span class="line">* -m</span><br><span class="line">  - 在进程之后显示线程</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* --help</span><br><span class="line"></span><br><span class="line">* -V</span><br><span class="line">  - 显示版本信息</span><br><span class="line"></span><br><span class="line">* L</span><br><span class="line">  - 显示所有的 format specifier</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：ps-指令输出格式控制"><a href="#知识点：ps-指令输出格式控制" class="headerlink" title="知识点：ps 指令输出格式控制"></a>知识点：ps 指令输出格式控制</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* FORMAT SPECIFIER</span><br><span class="line">  - 格式标识符</span><br><span class="line">  - 放在 -o 选项中，用于指定输出哪些信息</span><br><span class="line">  - 一个 FORMAT SPECIFIER 指定一个信息列 field</span><br><span class="line">  - CODE 用在 -o 选项，HEADER 为 ps 指令输出时的 field header</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程基本信息</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 进程 id</span><br><span class="line">  - CODE: pid, HEADER: PID</span><br><span class="line"></span><br><span class="line">* 父进程 id</span><br><span class="line">  - CODE: ppid, HEADER: PPID</span><br><span class="line"></span><br><span class="line">* 进程组 id</span><br><span class="line">  - CODE: pgid, HEADER: PGID</span><br><span class="line">  - CODE: pgrp, HEADER: PGID</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程的程序 command</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 进程的程序，包含参数</span><br><span class="line">  - CODE: args, HEADER: COMMAND</span><br><span class="line">  - CODE: cmd, HEADER: COMMAND</span><br><span class="line">  - CODE: command, HEADER: COMMAND</span><br><span class="line"></span><br><span class="line">* 进程的程序，不包含参数</span><br><span class="line">  - CODE: comm, HEADER: COMMAND</span><br><span class="line">  - CODE: ucmd, HEADER: CMD</span><br><span class="line">  - CODE: ucomm, HEADER: COMMAND</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程的 UID 和 GID</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">* 进程的 EUID</span><br><span class="line">  - CODE: euid, HEADER: EUID        &lt;== EUID</span><br><span class="line">  - CODE: uid, HEADER: EUID         &lt;== EUID</span><br><span class="line">  - CODE: euser, HEADER: EUSER      &lt;== EUID name</span><br><span class="line">  - CODE: uname, HEADER: EUSER      &lt;== EUID name</span><br><span class="line">  - CODE: user, HEADER: USER        &lt;== EUID name</span><br><span class="line"></span><br><span class="line">* 进程的 RUID</span><br><span class="line">  - CODE: ruid, HEADER: RUID        &lt;== RUID</span><br><span class="line">  - CODE: ruser, HEADER: RUSER      &lt;== RUID name</span><br><span class="line"></span><br><span class="line">* 进程的 EGID</span><br><span class="line">  - CODE: egid, HEADER: EGID        &lt;== EGID</span><br><span class="line">  - CODE: gid, HEADER: EGID         &lt;== EGID</span><br><span class="line">  - CODE: egroup, HEADER: EGROUP    &lt;== EGID name</span><br><span class="line">  - CODE: group, HEADER: EGROUP     &lt;== EGID name</span><br><span class="line"></span><br><span class="line">* 进程的 RGID</span><br><span class="line">  - CODE: rgid, HEADER: RGID        &lt;== RGID</span><br><span class="line">  - CODE: rgroup, HEADER: RGROUP    &lt;== RGID name</span><br><span class="line"></span><br><span class="line">* 进程的 FUID</span><br><span class="line">  - CODE: fuid, HEADER: FUID        &lt;== FUID</span><br><span class="line">  - CODE: fuser, HEADER: FUSER      &lt;== FUID name</span><br><span class="line"></span><br><span class="line">* 进程的 FGID</span><br><span class="line">  - CODE: fgid, HEADER: FGID        &lt;== FGID</span><br><span class="line">  - CODE: fsgid, HEADER: FGID       &lt;== FGID</span><br><span class="line">  - CODE: fgroup, HEADER: FGROUP    &lt;== FGID name</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程的 session</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 进程的 session id</span><br><span class="line">  - CODE: sess, HEADER: SESS</span><br><span class="line">  - CODE: session, HEADER: SESS</span><br><span class="line">  - CODE: sid, HEADER: SID</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程的调度策略</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 进程的调度策略</span><br><span class="line">  - CODE: class, HEADER: CLS</span><br><span class="line">  - CODE: cls, HEADER: CLS</span><br><span class="line">  - CODE: policy, HEADER: POL</span><br><span class="line"></span><br><span class="line">* 进程的调度策略，每个策略使用数字表示</span><br><span class="line">  - CODE: sched, HEADER: SCH</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程的优先级</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 进程的优先级</span><br><span class="line">  - CODE: pri, HEADER: PRI</span><br><span class="line"></span><br><span class="line">* 进程的 nice 值</span><br><span class="line">  - CODE: ni, HEADER: NI</span><br><span class="line">  - CODE: nice, HEADER: NI</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程的 TTY</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 进程的 tty</span><br><span class="line">  - CODE: tname, HEADER: TTY</span><br><span class="line">  - CODE: tt, HEADER: TT</span><br><span class="line">  - CODE: tty, HEADER: TT</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程的时间</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 进程启动的时刻</span><br><span class="line">  - CODE: bsdstart, HEADER: START</span><br><span class="line">  - CODE: lstart, HEADER: STARTED</span><br><span class="line">  - CODE: start, HEADER: STARTED</span><br><span class="line">  - CODE: start_time, HEADER: START</span><br><span class="line">  - CODE: stime, HEADER: STIME</span><br><span class="line"></span><br><span class="line">* 进程已启动的时间</span><br><span class="line">  - CODE: etime, HEADER: ELAPSED      &lt;== 格式为 [[DD-]hh:]mm:ss</span><br><span class="line">  - CODE: etimes, HEADER: ELAPSED     &lt;== 格式为 seconds</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程状态</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 进程的旗标</span><br><span class="line">  - CODE: f, HEADER: F</span><br><span class="line">  - CODE: flag, HEADER: F</span><br><span class="line">  - CODE: flags, HEADER: F</span><br><span class="line"></span><br><span class="line">* 进程的状态</span><br><span class="line">  - CODE: stat, HEADER: STAT</span><br><span class="line"></span><br><span class="line">* 进程的状态，只显示第一个字符</span><br><span class="line">  - CODE: s, HEADER: S</span><br><span class="line">  - CODE: state, HEADER: S</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程的 CPU 使用</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">* 进程的 CPU 利用率 cpu utilization</span><br><span class="line">  - CODE: %cpu, HEADER: %CPU</span><br><span class="line">  - CODE: pcpu, HEADER: %CPU</span><br><span class="line"></span><br><span class="line">* 进程的 CPU 利用率，精确到千分之一</span><br><span class="line">  - CODE: cp, HEADER: CP</span><br><span class="line"></span><br><span class="line">* 进程的累积 CPU 时间 accumulated cpu time，user + system</span><br><span class="line">  - CODE: bsdtime, HEADER: TIME</span><br><span class="line"></span><br><span class="line">* 进程的累积 CPU 时间 cumulative cpu time</span><br><span class="line">  - CODE: cputime, HEADER: TIME       &lt;== 格式为 [DD-]HH:MM:SS</span><br><span class="line">  - CODE: time, HEADER: TIME          &lt;== 格式为 [DD-]HH:MM:SS</span><br><span class="line">  - CODE: cputimes, HEADER: TIME      &lt;== 格式为 seconds</span><br><span class="line">  - CODE: times, HEADER: TIME         &lt;== 格式为 seconds</span><br><span class="line"></span><br><span class="line">* 进程的 processor 利用率</span><br><span class="line">  - CODE: c, HEADER: C</span><br><span class="line"></span><br><span class="line">* 进程当前使用的 processor</span><br><span class="line">  - CODE: sgi_p, HEADER: P</span><br><span class="line"></span><br><span class="line">* 进程当前分配的 processor</span><br><span class="line">  - CODE: psr, HEADER: PSR</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程的内存使用</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">* 进程的内存利用率</span><br><span class="line">  - CODE: %mem, HEADER: %MEM</span><br><span class="line">  - CODE: pmem, HEADER: %MEM</span><br><span class="line"></span><br><span class="line">* 进程的数据占用空间，data resident set size</span><br><span class="line">  - CODE: drs, HEADER: DRS</span><br><span class="line"></span><br><span class="line">* 进程的代码占用空间，text resident set size</span><br><span class="line">  - CODE: trs, HEADER: TRS</span><br><span class="line"></span><br><span class="line">* 进程当前真实的物理内存占用空间，resident set size</span><br><span class="line">  - CODE: rss, HEADER: RSS</span><br><span class="line">  - CODE: rssize, HEADER: RSS</span><br><span class="line">  - CODE: rsz, HEADER: RSS</span><br><span class="line"></span><br><span class="line">* 进程需要的 swap 空间大小</span><br><span class="line">  - CODE: size, HEADER: SIZE</span><br><span class="line"></span><br><span class="line">* 进程的虚拟内存大小</span><br><span class="line">  - CODE: vsz, HEADER: VSZ</span><br><span class="line">  - CODE: vsize, HEADER: VSZ</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>线程相关</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 线程 ID，tid</span><br><span class="line">  - CODE: tid, HEADER: TID</span><br><span class="line">  - CODE: lwp, HEADER: LWP</span><br><span class="line">  - CODE: spid, HEADER: SPID</span><br><span class="line"></span><br><span class="line">* 线程的组 ID</span><br><span class="line">  - CODE: tgid, HEADER: TGID</span><br><span class="line"></span><br><span class="line">* 进程所拥有的线程的数量</span><br><span class="line">  - CODE: thcount, HEADER: THCNT</span><br><span class="line">  - CODE: nlwp, HEADER: NLWP</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>寄存器相关</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 结构指针</span><br><span class="line">  - CODE: eip, HEADER: EIP</span><br><span class="line"></span><br><span class="line">* 堆指针</span><br><span class="line">  - CODE: esp, HEADER: ESP</span><br><span class="line"></span><br><span class="line">* 栈的开始位置</span><br><span class="line">  - CODE: stackp, HEADER: STACKP</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>信号</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* 进程 block 的信号的掩码</span><br><span class="line">  - CODE: blocked, HEADER: BLOCKED</span><br><span class="line">  - CODE: sigmask, HEADER: BLOCKED</span><br><span class="line"></span><br><span class="line">* 进程 caught 的信号的掩码</span><br><span class="line">  - CODE: caught, HEADER: CAUGHT</span><br><span class="line">  - CODE: sig_cache, HEADER: CAUGHT</span><br><span class="line">  - CODE: sigcatch, HEADER: CAUGHT</span><br><span class="line"></span><br><span class="line">* 进程 ignore 的信号的掩码</span><br><span class="line">  - CODE: ignored, HEADER: IGNORED</span><br><span class="line">  - CODE: sigignore, HEADER: IGNORED</span><br><span class="line"></span><br><span class="line">* 进程 pending 的信号的掩码</span><br><span class="line">  - CODE: pending, HEADER: PENDING</span><br><span class="line">  - CODE: sig, HEADER: PENDING</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 进程所属的 unit</span><br><span class="line">  - CODE: unit, HEADER: UNIT</span><br><span class="line"></span><br><span class="line">* waiting channel</span><br><span class="line">  - CODE: wchan, HEADER: WCHAN</span><br><span class="line">  - CODE: nwchan, HEADER: WCHAN</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="9-3-IO"><a href="#9-3-IO" class="headerlink" title="9.3 IO"></a>9.3 IO</h2><hr>
<h3 id="知识点：IO-介绍"><a href="#知识点：IO-介绍" class="headerlink" title="知识点：IO 介绍"></a>知识点：IO 介绍</h3><ol>
<li><strong>IO 概念</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* IO</span><br><span class="line">  - 进程向内核发起的系统调用，请求磁盘或远程的某个资源</span><br><span class="line">  - 内核通过驱动程序，将数据加载到内核空间，再把数据从内核空间复制到进程空间</span><br><span class="line"></span><br><span class="line">* 同步 IO 与异步 IO</span><br><span class="line">  - 主要关注事件处理的消息通信机制，被调用者是否提供完成通知</span><br><span class="line">  - 同步</span><br><span class="line">    - 被调用者不提供完成通知</span><br><span class="line">    - 调用者需要主动询问事件是否处理完成</span><br><span class="line">  - 异步</span><br><span class="line">    - 被调用者提供完成通知</span><br><span class="line"></span><br><span class="line">* 阻塞 IO 与非阻塞 IO</span><br><span class="line">  - 主要关注调用者在等待结果返回时的状态</span><br><span class="line">  - 阻塞 blocking</span><br><span class="line">    - 调用者在结果返回之前被挂起，干不了其他事</span><br><span class="line">  - 非阻塞 nonblocking</span><br><span class="line">    - 调用者在发出调用请求之后就会被返回一个状态值</span><br><span class="line">    - 调用者在结果返回之前，不会被挂起，可以干其他事</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>IO 模型</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* 同步阻塞型 IO，blocking IO</span><br><span class="line">  - 优点，程序简单</span><br><span class="line">  - 缺点，每个连接都需要单独的进程专门处理</span><br><span class="line"></span><br><span class="line">* 同步非阻塞型 IO，nonblocking IO</span><br><span class="line">  - 询问系统呼叫 recvfrom</span><br><span class="line">  - 缺点，不断轮询的开销很大</span><br><span class="line"></span><br><span class="line">* IO 多路复用型，IO multiplexing</span><br><span class="line">  - 也称为事件驱动型，event driven IO</span><br><span class="line">  - apache prefork，select</span><br><span class="line">  - apache work，poll</span><br><span class="line"></span><br><span class="line">* 信号驱动型，signal-driven IO</span><br><span class="line">  - 信号处理程序</span><br><span class="line">  - apache event，信号驱动</span><br><span class="line"></span><br><span class="line">* 异步非阻塞 IO，asynchronous IO</span><br><span class="line">  - 数据到达内核空间后，直接复制到进程空间，复制完后再通知进程，少了一次系统调用的开销</span><br><span class="line">  - 其他的几种模型，数据到达内核空间后，需要先通知进程，然后进程发起调用，然后再从内核空间复制到进程空间</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：iostat-指令"><a href="#知识点：iostat-指令" class="headerlink" title="知识点：iostat 指令"></a>知识点：iostat 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">* 作用，从 Device 维度输出 IO 统计信息</span><br><span class="line">  - 打印 CPU 使用情况的统计信息</span><br><span class="line">  - 打印 hard device 和 partition 的 IO 统计信息</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  iostat [OPTIONS] [Device [, ...]|ALL] [Interval [Count]]</span><br><span class="line"></span><br><span class="line">* Device [, ...]</span><br><span class="line">  - 指定统计的 block 设备，默认所有</span><br><span class="line"></span><br><span class="line">* Internal</span><br><span class="line">  - 持续性输出，指定输出报告的时间间隔</span><br><span class="line">  - 0 表示输出从系统启动以来到现在的统计信息</span><br><span class="line"></span><br><span class="line">* Count</span><br><span class="line">  - 指定输出报告的次数</span><br><span class="line"></span><br><span class="line">* 统计信息对应的时间段</span><br><span class="line">  - 输出的第一篇报告，其统计信息的采样时间为从系统启动到当前时刻</span><br><span class="line">  - 之后输出每一份的报告，采样时间都是从上一份报告 previous report 的时刻到当前时刻的时间段</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">* -c</span><br><span class="line">  - 输出 CPU 报告</span><br><span class="line"></span><br><span class="line">* -d</span><br><span class="line">  - 输出 IO 报告</span><br><span class="line"></span><br><span class="line">* -t</span><br><span class="line">  - 报告中包含时间</span><br><span class="line"></span><br><span class="line">* -y</span><br><span class="line">  - 省略第一篇报告</span><br><span class="line"></span><br><span class="line">* -z</span><br><span class="line">  - 省略非活跃的 Device</span><br><span class="line">  - 判断 Device 是否活跃根据采样时间</span><br><span class="line"></span><br><span class="line">* -x</span><br><span class="line">  - 报告中包含额外的字段</span><br><span class="line"></span><br><span class="line">* -k, -m</span><br><span class="line">  - 指定使用的单位，kB、mB</span><br><span class="line"></span><br><span class="line">* -p</span><br><span class="line">  - 输出针对 partition 的统计信息</span><br><span class="line">  - 默认只输出针对 Device 的统计信息</span><br><span class="line"></span><br><span class="line">* -j &#123; ID | LABEL | PATH | UUID | ... &#125;</span><br><span class="line">  - DeviceName 使用持久设备名称 persistent device names 进行输出</span><br><span class="line"></span><br><span class="line">* 其他</span><br><span class="line">  -h, --human     人类易读</span><br><span class="line">  -o JSON         使用 json 格式输出</span><br><span class="line">  --dec=&#123;0|1|2&#125;   指定使用的小数的精度</span><br><span class="line">  - -V            打印 version 信息</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>CPU 报告 CPU Utilization report</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 包括一个标题行</span><br><span class="line">  - 包括一个统计数据行</span><br><span class="line">  - 对于多处理器的系统，统计的数据是对多个处理器取平均值</span><br><span class="line">  - 对于报告中的各个字段，相加后总和等于 100%</span><br><span class="line"></span><br><span class="line">* %user</span><br><span class="line">  - the percentage of CPU utilization that occurred while executing at the user level</span><br><span class="line">  - 用户层执行 (application) 占 CPU 利用率的百分比</span><br><span class="line"></span><br><span class="line">* %nice</span><br><span class="line">  - the percentage of CPU utilization that occurred while executing at the user level with nice priority</span><br><span class="line">  - 用户层执行带有优先权 nice priority 占 CPU 利用率的百分比</span><br><span class="line"></span><br><span class="line">* %system</span><br><span class="line">  - the percentage of CPU utilization that occurred while executing at the system level</span><br><span class="line">  - 系统层执行 (kernel) 占 CPU 利用率的百分比</span><br><span class="line"></span><br><span class="line">* %iowait</span><br><span class="line">  - the percentage of time that the CPU or CPUs were idle during which the system had an outstanding disk I/O request</span><br><span class="line">  - IO 等待占 CPU 利用率的百分比</span><br><span class="line"></span><br><span class="line">* %steal</span><br><span class="line">  - the percentage of time spent in involuntary wait by the virtual CPU or CPUs while the hypervisor was servicing another virtual processor.</span><br><span class="line">  - 非自愿等待(不懂)占 CPU 利用率的百分比</span><br><span class="line"></span><br><span class="line">* %idle</span><br><span class="line">  - 完全空闲占 CPU 利用率的百分比 the percentage of time that the CPU or CPUs were idle and the system did not have an outstanding disk I/O request.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>IO 报告 Device Utilization report</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 包括一个标题行</span><br><span class="line">  - 每一个 hard device 或 partition 一行统计数据</span><br><span class="line">  - 若未指定设备则只输出 hard device</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* Device</span><br><span class="line">  - hard device 名或 partition 名</span><br><span class="line"></span><br><span class="line">* Blk_read/s、kB_read/s、MB_read/s</span><br><span class="line">* Blk_wrtn/s、kB_wrtn/s、MB_wrtn/s</span><br><span class="line">* Blk_dscd/s、kB_dscd/s、MB_dscd/s</span><br><span class="line">  - 数据速率，读、写、丢弃 discarded</span><br><span class="line">  - Blk 代表 512B</span><br><span class="line"></span><br><span class="line">* Blk_read、kB_read、MB_read</span><br><span class="line">* Blk_wrtn、kB_wrtn、MB_wrtn</span><br><span class="line">* Blk_dscd、kB_dscd、MB_dscd</span><br><span class="line">  - 数据总量，读、写、丢弃</span><br><span class="line"></span><br><span class="line">* sec/s、kB/s、MB/s</span><br><span class="line">* rsec/s、rkB/s、rMB/s</span><br><span class="line">* wsec/s、wkB/s、wMB/s</span><br><span class="line">* dsec/s、dkB/s、dMB/s</span><br><span class="line">  - sector 速率，总、读、写、丢弃</span><br><span class="line"></span><br><span class="line">* aqu-sz</span><br><span class="line">  - 设备的平均队列长度 The average queue length of the requests that were issued to the device.</span><br><span class="line"></span><br><span class="line">* %util</span><br><span class="line">  - 设备带宽的饱和程度 Percentage of elapsed time during which I/O requests were issued to the device</span><br><span class="line">  - 对于串行处理 serially 数据的设备，当此数值接近 100% 表示设备的处理能力接近饱和 saturation</span><br><span class="line">  - 对于并行处理 parallel 数据的设备，如 RAID 或 SSD，此数据并不能真实反映其性能极限</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">* tps</span><br><span class="line">  - IO 请求速率 transfers per second</span><br><span class="line"></span><br><span class="line">* rqm/s</span><br><span class="line">* rrqm/s</span><br><span class="line">* wrqm/s</span><br><span class="line">* drqm/s</span><br><span class="line">  - 合并的 IO 请求速率，总、读、写、丢弃 The number of I/O requests merged per second that were queued to the device.</span><br><span class="line"></span><br><span class="line">* r/s</span><br><span class="line">* w/s</span><br><span class="line">* d/s</span><br><span class="line">  - 完成的 IO 请求速率，读、写、丢弃 The number (after merges) of requests completed per second for the device</span><br><span class="line"></span><br><span class="line">* %rrqm</span><br><span class="line">* %wrqm</span><br><span class="line">* %drqm</span><br><span class="line">  - 合并的 IO 的百分比，读、写、丢弃 The percentage of requests merged together before being sent to the device</span><br><span class="line"></span><br><span class="line">* areq-sz</span><br><span class="line">* rareq-sz</span><br><span class="line">* wareq-sz</span><br><span class="line">* dareq-sz</span><br><span class="line">  - IO 请求的平均大小，单位 kB，总、读、写、丢弃 The average size of the I/O requests that were issued to the device.</span><br><span class="line"></span><br><span class="line">* await</span><br><span class="line">* r_await</span><br><span class="line">* w_await</span><br><span class="line">* d_await</span><br><span class="line">  - IO 请求的平均等待时间，单位毫秒，总、读、写、丢弃 The average time (in milliseconds) for I/O requests issued to the device to be served.</span><br><span class="line">  - 此时间包含 IO 请求在队列中的时间和实际处理 IO 请求的时间 This includes the time spent by the requests in queue and the time spent servicing them.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 相关文件</span><br><span class="line"></span><br><span class="line">* 相关环境变量</span><br><span class="line">  S_COLORS      带颜色输出，可选值包括 never、always、auto</span><br><span class="line">  S_COLORS_SGR  带颜色输出的具体颜色配置，颜色代码使用 SGR 格式</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iostat -p sda sdb 2 6</span><br><span class="line"><span class="meta">#</span><span class="bash"> 针对 sda 和 sdb 输出报告，包含分区</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 每 2 秒输出一次，共输出 6 次</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：lsof-指令"><a href="#知识点：lsof-指令" class="headerlink" title="知识点：lsof 指令"></a>知识点：lsof 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 查看进程打开文件的情况</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  losf [OPTIONS] [names]</span><br><span class="line"></span><br><span class="line">* names</span><br><span class="line">  - 如果是一个文件系统的挂载点，则显示此文件系统中所有打开的文件</span><br><span class="line">  - 如果是一个文件，则显示所有对此文件的打开情况</span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">* -h</span><br><span class="line">  - 打印帮助</span><br><span class="line"></span><br><span class="line">* -v</span><br><span class="line">  - 打印 losf 的版本信息</span><br><span class="line"></span><br><span class="line">* -a</span><br><span class="line">  - 默认情况下，筛选之间是 OR 逻辑</span><br><span class="line">  - 指定 -a 会改为 AND 逻辑</span><br><span class="line">  - 注意，-a 会对所有指定的筛选生效</span><br><span class="line"></span><br><span class="line">* -i address</span><br><span class="line">  - 筛选网络文件</span><br><span class="line">  - address，用来指定网络文件的地址，格式 [46][protocol][@hostname|hostaddr][:service|port]</span><br><span class="line">  - service 或 port 支持使用 &#x27;,&#x27; 表示多个、&#x27;-&#x27; 表示范围，但不能有空格</span><br><span class="line">  - 例如，4tcp@192.168.0.124::3306,9090</span><br><span class="line">  - 由于一个 socket 同时包含两个地址，-i 并不区分 socket 的原地址还是目标地址</span><br><span class="line"></span><br><span class="line">* -n</span><br><span class="line">  - 在显示网络文件时，显示 ip 地址而不是 hostname</span><br><span class="line"></span><br><span class="line">* -P</span><br><span class="line">  - 在显示网络文件时，显示 port number 地址而不是 service name</span><br><span class="line"></span><br><span class="line">* -s protocol:status_list</span><br><span class="line">  - 显示网络文件时，仅显示指定协议的指定状态的网络文件</span><br><span class="line">  - protocol 可以是 TCP 或 UDP</span><br><span class="line">  - TCP 常见的状态包括 CLOSED, IDLE, BOUND, LISTEN, ESTABLISHED, SYN_SENT, SYN_RCDV,  ESTABLISHED, CLOSE_WAIT, FIN_WAIT1, CLOSING, LAST_ACK, FIN_WAIT_2, and TIME_WAIT</span><br><span class="line">  - UDP 常见的状态包括 Unbound and Idle</span><br><span class="line"></span><br><span class="line">* -c characters</span><br><span class="line">  - 筛选进程的 command</span><br><span class="line">  - characters 用来指定进程的 command 的开头部分字符</span><br><span class="line">  - characters 如果以 &#x27;^&#x27; 开头，表示反向选择</span><br><span class="line">  - characters 如果包裹在 &#x27;/&#x27; 中，表示正则表达式。此时，末尾的 &#x27;/&#x27; 可以追加修饰符，其中 &#x27;i&#x27; 表示不区分大小写</span><br><span class="line"></span><br><span class="line">* -p pid_list</span><br><span class="line">  - 筛选进程的 pid</span><br><span class="line">  - pid_list 支持 &#x27;,&#x27; 间隔，支持 &#x27;^&#x27; 表示取反</span><br><span class="line"></span><br><span class="line">* -u user_list</span><br><span class="line">  - 筛选进程的 user</span><br><span class="line">  - user_list 可以是 uid、username</span><br><span class="line">  - user_list 支持 &#x27;,&#x27; 间隔，支持 &#x27;^&#x27; 表示取反</span><br><span class="line"></span><br><span class="line">* +d dir</span><br><span class="line">  - 显示 dir 的一级子目录中被打开的文件</span><br><span class="line"></span><br><span class="line">* +D dir</span><br><span class="line">  - 显示 dir 的所有子目录中被打开的文件</span><br><span class="line"></span><br><span class="line">* -U</span><br><span class="line">  - 筛选 UNIX domain socket file</span><br><span class="line">  - UNIX domain socket file 使用在 IPC 通信中</span><br><span class="line"></span><br><span class="line">* -d fd_list</span><br><span class="line">  - 根据文件描述符进行筛选</span><br><span class="line">  - fd_list 可以是 &#x27;,&#x27; 间隔的列表，以 &#x27;^&#x27; 开头表示反向筛选，&#x27;-&#x27; 表示范围</span><br><span class="line"></span><br><span class="line">* +c number</span><br><span class="line">  - 指定 lsof 在输出时，COMMAND 一列的输出长度，默认为 9</span><br><span class="line"></span><br><span class="line">* -K</span><br><span class="line">  - 按照线程而非进程显示文件的打开情况</span><br><span class="line">  - 注意，一定要和 &#x27;-a&#x27; 一起使用，否则输出会过多</span><br><span class="line"></span><br><span class="line">* -N</span><br><span class="line">  - 筛选 NFS 文件</span><br><span class="line"></span><br><span class="line">* -R</span><br><span class="line">  - 显示 ppid</span><br><span class="line"></span><br><span class="line">* -s</span><br><span class="line">  - 显示文件的大小</span><br><span class="line"></span><br><span class="line">* -t</span><br><span class="line">  - 让 losf 只打印 pid，用处是可以发送给 kill</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>输出</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">* COMMADN</span><br><span class="line">  - 显示进程的程序</span><br><span class="line"></span><br><span class="line">* PID</span><br><span class="line">  - 显示进程的 pid</span><br><span class="line"></span><br><span class="line">* TID</span><br><span class="line">  - 显示线程的 tid</span><br><span class="line"></span><br><span class="line">* USER</span><br><span class="line">  - 显示进程的 user</span><br><span class="line"></span><br><span class="line">* FD</span><br><span class="line">  - 记录文件的文件描述符、文件的打开方式、是否上锁</span><br><span class="line">  - 详细见 man</span><br><span class="line"></span><br><span class="line">* TYPE</span><br><span class="line">  文件的类型，如 IPv4 表示 IPv4 socket、DIR 表示目录、REG 表示普通文件</span><br><span class="line"></span><br><span class="line">* NAME</span><br><span class="line">  - 文件名</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* lsof</span><br><span class="line">  - 显示所有的打开文件的情况</span><br><span class="line"></span><br><span class="line">* lsof -i @192.168.100.101:2181,3306</span><br><span class="line">  - 显示包含 192.168.100.101:2181 或 192.168.100.101:3306 的网络文件的打开情况</span><br><span class="line">  - 不论是在 socket 的源地址部分还是目的地址部分</span><br><span class="line"></span><br><span class="line">* lsof -a -i :3306 -p 512</span><br><span class="line">  - 显示端口为 3306 并且进程 pid 为 512 的打开文件的情况</span><br><span class="line"></span><br><span class="line">* lsof +D /data/mysql</span><br><span class="line">  - 显示对 /data/mysql 目录下所有子文件的打开情况</span><br><span class="line"></span><br><span class="line">* lsof -a -c java -u hive -i @192.168.100.101:3306</span><br><span class="line">  - 筛选条件：进程为 java，用户为 hive，地址为 192.168.100.101:3306</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li></li>
</ul>
<hr>
<h2 id="9-4-进程监控"><a href="#9-4-进程监控" class="headerlink" title="9.4 进程监控"></a>9.4 进程监控</h2><hr>
<h3 id="知识点：top-指令"><a href="#知识点：top-指令" class="headerlink" title="知识点：top 指令"></a>知识点：top 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 以动态实时视图的方式，显示 Linux 进程</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  top [OPTIONS]</span><br><span class="line"></span><br><span class="line">* OUTPUT</span><br><span class="line">  1) Summary Area，报告 CPU、内存的汇总信息</span><br><span class="line">  2) Input/Message line</span><br><span class="line">  2) Fields/Columns Header，关于每个 Field 的具体含义，可以在 top 中使用 &quot;f&quot; 指令进行查看</span><br><span class="line">  3) Task/Process Area，报告每个进程的具体信息</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - top 对于选项，可以省略 &quot;-&quot;，可以省略 space</span><br><span class="line"></span><br><span class="line">* -b</span><br><span class="line">  - 以批模式 Batch-mode 运行</span><br><span class="line">  - top 像普通命令一样输出信息，不再支持内部交互操作</span><br><span class="line"></span><br><span class="line">* -d Seconds</span><br><span class="line">  - 指定 top 的刷新时间，支持 fractional second</span><br><span class="line"></span><br><span class="line">* -E k | m | g | t | p | e</span><br><span class="line">  - 指定 top 显示数据大小的单位</span><br><span class="line"></span><br><span class="line">* -H</span><br><span class="line">  - 指定 top 显示线程</span><br><span class="line"></span><br><span class="line">* -n Number</span><br><span class="line">  - 指定 top 的刷新次数</span><br><span class="line"></span><br><span class="line">* -o [-|+]Field</span><br><span class="line">  - 指定 top 的排序列，&quot;-&quot; 表示升序，&quot;+&quot; 表示降序</span><br><span class="line"></span><br><span class="line">* -O</span><br><span class="line">  - 仅打印出 top 支持的 FieldName 就退出，不显示进程信息</span><br><span class="line"></span><br><span class="line">* -pPid</span><br><span class="line">* -p PidList</span><br><span class="line">  - 指定 top 仅监控指定的进程，最多 20 个进程</span><br><span class="line">  - &quot;-pPid&quot; 格式可以重复指定</span><br><span class="line">  - &quot;-p PidList&quot; 格式使用 comma 分隔的列表</span><br><span class="line">  - Pid 0 表示 top 自己</span><br><span class="line">  - 与 &quot;-u&quot;、&quot;-U&quot; 选项互斥</span><br><span class="line"></span><br><span class="line">* -u [!]User</span><br><span class="line">* -U [!]User</span><br><span class="line">  - 指定 top 仅监控指定用户的的进程</span><br><span class="line">  - &quot;!&quot; 表示反向选择</span><br><span class="line">  - &quot;-u&quot; 表示 effective user</span><br><span class="line">  - &quot;-U&quot; 表示所有方式的用户，real、effective、saved、filesystem</span><br><span class="line"></span><br><span class="line">* 其他选项</span><br><span class="line">  -h    Help</span><br><span class="line">  -v    Version</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：top-内部操作"><a href="#知识点：top-内部操作" class="headerlink" title="知识点：top 内部操作"></a>知识点：top 内部操作</h3><ol>
<li><strong>全局操作 Global</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">* h、?</span><br><span class="line">  - 查看帮助</span><br><span class="line"></span><br><span class="line">* q、Ctrl+C</span><br><span class="line">  - 退出</span><br><span class="line"></span><br><span class="line">* Enter、Space :Refresh-Display</span><br><span class="line">  - 刷新 top 的内容</span><br><span class="line"></span><br><span class="line">* 0 :Zero-Suppress toggle</span><br><span class="line">  - 是否隐藏 0 数值</span><br><span class="line"></span><br><span class="line">* d | s :Change-Delay-Time-interval</span><br><span class="line">  - 修改 top 的刷新时间</span><br><span class="line"></span><br><span class="line">* E :Extend-Memory-Scale in Summary Area</span><br><span class="line">* e :Extend-Memory-Scale in Task Windows</span><br><span class="line">  - 切换内存大小的显示单位</span><br><span class="line"></span><br><span class="line">* H :Threads-mode toggle</span><br><span class="line">  - 是否显示线程</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>汇总区域内部操作 SUMMARY AREA</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">* C :Show-scroll-coordinates toggle</span><br><span class="line">  - 显示一个 scroll 状态行，用来表示当前的 scroll 状态</span><br><span class="line"></span><br><span class="line">* t :Task/Cpu-States toggle</span><br><span class="line">  - 切换 task summary 和 cpu summary 的显示方式</span><br><span class="line">  - 共计四种方式</span><br><span class="line">    1) CPU 利用率以分类 + 百分比的方式显示</span><br><span class="line">    2) CPU 利用率以 user/system 百分比，和总利用率采用百分比 + 使用 &quot;|&quot; 的图像显示</span><br><span class="line">    2) CPU 利用率以 user/system 百分比，和总利用率采用百分比 + 使用 block 的图像显示</span><br><span class="line">    4) 关闭 task 和 cpu 的统计信息的显示</span><br><span class="line">  - 两种图像方式，在多 CPU 的环境开启对每个 CPU 单独显示汇总信息时将会非常有用</span><br><span class="line"></span><br><span class="line">* m :Memory/Swap-Usage toggle</span><br><span class="line">  - 切换 physical memory summary 和 virtual memory summary 的显示方式</span><br><span class="line">  - 共计四种方式</span><br><span class="line">    1) 以分类 + 百分比的方式显示</span><br><span class="line">    2) 以 used/total 百分比，和总使用率采用百分比 + 使用 &quot;|&quot; 的图像显示</span><br><span class="line">    2) 以 used/total 百分比，和总使用率采用百分比 + 使用 block 的图像显示</span><br><span class="line">    4) 关闭内存的汇总显示</span><br><span class="line"></span><br><span class="line">* 1 :Single/Separate-Cpu-States toggle</span><br><span class="line">  - 数字 1，对于多 CPU 的环境，切换 CPU 利用率的汇总信息的显示方式</span><br><span class="line">  - 共计两种方式</span><br><span class="line">    1) 显示所有 CPU 的统计信息的平均值</span><br><span class="line">    2) 每个 CPU 单独一行显示自己的统计信息</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程区布局 TASK AREA Appearance</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* x :Column-Highlight toggle</span><br><span class="line">  - 是否高亮排序列</span><br><span class="line"></span><br><span class="line">* y :Row-Highlight toggle</span><br><span class="line">  - 是否高亮 running 进程</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程区内容 TASK AREA Content</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* c :Command-Line/Program-Name toggle</span><br><span class="line">  - 对于 COMMAND 列，切换显示 Command-Line/Program-Name</span><br><span class="line"></span><br><span class="line">* S :Cumulative-Time-Mode toggle</span><br><span class="line">  - 对于 Time，列，切换显示其自己使用的 CPU 时间，亦或其自己加上所有 dead child 使用的 CPU 时间</span><br><span class="line"></span><br><span class="line">* V :Forest-View-Mode toggle</span><br><span class="line">  - 森林方式显示进程，会重新对进程进行排序</span><br><span class="line">  - 父子进程关系显示在 COMMAND 字段中</span><br><span class="line"></span><br><span class="line">* v :Hide/Show-Children toggle</span><br><span class="line">  - 在森林方式显示中，是否显示子进程</span><br><span class="line"></span><br><span class="line">* u | U :Show-Specific-User-Only</span><br><span class="line">  - 输入 User，仅显示此用户的进程，&quot;!&quot; 表示反向选择</span><br><span class="line">  - u 表示 effective user</span><br><span class="line">  - U 表示 effective user、real user、saved user、filesystem user</span><br><span class="line"></span><br><span class="line">* f | F :Fields-Management</span><br><span class="line">  - 进入字段管理窗口，在里面设置 top 的 task area 中显示哪些字段、以哪个字段为 sort key</span><br><span class="line">    - Right          选择某一个 Field</span><br><span class="line">    - Up、Down       移动 Field 的顺序</span><br><span class="line">    - Left、Enter    提交修改</span><br><span class="line">    - d、Space       切换是否显示此 Field</span><br><span class="line">    - s              指定某一个 Field 为 sort key</span><br><span class="line">    - q、Esc         退出字段管理窗口</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程区尺寸 TASK AREA Size</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* i :Idle-Process toggle</span><br><span class="line">  - 切换显示 all tasks 或 just active tasks</span><br><span class="line">  - idle 进程表示从上次 update 之后到现在并没有使用 CPU 的进程</span><br><span class="line"></span><br><span class="line">* n | # :Set-Maximum-Tasks</span><br><span class="line">  - 设置 top 显示的进程数量</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程区排序 TASK AREA Sorting</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* &lt; :Move-Sort-Field-Left</span><br><span class="line">* &gt; :Move-Sort-Field-Right</span><br><span class="line">  - 向左/右选择当前可视的 Field 作为排序列</span><br><span class="line">  - 此时建议开启 &quot;x&quot; 高亮排序列</span><br><span class="line"></span><br><span class="line">* R :Reverse/Normal-Sort-Field toggle</span><br><span class="line">  - 切换升序、降序</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程区翻页 TASK AREA SCROLLING</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 在翻页时，Summary 区域会始终显示，只有 task area 会进行翻页</span><br><span class="line"></span><br><span class="line">* Up,PgUp :Scroll-Tasks</span><br><span class="line">* Down,PgDn :Scroll-Tasks</span><br><span class="line">  - 上下滚动，选择显示的进程</span><br><span class="line"></span><br><span class="line">* Left,Right :Scroll-Columns</span><br><span class="line">  - 左右滚动，选择显示的 Field</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>进程区搜索 TASK AREA SEARCHING</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* L :Locate-a-string</span><br><span class="line">  - 搜索一个字符串</span><br><span class="line"></span><br><span class="line">* &amp; :Locate-next</span><br><span class="line">  - 定位到下一个匹配项</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：pidstat-指令"><a href="#知识点：pidstat-指令" class="headerlink" title="知识点：pidstat 指令"></a>知识点：pidstat 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 从进程维度(Linux tasks)输出各种统计信息，如 CPU 使用率、IO 等</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  pidstat [-d|-R|-r|-s] [-t] [OPTIONS] [Interval [Count]] [ -e Program Args ]</span><br><span class="line"></span><br><span class="line">* Interval</span><br><span class="line">  - 持续性输出，指定输出报告的时间间隔</span><br><span class="line">  - 0 或省略，则表示从系统启动后到当前时间的统计信息</span><br><span class="line">  - N 表示秒数，此时每次报告只会输出 active 的进程</span><br><span class="line"></span><br><span class="line">* Count</span><br><span class="line">  - 指定输出报告的次数</span><br><span class="line"></span><br><span class="line">* -t</span><br><span class="line">  - 同时输出线程 thread 的统计信息</span><br><span class="line"></span><br><span class="line">* -d|-R|-r|-s|-u|-v|-w</span><br><span class="line">  - 指定 pidstat 报告的内容</span><br><span class="line">  -d  输出 IO 相关的统计信息</span><br><span class="line">  -R  输出优先级和调度策略相关的统计信息 realtime priority and scheduling policy</span><br><span class="line">  -r  输出与进程内存相关的统计信息 page faults and memory utilization</span><br><span class="line">  -s  输出与栈 stack 相关的统计信息</span><br><span class="line">  -u  输出与 CPU 相关的统计信息</span><br><span class="line">  -v  kernel tables</span><br><span class="line">  -w  task switching activity</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">* -e Program Args</span><br><span class="line">  - 运行指定的程序 Program，同时 pidstat 对此进程进行监控</span><br><span class="line">  - 当进程终止时，退出 pid</span><br><span class="line"></span><br><span class="line">* 限定进程选项，只输出指定的进程的信息</span><br><span class="line">  -C comm           按照 command 选择 linux task，可以使用 regex</span><br><span class="line">  -G process_name   按照 command 选择 process，可以使用 regex</span><br><span class="line">  -U [UserName]     按照 real user name 选择 linux task</span><br><span class="line">  -p &#123;Pid [,...] |SELF|ALL&#125;     只打印选定的进程的统计信息，SELF 表示监控 pidstat 自己，默认 ALL 表示监控所有进程</span><br><span class="line">  -T &#123;TASK|CHILD|ALL&#125;           连同打印进程的子进程的统计信息</span><br><span class="line"></span><br><span class="line">* 报告内容选项</span><br><span class="line">  -H            时间使用基于 epoch 的时间戳</span><br><span class="line">  -l            进程的 command 输出完整的内容，包括 args</span><br><span class="line"></span><br><span class="line">* 其他选项</span><br><span class="line">  --dec=&#123;0|1|2&#125;     指定小数的精度</span><br><span class="line">  --human           人类易读单位</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>OUTPUT</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">* 进程信息，每个报告都会有</span><br><span class="line">  UID         real user 的 uid</span><br><span class="line">  USER        real user 的 username</span><br><span class="line">  PID         进程的 pid</span><br><span class="line">  Command     进程的 command</span><br><span class="line"></span><br><span class="line">* 线程信息 -t</span><br><span class="line">  TGID    The identification number of the thread group leader.</span><br><span class="line">  TID     The identification number of the thread being monitored.</span><br><span class="line"></span><br><span class="line">* IO 报告 -d</span><br><span class="line">  kB_rd/s     进程读数据的速率</span><br><span class="line">  kB_wr/s     进程写数据的速率</span><br><span class="line">  kB_ccwr/s   进程取消写数据的速率</span><br><span class="line">  iodelay     IO 延迟的时间，This metric includes the delays spent waiting for sync block I/O completion and for swapin block I/O completion.</span><br><span class="line"></span><br><span class="line">* 调度报告 -R</span><br><span class="line">  prio        实时优先级 realtime priority</span><br><span class="line">  policy      调度策略 scheduling policy</span><br><span class="line"></span><br><span class="line">* 内存报告 -r</span><br><span class="line">  minflt/s      Total number of minor faults the task has made per second, those which have not required loading a memory page from disk.</span><br><span class="line">  majflt/s      Total number of major faults the task has made per second, those which have required loading a memory page from disk.</span><br><span class="line">  minflt-nr     Total number of minor faults made by the task and all its children, and collected during the interval of time.</span><br><span class="line">  majflt-nr     Total number of major faults made by the task and all its children, and collected during the interval of time.</span><br><span class="line">  VSZ           虚拟内存 Virtual Size      : The virtual memory usage of entire task in kilobytes.</span><br><span class="line">  RSS           物理内存 Resident Set Size : The physical memory(non-swapped) used by the task in kilobytes.</span><br><span class="line">  %MEM          内存用量百分比 The tasks&#x27;s currently used share of available physical memory.</span><br><span class="line"></span><br><span class="line">* 栈报告 -s</span><br><span class="line">  StkSize     The amount of memory in kilobytes reserved for the task as stack, but not necessarily used.</span><br><span class="line">  StkRef      The amount of memory in kilobytes used as stack, referenced by the task.</span><br><span class="line"></span><br><span class="line">* CPU 报告 -u</span><br><span class="line">  %usr      task 在用户层 user level 占用的 CPU 使用率</span><br><span class="line">  %system   task 在系统层 system level 占用的 CPU 使用率</span><br><span class="line">  %guest    Percentage of CPU spent by the task in virtual machine (running a virtual processor).</span><br><span class="line">  %wait     task 的等待执行占用的 CPU 使用率</span><br><span class="line">  %CPU      task 总的占用的 CPU 使用率</span><br><span class="line">  CPU       task 当前附着的 CPU 的编号</span><br><span class="line">  usr-ms    task 及其子进程在用户层 user level 占用的 CPU 时间，单位毫秒</span><br><span class="line">  system-ms task 及其子进程在系统层 system level 占用的 CPU 时间，单位毫秒</span><br><span class="line">  guest-ms  Total number of milliseconds spent by the task and all its children in virtual machine (running a virtual processor).</span><br><span class="line"></span><br><span class="line">* kernel table 信息 -v</span><br><span class="line">  threads   task 相关的线程号</span><br><span class="line">  fd-nr     task 相关的句柄号</span><br><span class="line"></span><br><span class="line">* task switching activity 信息 -w</span><br><span class="line">  cswch/s     Total number of voluntary context switches the task made per second.</span><br><span class="line">              A voluntary context switch occurs when a task blocks because it requires a resource that is unavailable.</span><br><span class="line">  nvcswch/s   Total number of non voluntary context switches the task made per second.</span><br><span class="line">              A involuntary context switch takes place when a task executes for the duration of its time slice and then is forced to relinquish the processor.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 相关文件</span><br><span class="line"></span><br><span class="line">* 相关环境变量</span><br><span class="line">  S_COLORS      带颜色输出，可选值包括 never、always、auto</span><br><span class="line">  S_COLORS_SGR  带颜色输出的具体颜色配置，颜色代码使用 SGR 格式</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：mpstat-指令"><a href="#知识点：mpstat-指令" class="headerlink" title="知识点：mpstat 指令"></a>知识点：mpstat 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 报告与 processer 有关的统计信息</span><br><span class="line">  - processer 从 0 开始计数</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  mpstat [OPTIONS] [Interval [Count]]</span><br><span class="line"></span><br><span class="line">* Interval</span><br><span class="line">  - 持续性输出，指定输出报告的时间间隔</span><br><span class="line">  - 0 或省略，则表示从系统启动后到当前时间的统计信息</span><br><span class="line">  - N 表示秒数，此时每次报告只会输出 active 的进程</span><br><span class="line"></span><br><span class="line">* Count</span><br><span class="line">  - 指定输出报告的次数</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">* -A</span><br><span class="line">  - 相当于 -I ALL -N ALL -P ALL -u -n</span><br><span class="line"></span><br><span class="line">* -I &#123;KeyWord [,...]|ALL&#125;</span><br><span class="line">  - 报告中断 interrupt 的统计信息</span><br><span class="line">  - Keyword 可选值包括 CPU、SCPU、SUM</span><br><span class="line">  - CPU 报告每个 processer 的每种类型的中断</span><br><span class="line">  - SCPU 包括每个 processer 的 software interrupt</span><br><span class="line">  - SUM 报告每个 processer 的所有类型中断的总和</span><br><span class="line"></span><br><span class="line">* -u</span><br><span class="line">  - 报告 CPU 使用率 utilization 的统计信息</span><br><span class="line"></span><br><span class="line">* -N &#123;NodeList|ALL&#125;</span><br><span class="line">  - 指定要报告的 NUMA node</span><br><span class="line">  - NodeList 指定 NUMA node 的编号，可以使用 &#x27;,&#x27; 来间隔，可以使用 &#x27;-&#x27; 来表示范围</span><br><span class="line"></span><br><span class="line">* -P &#123;CpuList|ALL&#125;</span><br><span class="line">  - 指定要报告的 processer</span><br><span class="line">  - CpuList 指定 processer 的编号，可以使用 &#x27;,&#x27; 来间隔，可以使用 &#x27;-&#x27; 来表示范围</span><br><span class="line"></span><br><span class="line">* -n</span><br><span class="line">  - 报告 -N Nodelist 指定的节点的汇总信息</span><br><span class="line"></span><br><span class="line">* 其他选项</span><br><span class="line">  --dec=&#123;0|1|2&#125;     指定小数的精度</span><br><span class="line">  --human           人类易读单位</span><br><span class="line">  -o JSON           使用 json 格式输出</span><br><span class="line">  - -V              打印 version 信息</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 相关文件</span><br><span class="line">  /proc/interrupts    记录 Interrupts</span><br><span class="line">  /proc/softirqs      记录 Software interrupts</span><br><span class="line"></span><br><span class="line">* 相关环境变量</span><br><span class="line">  S_COLORS      带颜色输出，可选值包括 never、always、auto</span><br><span class="line">  S_COLORS_SGR  带颜色输出的具体颜色配置，颜色代码使用 SGR 格式</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="Chapter10-文件"><a href="#Chapter10-文件" class="headerlink" title="Chapter10 文件"></a>Chapter10 文件</h1><hr>
<h2 id="10-1-文件"><a href="#10-1-文件" class="headerlink" title="10.1 文件"></a>10.1 文件</h2><hr>
<h3 id="知识点：文件"><a href="#知识点：文件" class="headerlink" title="知识点：文件"></a>知识点：文件</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Linux 中，一切皆文件</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>文件名</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* 常用副文件名</span><br><span class="line">  - *.sh</span><br><span class="line">  - *Z、*.tar、*.tar.gz、*.zip、*.tgz</span><br><span class="line">  - *.html、*.php</span><br><span class="line"></span><br><span class="line">* 文件名限制</span><br><span class="line">  - Ext2/Ext3/Ext4/xfs 文件系统中，最大文件名为 255 bytes，即 255 个 ASCII 字符或 128 个中文</span><br><span class="line">  - 不能使用的字符：*、?、&gt;、&lt;、;、&amp;、!、|、\、&#x27;、&quot;、`、()、[]、&#123;&#125;</span><br><span class="line">  - 尽量不要用在开头的字符：-、+</span><br><span class="line"></span><br><span class="line">* 文件重名</span><br><span class="line">  - 同一目录下，不管文件类型是否相同，不会出现相同的文件名</span><br><span class="line">  - 文件名不会记录文件类型，只是用作索引</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>绝对路径和相对路径</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 绝对路径 absolute path</span><br><span class="line"></span><br><span class="line">* 相对路径 relative path</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>文件的时间</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 文件创建时间 time of file birth</span><br><span class="line"></span><br><span class="line">* 文件访问时间 ATIME，time of last access</span><br><span class="line"></span><br><span class="line">* 文件内容修改时间 MTIME，time of last data modification</span><br><span class="line"></span><br><span class="line">* 文件状态修改时间 CTIME，time of last status change</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：链接"><a href="#知识点：链接" class="headerlink" title="知识点：链接"></a>知识点：链接</h3><ol>
<li><strong>硬链接</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 硬链接 Hard Link，本质上是目录文件中的一条记录</span><br><span class="line">  - 硬链接就是多个文件名指向同一个 inode</span><br><span class="line">  - ls 显示的 inode 连接数，就是指向了这个文件的 inode 的目录中的记录的数量</span><br><span class="line"></span><br><span class="line">* 硬链接的优点</span><br><span class="line">  - 删除硬链接，不会删除文件，只是删除目录文件中的记录</span><br><span class="line"></span><br><span class="line">* 硬链接的限制</span><br><span class="line">  - 不能跨 Filesystem</span><br><span class="line">  - 不能指向目录</span><br><span class="line">  - 只有超级用户才可以创建硬链接</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>软链接</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 软链接，也称为符号链接 Symbolic Link，是一个独立的文件，来指向目标文件或目录</span><br><span class="line">  - 源文件被删除之后，软链接就会失效</span><br><span class="line">  - 软链接的文件内容，就是目标文件的文件名，可以是绝对路径，也可以是相对路径，相对路径的话在使用软链接时会被自动解析</span><br><span class="line">  - 软链接的文件大小，就是记录的目标文件名的长度，一个字符一个字节</span><br><span class="line"></span><br><span class="line">* 软链接工作流程，称为 follow symbolic link</span><br><span class="line">  - 指向软链接的 inode</span><br><span class="line">  - 指向软链接的 block，获得目标文件名</span><br><span class="line">  - 指向目标文件的目录的 inode</span><br><span class="line">  - 指向目标文件的目录的 block</span><br><span class="line">  - 指向目标文件的 inode</span><br><span class="line">  - 指向目标文件的 block</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：ls-指令"><a href="#知识点：ls-指令" class="headerlink" title="知识点：ls 指令"></a>知识点：ls 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - list</span><br><span class="line">  - 列出目录下的文件</span><br><span class="line">  - 默认按照文件名进行排序</span><br><span class="line"></span><br><span class="line">* 环境变量</span><br><span class="line">  - LS_COLORS，设置 ls 命令的颜色</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>格式</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls [OPTIONS] [FILES]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">* -l</span><br><span class="line">  - 使用长格式 long listing format</span><br><span class="line"></span><br><span class="line">* -d, --directory</span><br><span class="line">  - 对于目录，打印其本身的信息，而不是打印其内容</span><br><span class="line"></span><br><span class="line">* -h, --human-readable</span><br><span class="line">  - 对于文件的大小，采用人类易读的显示方式，如 k、m、g 等</span><br><span class="line"></span><br><span class="line">* -a, --all</span><br><span class="line">  - 显示所有的文件，包括隐藏文件、&#x27;.&#x27; 和 &#x27;..&#x27; 这两个目录</span><br><span class="line"></span><br><span class="line">* -R, --recursive</span><br><span class="line">  - 递归显示子目录</span><br><span class="line"></span><br><span class="line">* -F, --classify</span><br><span class="line">  - 添加额外信息 indicator，展示文件类型</span><br><span class="line">  - *     &lt;== 代表可执行文件</span><br><span class="line">  - /     &lt;== 代表目录</span><br><span class="line">  - =     &lt;== 代表 socket 文件</span><br><span class="line">  - |     &lt;== 代表 FIFO 文件</span><br><span class="line"></span><br><span class="line">* --color=always</span><br><span class="line">  - 显示颜色</span><br><span class="line"></span><br><span class="line">* -i, --inode</span><br><span class="line">  - 列出 inode 号码</span><br><span class="line"></span><br><span class="line">* -n, --numeric-uid-gid</span><br><span class="line">  - 列出 UID 与 GID 而非用户和组名</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>时间选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* --full-time</span><br><span class="line">  - 按照 full-iso 格式显示时间</span><br><span class="line"></span><br><span class="line">* --time-style=FORMAT</span><br><span class="line">  - 按照指定的格式显示时间，采用 scrftime 时间格式</span><br><span class="line"></span><br><span class="line">* -t</span><br><span class="line">  - 时间采用 modification time</span><br><span class="line"></span><br><span class="line">* -u, --time=atime</span><br><span class="line">  - 时间采用 access time</span><br><span class="line"></span><br><span class="line">* -c,  --time=ctime</span><br><span class="line">  - 时间采用 status time</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>排序选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* -r, --reverse</span><br><span class="line">  - 反向排序</span><br><span class="line"></span><br><span class="line">* -S</span><br><span class="line">  - 按文件大小降序排列</span><br><span class="line"></span><br><span class="line">* -X</span><br><span class="line">  - 按文件的扩展名排序</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>长格式的输出信息</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* 输出信息的 field</span><br><span class="line">  - file type</span><br><span class="line">  - file mode bits</span><br><span class="line">  - number of hard links</span><br><span class="line">  - owner name</span><br><span class="line">  - group name</span><br><span class="line">  - size                    &lt;== 文件大小，对于设备文件，文件大小是主要代码和次要代码</span><br><span class="line">  - timestamp               &lt;== 文件时间，默认采用 mtime</span><br><span class="line">  - file name</span><br><span class="line">  - total                   &lt;== 某个目录下直接包含的所有文件的总大小，不包括子目录里的文件</span><br><span class="line"></span><br><span class="line">* 文件类型 file type</span><br><span class="line">  - -   普通文件 regular file</span><br><span class="line">  - d   目录 directory</span><br><span class="line">  - l   符号链接 symbolic link</span><br><span class="line">  - b   块设备 block special file</span><br><span class="line">  - c   字符设备 character special file</span><br><span class="line">  - p   管道文件 FIFO (named pipe)</span><br><span class="line">  - s   socket 文件</span><br><span class="line">  - ?   无法确定类型的文件</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：dircolors-指令"><a href="#知识点：dircolors-指令" class="headerlink" title="知识点：dircolors 指令"></a>知识点：dircolors 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - dircolors 指令，输出一个用来设置 ls 的颜色的指令</span><br><span class="line">  - 常用用法为 eval &quot;$(dircolors [OPTION]... [FILE])&quot;</span><br><span class="line">  - 颜色设置类似于 VT100-style escape sequences 颜色控制</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：file-指令"><a href="#知识点：file-指令" class="headerlink" title="知识点：file 指令"></a>知识点：file 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 查看文件的类型</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  file [OPTIONS] File</span><br><span class="line"></span><br><span class="line">* 输出信息</span><br><span class="line">  - ELF 64-bit LSB executable      &lt;== 表示文件是 binary program</span><br><span class="line">  - text executable                &lt;== 表示是可执行脚本</span><br><span class="line">  - share libs                     &lt;== 使用了动态函数库</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：stat-指令"><a href="#知识点：stat-指令" class="headerlink" title="知识点：stat 指令"></a>知识点：stat 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 查看文件的状态信息</span><br><span class="line">  - 查看文件所在的文件系统的状态信息</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  stat [OPTIONS] [-f] Files</span><br><span class="line"></span><br><span class="line">* -f, --file-system</span><br><span class="line">  - 查看文件所在的文件系统的状态信息，而不是文件本身的状态信息</span><br><span class="line"></span><br><span class="line">* FORMAT</span><br><span class="line">  - 对于部分显示数字的格式描述符，支持使用 pringf flag 进行化</span><br><span class="line">  - 如 &quot;%05a&quot;，表示对权限进行 5 位的 0 填充</span><br><span class="line">  - 如 &quot;%015.3Y&quot;，表示对时间戳进行 15 位的 0 填充，并追加 3 位小数</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* -L, --dereference</span><br><span class="line">  - 对软链接进行追踪 follow links</span><br><span class="line"></span><br><span class="line">* -c, --format=FORMAT</span><br><span class="line">  - 指定输出格式</span><br><span class="line">  - 每个 FORMAT 会自动追加换行符</span><br><span class="line"></span><br><span class="line">* --printf=FORMAT</span><br><span class="line">  - 指定输出格式</span><br><span class="line">  - 与 &quot;-c&quot; 的区别，&quot;--printf&quot; 会识别 &quot;\&quot; 方式的 escape 标记，FORMAT 不会自动追加换行符，需要手动在 FORMAT 中添加 &quot;\n&quot;</span><br><span class="line"></span><br><span class="line">* 其他选项</span><br><span class="line">  --help</span><br><span class="line">  --version</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>文件格式符 FILE FORMAT</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">* 文件基本信息</span><br><span class="line">  %n    文件名 file name</span><br><span class="line">  %F    文件类型 file type</span><br><span class="line">  %m    挂载点 mount point</span><br><span class="line"></span><br><span class="line">* 文件权限</span><br><span class="line">  %a    &quot;777&quot; 的方式显示文件的权限</span><br><span class="line">  %A    &quot;rwx&quot; 的方式显示文件的权限</span><br><span class="line">  %u    owner 的 user ID</span><br><span class="line">  %U    owner 的 user name</span><br><span class="line">  %g    owner 的 group ID</span><br><span class="line">  %G    owner 的 group name</span><br><span class="line"></span><br><span class="line">* 文件大小</span><br><span class="line">  %s    total size in bytes</span><br><span class="line">  %b    number of blocks allocated</span><br><span class="line">  %B    size of each block in bytes</span><br><span class="line"></span><br><span class="line">* 文件时间</span><br><span class="line">  %w    文件创建时间，time of file birth，格式为 human-readable，不确定则显示为 &quot;-&quot;</span><br><span class="line">  %W    文件创建时间，time of file birth，格式为 seconds since Epoch，不确定则显示为 &quot;0&quot;</span><br><span class="line">  %x    文件访问时间 ATIME，time of last access，格式为 human-readable</span><br><span class="line">  %X    文件访问时间 ATIME，time of last access，格式为 seconds since Epoch</span><br><span class="line">  %y    文件内容修改时间 MTIME，time of last data modification，格式为 human-readable</span><br><span class="line">  %Y    文件内容修改时间 MTIME，time of last data modification，格式为 seconds since Epoch</span><br><span class="line">  %z    文件状态修改时间 CTIME，time of last status change，格式为 human-readable</span><br><span class="line">  %Z    文件状态修改时间 CTIME，time of last status change，格式为 seconds since Epoch</span><br><span class="line"></span><br><span class="line">* 链接</span><br><span class="line">  %i    inode number</span><br><span class="line">  %h    number of hard links</span><br><span class="line">  %N    quoted file name with dereference if symbolic link</span><br><span class="line"></span><br><span class="line">* 文件所在设备 Device</span><br><span class="line">  %d    device number in decimal</span><br><span class="line">  %D    device number in hex</span><br><span class="line">  %t    major device type in hex, for character/block device special files</span><br><span class="line">  %T    minor device type in hex, for character/block device special files</span><br><span class="line"></span><br><span class="line">* seLinux</span><br><span class="line">  %C    文件的 seLinux security context string</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>文件系统格式符 FILESYSTEM FORMAT</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* 文件基本信息</span><br><span class="line">  %n    file name</span><br><span class="line"></span><br><span class="line">* 文件系统基本信息</span><br><span class="line">  %i    file system ID in hex</span><br><span class="line">  %t    file system type in hex</span><br><span class="line">  %T    file system type in human readable form</span><br><span class="line">  %l    maximum length of filenames</span><br><span class="line"></span><br><span class="line">* block</span><br><span class="line">  %b    total data blocks in file system</span><br><span class="line">  %f    free blocks in file system</span><br><span class="line">  %a    free blocks available to non-superuser</span><br><span class="line">  %s    block size (for faster transfers)</span><br><span class="line">  %S    fundamental block size (for block counts)</span><br><span class="line"></span><br><span class="line">* node</span><br><span class="line">  %c    total file nodes in file system</span><br><span class="line">  %d    free file nodes in file system</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* 相关环境变量</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="10-2-目录"><a href="#10-2-目录" class="headerlink" title="10.2 目录"></a>10.2 目录</h2><hr>
<h3 id="知识点：cd-指令"><a href="#知识点：cd-指令" class="headerlink" title="知识点：cd 指令"></a>知识点：cd 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - Change Current Working Directory</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  cd DIR</span><br><span class="line">  cd            &lt;== 进入 $HOME 所储存的目录</span><br><span class="line">  cd -          &lt;== 进入 $OLDPWD 所储存的目录</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：pwd-指令"><a href="#知识点：pwd-指令" class="headerlink" title="知识点：pwd 指令"></a>知识点：pwd 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - BashBuiltin</span><br><span class="line">  - Print Working Directory</span><br><span class="line">  - 打印 Current Working Directory 的绝对路径名</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  pwd [-P]</span><br><span class="line"></span><br><span class="line">* -P</span><br><span class="line">  - 对于 symbolic links，显示真实的路径而不是软链接的绝对路径</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：mkdir-指令"><a href="#知识点：mkdir-指令" class="headerlink" title="知识点：mkdir 指令"></a>知识点：mkdir 指令</h3><ol start="3">
<li><strong>mkdir</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 创建目录</span><br><span class="line"></span><br><span class="line">* 用法</span><br><span class="line">  - mkdir -m &lt;权限&gt; &lt;dir_name&gt;</span><br><span class="line">  - mkdir -p &lt;dir_name&gt;</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -m      &lt;== 创建目录时设定权限，受 umask 的影响</span><br><span class="line">  -p      &lt;== 递归创建目录</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：rmdir-指令"><a href="#知识点：rmdir-指令" class="headerlink" title="知识点：rmdir 指令"></a>知识点：rmdir 指令</h3><ol start="4">
<li><strong>rmdir</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 删除一个空目录</span><br><span class="line">  - 仅能删除空目录，比较不危险</span><br><span class="line"></span><br><span class="line">* 用法</span><br><span class="line">  - rmdir [-p] &lt;dir&gt;</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -p    &lt;== 递归删除</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：basename、dirname-指令"><a href="#知识点：basename、dirname-指令" class="headerlink" title="知识点：basename、dirname 指令"></a>知识点：basename、dirname 指令</h3><ol start="5">
<li><strong>basename 和 dirname</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - dirname 从绝对路径中取出目录名</span><br><span class="line">  - basename 从绝对路径中取出文件名</span><br><span class="line"></span><br><span class="line">* 范例</span><br><span class="line">  dirname  /etc/sysconfig/network-scripts/ifcfg-eth0      返回 /etc/sysconfig/network-scripts</span><br><span class="line">  basename /etc/sysconfig/network-scripts/ifcfg-eth0      返回 ifcfg-eth0</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="10-3-文件操作"><a href="#10-3-文件操作" class="headerlink" title="10.3 文件操作"></a>10.3 文件操作</h2><hr>
<h3 id="知识点：备份选项"><a href="#知识点：备份选项" class="headerlink" title="知识点：备份选项"></a>知识点：备份选项</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 部分 gnu 程序支持的备份选项，如 cp、mv、ln</span><br><span class="line">  - info &#x27;(coreutils) Backup options&#x27; 访问帮助页面</span><br><span class="line"></span><br><span class="line">* 后缀</span><br><span class="line">  - gnu 默认采用 &quot;~&quot; 作为备份文件的后缀</span><br><span class="line">  - gnu 系列的命令，如 ls，也自动识别以 &quot;~&quot; 作为结尾的文件为备份文件</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* -b</span><br><span class="line">  - 建立备份</span><br><span class="line">  - 如果后缀名相同，则只保留一个备份</span><br><span class="line">  - 相当于 --backup=existing</span><br><span class="line"></span><br><span class="line">* --backup[=METHOD]</span><br><span class="line">  - 使用指定的方式来创建备份</span><br><span class="line"></span><br><span class="line">* -S SUFFIX</span><br><span class="line">* -suffix=SUFFIX</span><br><span class="line">  - 指定备份文件的文件名的后缀名</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>METHOD</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 指定创建备份文件的方式</span><br><span class="line"></span><br><span class="line">* off, none</span><br><span class="line">  - 不创建备份</span><br><span class="line"></span><br><span class="line">* existing, nil</span><br><span class="line">  - 如果不存在同名的备份文件，则创建</span><br><span class="line">  - 如果已经存在同名的备份文件，则不创建</span><br><span class="line">  * 支持 &quot;-S&quot; 选项</span><br><span class="line"></span><br><span class="line">* numbered, t</span><br><span class="line">  - 创建多个编号的备份文件</span><br><span class="line">  - 不支持 &quot;-S&quot; 选项，只使用默认的后缀 &quot;~&quot;</span><br><span class="line"></span><br><span class="line">* simple, never</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -b -S &quot;.`date +%Y-%m-%d`&quot; SOURCE DEST</span><br><span class="line"># 创建名称类似 filename.2002-01-02 的备份文件</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：cp-指令"><a href="#知识点：cp-指令" class="headerlink" title="知识点：cp 指令"></a>知识点：cp 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 复制文件、创建链接</span><br><span class="line">  - 复制时，默认会改变文件的权限/属性/时间等 metadata，可以使用 &quot;-a&quot; 选项来保存文件的元信息</span><br><span class="line">  - 复制时，如果 SOURCE 是一个软链接，默认是复制软链接指向的实际文件，如果是多级链接则会一直追踪到最后的最终文件上，可以使用 &quot;-d&quot; 选项来表示只对软链接文件进行复制</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>常用</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cp -b -S &quot;.`date +%Y-%m-%d`&quot; /etc/passwd p01</span><br><span class="line"># 复制文件，保留原始属性，并创建备份</span><br><span class="line"></span><br><span class="line">cp -l /etc/passwd p01</span><br><span class="line"># 创建软链接</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>格式</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp [OPTIONS] SOURCE DEST</span><br><span class="line">cp [OPTIONS] SOURCE [...] DIR</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">* -a, --archive</span><br><span class="line">  - 对文件创建归档，会保留</span><br><span class="line">  - 相当于 -d -R --preserve=all</span><br><span class="line"></span><br><span class="line">* -f, --force</span><br><span class="line">  - 强制</span><br><span class="line"></span><br><span class="line">* -i, --interactive</span><br><span class="line">  - 询问模式</span><br><span class="line">  - 覆盖前先询问，默认</span><br><span class="line"></span><br><span class="line">* -n, --no-clobber</span><br><span class="line">  - 非覆盖模式</span><br><span class="line">  - 对于已存在的文件不进行操作</span><br><span class="line"></span><br><span class="line">* -r, -R, --recursive</span><br><span class="line">  - 复制目录，并递归复制所有的子目录和子文件</span><br><span class="line"></span><br><span class="line">* -l, --link</span><br><span class="line">  - 创建硬链接</span><br><span class="line"></span><br><span class="line">* -s, --symbolic-link</span><br><span class="line">  - 创建软链接</span><br><span class="line">  - SOURCE 必须要写绝对路径</span><br><span class="line"></span><br><span class="line">* -d</span><br><span class="line">  - 如果 SOURCE 是一个软链接，仅复制软链接，而不是复制实际文件</span><br><span class="line"></span><br><span class="line">* -u, --update</span><br><span class="line">  - 更新</span><br><span class="line">  - DEST 比 SOURCE 旧，或 DEST 不存在，才进行操作</span><br><span class="line"></span><br><span class="line">* -p</span><br><span class="line">  - 仅保留文件的 权限、用户、时间 三个属性</span><br><span class="line"></span><br><span class="line">* --preserve=all</span><br><span class="line">  - 保留文件的全部属性</span><br><span class="line">  - 包括，权限、用户、时间、SELinux 属性、links、xattr 等</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：ln-指令"><a href="#知识点：ln-指令" class="headerlink" title="知识点：ln 指令"></a>知识点：ln 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 创建链接</span><br><span class="line">  - 默认创建硬链接，如果想要创建软链接，则需要加 &quot;-s&quot; 选项</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>格式</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ln [OPTIONS] Target Link</span><br><span class="line"><span class="meta">#</span><span class="bash"> 对指定的目标，创建链接</span></span><br><span class="line"></span><br><span class="line">ln [OPTIONS] Target [Targets] Directory</span><br><span class="line"><span class="meta">#</span><span class="bash"> 对多个目标，在 Directory 中创建链接</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* -f, --force</span><br><span class="line">  - 强制执行</span><br><span class="line"></span><br><span class="line">* -s, --symbolic</span><br><span class="line">  - 创建软链接</span><br><span class="line"></span><br><span class="line">* -v, --verbose</span><br><span class="line">  - 详细信息，会显示每个链接及其对应的目标</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /etc/passwd link01</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建一个软链接</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：mv-指令"><a href="#知识点：mv-指令" class="headerlink" title="知识点：mv 指令"></a>知识点：mv 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 移动文件，或文件进行改名</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  mv [OPTIONS] SOURCE DEST</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - &quot;-f&quot;、&quot;-i&quot;、&quot;-n&quot; 三个选项只有放在最后的才会生效</span><br><span class="line"></span><br><span class="line">* -f, --force</span><br><span class="line"></span><br><span class="line">* -i, --interactive</span><br><span class="line">  - 询问模式</span><br><span class="line">  - 覆盖前先询问，默认</span><br><span class="line"></span><br><span class="line">* -n, --no-clobber</span><br><span class="line">  - 非覆盖模式</span><br><span class="line">  - 对于已存在的文件不进行操作</span><br><span class="line"></span><br><span class="line">* -u, --update</span><br><span class="line">  - 更新</span><br><span class="line">  - DEST 比 SOURCE 旧，或 DEST 不存在，才进行操作</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：rm-指令"><a href="#知识点：rm-指令" class="headerlink" title="知识点：rm 指令"></a>知识点：rm 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 删除文件、目录</span><br><span class="line">  - 对于硬链接，则是取消对文件的连接</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>格式</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm [OPTIONS] DEST [...]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* -f, --force</span><br><span class="line"></span><br><span class="line">* -r, -R, --recursive</span><br><span class="line">  - 删除目录，并递归删除其下的所有子目录和子文件</span><br><span class="line"></span><br><span class="line">* -i</span><br><span class="line">  - 询问模式</span><br><span class="line">  - 对删除的每一个文件，包括目录下的所有子目录以及所有子文件，必须都确认后才能删除</span><br><span class="line">  - 必须对所有的文件都确认后，才会执行删除动作</span><br><span class="line">  - 在最终开始进行实际的删除之前，可以按下 ctrl+c 取消 rm 操作</span><br><span class="line">  - root 用户默认开启 -i 选项</span><br><span class="line">  - -f 选项会覆盖 -i 选项</span><br><span class="line"></span><br><span class="line">* -v, --verbose</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="10-4-查找文件"><a href="#10-4-查找文件" class="headerlink" title="10.4 查找文件"></a>10.4 查找文件</h2><hr>
<h3 id="知识点：locate-指令"><a href="#知识点：locate-指令" class="headerlink" title="知识点：locate 指令"></a>知识点：locate 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 通过数据库的形式，搜索文件</span><br><span class="line">  - 默认不支持 re，但可以使用 wildcard，如果启用了 re 则不可以使用 wildcard</span><br><span class="line">  - 如果指定了多个 PATTERN，则多个 PATTERN 之间为 or 的关系</span><br><span class="line"></span><br><span class="line">* 组件</span><br><span class="line">  - 安装，yum install mlocate</span><br><span class="line">  - /var/lib/mlocate/mlocate.db   locate 数据库，</span><br><span class="line">  - /etc/updatedb.conf            locate 数据库配置文件</span><br><span class="line">  - /usr/bin/updatedb             更新 locate 数据库</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  locate [OPTIONS] PATTERN</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* -r PATTERN, --regexp PATTERN</span><br><span class="line">  - 对指定的 PATTERN 使用正则</span><br><span class="line"></span><br><span class="line">* --regex</span><br><span class="line">  - 对所有 PATTERN 使用正则</span><br><span class="line"></span><br><span class="line">* -i, --ignore-case</span><br><span class="line">  - 忽略大小写</span><br><span class="line"></span><br><span class="line">* -b, --basename</span><br><span class="line">  - 只搜索文件的 basename</span><br><span class="line"></span><br><span class="line">* -w, --wholename</span><br><span class="line">  - 搜索文件的绝对路径，默认方式</span><br><span class="line"></span><br><span class="line">* -c, --count</span><br><span class="line">  - 仅输出找到的结果数量</span><br><span class="line"></span><br><span class="line">* -l, --limit, -n LIMIT</span><br><span class="line">  - 只输出前 n 行</span><br><span class="line"></span><br><span class="line">* -S, --statistics</span><br><span class="line">  - 输出 locate 数据库的统计信息</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">locate PATTERN | xargs ls -ld</span><br><span class="line">ls -ld $(locate PATTERN)</span><br><span class="line"># 对 locate 搜索的结果，查看其详细信息</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：find-指令"><a href="#知识点：find-指令" class="headerlink" title="知识点：find 指令"></a>知识点：find 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 从目录树中搜索文件，并执行动作</span><br><span class="line">  - 功能最强大的文件搜索工具，直接艹硬盘进行搜索</span><br><span class="line">  - 默认对搜索到的文件执行的动作为 &quot;print&quot;</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  find [-L] [-P] [Starting-Point ...] [Expression]</span><br><span class="line"></span><br><span class="line">* Starting-Point</span><br><span class="line">  - 指定 find 进行搜索的目录树的根，目录层级对应 0</span><br><span class="line">  - 可以指定多个</span><br><span class="line">  - 省略则为 &quot;.&quot;</span><br><span class="line"></span><br><span class="line">* -P  Never follow symbolic links.  This is the default behaviour.</span><br><span class="line">* -L  Follow symbolic links.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">find /tmp -type f -name &quot;*.bak&quot; -exec rm -f &quot;&#123;&#125;&quot; \;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查找 <span class="string">&quot;tmp&quot;</span> 下名字以 <span class="string">&quot;.bak&quot;</span> 结尾的文件，并对其执行 <span class="string">&quot;rm -f&quot;</span> 命令</span></span><br><span class="line"></span><br><span class="line">find /tmp -perm &quot;u=r,g=rx,o=r&quot;</span><br><span class="line">find /tmp -perm &quot;u+r,g=rx,o=r&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 按照权限查找文件</span></span><br><span class="line"></span><br><span class="line">find /usr/bin -type f -executable \! -readable</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查找 <span class="string">&quot;/usr/bin&quot;</span> 下有 <span class="string">&quot;x&quot;</span> 并且没有 <span class="string">&quot;r&quot;</span> 的文件</span></span><br><span class="line"></span><br><span class="line">find /tmp -mtime 0</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查找 <span class="string">&quot;/tmp&quot;</span> 下 mtime 小于 24 小时的文件</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：find-指令-Expression"><a href="#知识点：find-指令-Expression" class="headerlink" title="知识点：find 指令 Expression"></a>知识点：find 指令 Expression</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 一个 find 专用的表达式格式，在其中指定对文件的检查标准、对文件执行的动作等</span><br><span class="line"></span><br><span class="line">* Expression 的组成</span><br><span class="line">  - 主要部分：Test、Action</span><br><span class="line">  - 次要部分：Global_Option、Positional_Option、Operator</span><br><span class="line">    - 都是用来辅佐 Test 和 Action 的，本身并不指定检查条件或动作</span><br><span class="line"></span><br><span class="line">* 格式：[Global_Option] Test [Action] [Operator Test [Action] ...]</span><br><span class="line">  - 注意</span><br><span class="line">    - 此格式并非 find 本身的规定，而是对 find 的简化，但最好遵从此顺序 Test</span><br><span class="line">    - find 本身的功能非常强大，但也过于复杂</span><br><span class="line">    - 本质上，find 是对一个文件，按照从左向右的顺序，计算 Expression 中每一个组成的逻辑值，只要返回 Fasle，就停止并开始计算下一个文件</span><br><span class="line">    - Expression 的每一个组成部分都会返回一个逻辑值，包括 Actions</span><br><span class="line">    - Expression 的每一个组成部分本质上也是可以放在任何位置，如 Action 放在 Test 之前</span><br><span class="line">    - 但这样太复杂了，并且人类易读性差，并且可能会打印告警</span><br><span class="line">    - 因此使用此简化方式最好</span><br><span class="line"></span><br><span class="line">* 注意</span><br><span class="line">  - 由于 Positional_Option 基本没什么用，故此不整理，用到的时候再查</span><br><span class="line">  - Positional_Option 中唯一稍微有点用的是可以指定使用的正则格式，如 egrep 等，但默认设置已经可以满足几乎全部情况了</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>Global_Option</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Global_Option，全局选项</span><br><span class="line">  - 全局选项本身不参与 Expression 的计算，永远只会返回 True</span><br><span class="line">  - 全局选项的功能会作用于 Expression 中所有的 Test 和 Action，无论是在其之前或之后</span><br><span class="line">  - 最好将 Global_Option 放在 Expression 最前，若 Global_Option 位于某个 Test 或 Action 之后，则 find 会打印 warning 信息，但不影响 find 的功能</span><br><span class="line">  - 如果指定了功能相冲突的全局选项，可能会导致 Expression 无意义，如 -maxdepth 5 -mindepth 6</span><br><span class="line"></span><br><span class="line">* -help, --help</span><br><span class="line">* -version, --version</span><br><span class="line"></span><br><span class="line">* -maxdepth Level</span><br><span class="line">* -mindepth Level</span><br><span class="line">  - 指定查找的最大/最小目录层级</span><br><span class="line">  - Starting-Point 本身对应的目录层级为 0</span><br><span class="line">  - Starting-Point 的一级子目录本身对应的目录层级为 1</span><br><span class="line"></span><br><span class="line">* -mount, -xdev</span><br><span class="line">  - 只搜索 Starting-Point 本身的文件系统，不要下沉到属于其他文件系统的子目录</span><br><span class="line">  - 例如：mount /dev/sdb1 /data/db/db1 ; find /data/db -mount ; 则 find 就不会去搜索 /dev/sdb1</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>Operator</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Operator，逻辑操作符</span><br><span class="line">  - 用于将多个 Expression 一起使用</span><br><span class="line"></span><br><span class="line">* ( expr )</span><br><span class="line">  - 指定 Expression 的优先级</span><br><span class="line">  - 由于 &quot;( )&quot; 通常会被 shell 所解析，所以一般需要使用 &quot;\&quot; 或 &quot; &quot; 或 &#x27; &#x27; 来对 &quot;(&quot; 和 &quot;)&quot; 进行转义</span><br><span class="line"></span><br><span class="line">* ! expr</span><br><span class="line">  - 对 Epression 的逻辑值取反</span><br><span class="line">  - 由于 &quot;!&quot; 通常会被 shell 所解析，所以一般需要使用 &quot;\&quot; 或 &quot; &quot; 或 &#x27; &#x27; 来对 &quot;!&quot; 进行转义</span><br><span class="line"></span><br><span class="line">* expr1 expr2</span><br><span class="line">* expr1 -a expr2</span><br><span class="line">  - AND</span><br><span class="line"></span><br><span class="line">* expr1 -o expr2</span><br><span class="line">  - OR</span><br><span class="line"></span><br><span class="line">* expr1 -and expr2</span><br><span class="line">* expr1 -or expr2</span><br><span class="line">* -not expr</span><br><span class="line">  - not POSIX compliant 的格式</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：find-指令-Expression-之-Test"><a href="#知识点：find-指令-Expression-之-Test" class="headerlink" title="知识点：find 指令 Expression 之 Test"></a>知识点：find 指令 Expression 之 Test</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Test，用于在 Expression 指定对文件的匹配机制，通常是基于文件的某项属性</span><br><span class="line">  - find 会对目录树下的每一个文件进行检查，True 则对文件执行相应的动作</span><br><span class="line"></span><br><span class="line">* Number 参数</span><br><span class="line">  - +Number   大于 Number</span><br><span class="line">  - -Number   小于 Number</span><br><span class="line">  - Number    等于 Number</span><br><span class="line">  - 所有用到 Number 的参数，均支持此种计算方法，包括 uid、gid 等</span><br><span class="line"></span><br><span class="line">* Reference 参数</span><br><span class="line">  - 指定另一个文件，将目标文件的属性与此文件的属性进行对比</span><br><span class="line"></span><br><span class="line">* time 型参数</span><br><span class="line">  - 对于 time 型的参数，其 Number 表示 24*N 个小时</span><br><span class="line">  - find 在计算时天数时，会对小数部分进行截断，因此：</span><br><span class="line">    -0  实际表示小于  0 小时，不会搜索到任何结果</span><br><span class="line">    0   实际表示大于  0 小时，小于 24 小时</span><br><span class="line">    +0  实际表示大于 24 小时</span><br><span class="line">    -1  实际表示小于 24 小时</span><br><span class="line">    1   实际表示大于 24 小时，小于 48 小时</span><br><span class="line">    +1  实际表示大于 48 小时</span><br><span class="line">    以此类推</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>文件名</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* -name Pattern</span><br><span class="line">* -iname Pattern</span><br><span class="line">  - 检查文件的 basename，使用 shell pattern</span><br><span class="line">  - 不允许加 &quot;/&quot;</span><br><span class="line">  - 元字符 &quot;*&quot;、&quot;?&quot;、&quot;[ ]&quot; 会匹配隐藏文件开头的 &quot;.&quot;</span><br><span class="line"></span><br><span class="line">* -path Pattern</span><br><span class="line">* -ipath Pattern</span><br><span class="line">* -wholename Pattern</span><br><span class="line">* -iwholename Pattern</span><br><span class="line">  - 检查文件的 full filename，使用 shell pattern</span><br><span class="line">  - 可以加 &quot;/&quot;</span><br><span class="line">  - 关于什么是 full filename 见 &quot;-print&quot;</span><br><span class="line"></span><br><span class="line">* -regex Pattern</span><br><span class="line">* -iregex Pattern</span><br><span class="line">  - 检查文件的 full filename，使用正则</span><br><span class="line">  - Pattern 必须与文件的 full filename 完全匹配</span><br><span class="line">  - 关于什么是 full filename 见 &quot;-print&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>文件类型和大小</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* -type Char[,Char]...</span><br><span class="line">* -xtype Char[,Char]...</span><br><span class="line">  - 检查文件的类型</span><br><span class="line">  - 对于软连接，&quot;-type&quot; 检查软连接文件本身，&quot;-xtype&quot; 检查软连接的目标</span><br><span class="line">  - Char 的可选值：</span><br><span class="line">      f     regular file</span><br><span class="line">      d     directory</span><br><span class="line">      l     symbolic link</span><br><span class="line">      b     block (buffered) special</span><br><span class="line">      c     character (unbuffered) special</span><br><span class="line">      p     named pipe (FIFO)</span><br><span class="line">      s     socket</span><br><span class="line">      D     door (Solaris)</span><br><span class="line"></span><br><span class="line">* -empty</span><br><span class="line">  - 检查文件是否为空文件、目录是否为空目录</span><br><span class="line"></span><br><span class="line">* -size Number[cwbkMG]</span><br><span class="line">  - 检查文件的大小</span><br><span class="line">  - &quot;c&quot;   表示 byte</span><br><span class="line">  - &quot;b&quot;   表示 512B-block</span><br><span class="line">  - &quot;w&quot;   表示 two-byte words</span><br><span class="line">  - &quot;k&quot;   表示 KiB，1024 B</span><br><span class="line">  - &quot;M&quot;   表示 MiB，1024*1024 B</span><br><span class="line">  - &quot;G&quot;   表示 GiB，1024*1024*1024 B</span><br><span class="line">  - 计算文件大小时，会向上取整 rounding up，因此如果指定 &quot;-size 1G&quot;，即使一个文件只有 1kb 大小，也会被视为匹配</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>文件时间</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">* -min Number</span><br><span class="line">* -time Number</span><br><span class="line">* -newer Reference</span><br><span class="line">  - 检查文件的 mtime</span><br><span class="line"></span><br><span class="line">* -anewer Reference</span><br><span class="line">* -amin Number</span><br><span class="line">* -atime Number</span><br><span class="line">  - 检查文件的 atime</span><br><span class="line"></span><br><span class="line">* -cnewer Reference</span><br><span class="line">* -cmin Number</span><br><span class="line">* -ctime Number</span><br><span class="line">  - 检查文件的 ctime</span><br><span class="line"></span><br><span class="line">* -newerXY Reference</span><br><span class="line">  - 比较目标文件某个时间与引用文件的某个时间</span><br><span class="line">  - X 对应目标文件</span><br><span class="line">  - Y 对应引用文件</span><br><span class="line">  - X、Y 的可选值：</span><br><span class="line">    - a   atime</span><br><span class="line">    - c   ctime</span><br><span class="line">    - m   mtime</span><br><span class="line">    - B   birth time(不是所有的系统都支持，Linux 就不支持)</span><br><span class="line">    - t   Reference 直接是一个代表时间的字符串(只能用于 Y)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>文件用户、组、权限</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">* -uid Number</span><br><span class="line">* -user UserName</span><br><span class="line"></span><br><span class="line">* -gid Number</span><br><span class="line">* -group UserName</span><br><span class="line"></span><br><span class="line">* -nogroup</span><br><span class="line">* -nouser</span><br><span class="line">  - 检查文件的 uid/gid 是否不属于任何有效的用户/组</span><br><span class="line">  - 通常发生在文件的用户/组被删除之后</span><br><span class="line"></span><br><span class="line">* -perm -Mode</span><br><span class="line">  - 检查文件的权限</span><br><span class="line">  - 要求目标文件至少拥有 Mode 规定的所有权限</span><br><span class="line">  - Mode 可以是八进制数，也可以是文字表示形式</span><br><span class="line">    - 文字形式为 &quot;u=rwx&quot;、&quot;u+rwx&quot;</span><br><span class="line">    - 文字形式中 &quot;u&quot;、&quot;g&quot;、&quot;o&quot; 之间使用 &quot;,&quot; 间隔，不能有空格</span><br><span class="line"></span><br><span class="line">* -perm Mode</span><br><span class="line">  - 检查文件的权限</span><br><span class="line">  - 要求文件的权限必须完全与 Mode 相等</span><br><span class="line"></span><br><span class="line">* -perm /Mode</span><br><span class="line">  - 检查文件的权限</span><br><span class="line">  - 要求文件的权限只要拥有 Mode 中任意一个权限即可</span><br><span class="line"></span><br><span class="line">* -readable</span><br><span class="line">* -writeable</span><br><span class="line">* -executable</span><br><span class="line">  - 检查 current user 是否对文件具有 &quot;rwx&quot; 权限</span><br><span class="line">  - 相比于 &quot;perm&quot; 形式，此些参数会额外考虑如 ACL 等的其他权限控制相关，而 &quot;perm&quot; 只考虑文件本身的权限设定</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* -fstype Type</span><br><span class="line">  - 文件位于一个类型为 Type 的文件系统之上</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：find-指令-Expression-之-Action"><a href="#知识点：find-指令-Expression-之-Action" class="headerlink" title="知识点：find 指令 Expression 之 Action"></a>知识点：find 指令 Expression 之 Action</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Action，用于在 Expression 中指定对匹配的文件执行的动作</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>打印文件名</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - full filename</span><br><span class="line">    - 文件的从 Starting-Point 开始的文件名</span><br><span class="line">    - 如果 Starting-Point 从 &quot;/&quot; 开始，则 full filename 就是 absolute path</span><br><span class="line">    - 如果 Starting-Point 从 &quot;.&quot; 开始，则 full filename 以 &quot;./&quot; 开头</span><br><span class="line"></span><br><span class="line">* -print</span><br><span class="line">  - 将文件的 full filename 打印到 stdout 上，每个文件名以 newline 结尾</span><br><span class="line">  - find 指令的默认行为</span><br><span class="line"></span><br><span class="line">* -print0</span><br><span class="line">  - 将文件的 full filename 打印到 stdout 上，每个文件名以 null 结尾</span><br><span class="line">  - 可以与 &quot;xargs&quot; 的 &quot;-0&quot; 选项相配合</span><br><span class="line"></span><br><span class="line">* -printf Format</span><br><span class="line">  - 以类似 &quot;printf&quot; 的用法，将文件的文件名打印到 stdout 上</span><br><span class="line">  - 关于 &quot;Format&quot; 的格式，见 &quot;man find&quot; 中 &quot;-printf format&quot; 部分，东西太多了，懒得整理</span><br><span class="line"></span><br><span class="line">* -ls</span><br><span class="line">  - 相当于 &quot;-exec ls -dils &#x27;&#123;&#125;&#x27; \;&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>执行命令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - &quot;&#123;&#125;&quot;</span><br><span class="line">    - 在对搜索到的文件执行 Command 时，&quot;&#123;&#125;&quot; 代表搜索到的文件</span><br><span class="line">    - 为了防止被 shell 解析，需要其进行跳脱，习惯是使用单引号 &#x27;&#123;&#125;&#x27;，也可以使用反斜线 &#x27;\&#x27;，但不能使用双引号 &quot; &quot;</span><br><span class="line"></span><br><span class="line">* -exec Command \;</span><br><span class="line">  - 针对搜索到的文件，执行 &quot;Command&quot; 命令</span><br><span class="line">  - 每搜索到一个文件，便针对此文件执行一次 &quot;Command&quot; 命令</span><br><span class="line">  - &quot;\;&quot; 是为了防止 &quot;;&quot; 被 shell 所解析，而添加的跳脱</span><br><span class="line">  - Command 的执行的 working directory 为执行 find 时的 pwd</span><br><span class="line"></span><br><span class="line">* -exec Command &#x27;&#123;&#125;&#x27; +</span><br><span class="line">  - 将每一个搜索到的文件，依次将文件名添加到 &quot;&#123;&#125;&quot; 的末尾，组建一个 &quot;Command&quot; 的长命令，在 find 搜索结束后，一次性执行此长命令命令</span><br><span class="line">  - &quot;&#123;&#125;&quot; 必须有且只有一个，并且必须放在末尾</span><br><span class="line">  - Command 的执行的 working directory 为执行 find 时的 pwd</span><br><span class="line"></span><br><span class="line">* -execdir Command \;</span><br><span class="line">* -execdir Command &#x27;&#123;&#125;&#x27; +</span><br><span class="line">  - 与 &quot;-exec&quot; 基本相同，除了 &quot;Command&quot; 的执行 working directory 为查找的文件所在的目录</span><br><span class="line">  - 对于 &quot;+&quot; 的执行方式，&quot;-execdir&quot; 是针对每一个 subdirectory 组建一个命令并进行执行，而不是整个 &quot;find&quot; 只执行一次命令</span><br><span class="line"></span><br><span class="line">* -ok Command \;</span><br><span class="line">* -okdir \;</span><br><span class="line">  - 与 &quot;-exec&quot; 基本相同，除了 &quot;Command&quot; 在执行前需要用户进行确认</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>其他动作</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* -delete</span><br><span class="line">  - 删除文件</span><br><span class="line">  - &quot;-delete&quot; 虽然会隐含 &quot;-depth&quot;，但 find 仍会对 directory 进行处理，故可能存在因为删除目录而导致文件被连带删除的情况</span><br><span class="line">  - 过于危险，不要用，如果一定要用，最好加上 &quot;-tpye f&quot;</span><br><span class="line"></span><br><span class="line">* -prune</span><br><span class="line">  - 如果文件是个目录，则不要深入到其中</span><br><span class="line"></span><br><span class="line">* -quit</span><br><span class="line">  - 退出 find 的执行</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：xargs-指令"><a href="#知识点：xargs-指令" class="headerlink" title="知识点：xargs 指令"></a>知识点：xargs 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 从 stdin 中读取输入 input，将其发送给 Command 作为其参数并执行 Command</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  xargs [Options] [Command [Command-Initial-Arguments]]</span><br><span class="line"></span><br><span class="line">* Command</span><br><span class="line">  - 指定具体执行的命令</span><br><span class="line"></span><br><span class="line">* Command-Initial-Arguments</span><br><span class="line">  - Command 的初始化参数</span><br><span class="line">  - input item 会追加在其之后</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>xargs 对 Command 的组装</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - xargs 会从 input 中解析出 item，将其追加到 Command-Initial-Arguments 的末尾，以构建一个很长的 Command，然后执行此 Command</span><br><span class="line">  - 在解析 input 时，默认将 newline 识别为 item 的分隔符</span><br><span class="line">  - 每个 Command 之后追加多少个 input item，由选项 &quot;-L&quot; 或 &quot;-n&quot; 决定，默认为全部追加</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 范例</span></span><br><span class="line"></span><br><span class="line">echo &#123;1..9&#125; | xargs ./test.sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> xargs 实际执行的是 ./test.sh 1 2 3 4 5 6 7 8 9</span></span><br><span class="line"></span><br><span class="line">echo &#123;1..9&#125; | xargs -L 3 ./test.sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> xargs 实际执行的是三次，分别为</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   ./test.sh 1 2 3</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   ./test.sh 4 5 6</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   ./test.sh 7 8 9</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">* -L max-lines</span><br><span class="line">  - 构建 Command 时，指定每条 Command 末尾追加的 input item 的最大数量</span><br><span class="line"></span><br><span class="line">* -P max-procs, --max-procs=max-procs</span><br><span class="line">  - 指定 Command 的最大并发数，只在配合 &quot;-L&quot; 或 &quot;-n&quot; 一起使用时才有意义</span><br><span class="line">  - 0 表示无限制最大并发</span><br><span class="line">  - 如果省略，则默认为 1</span><br><span class="line"></span><br><span class="line">* -I replace-str</span><br><span class="line">  - 指定使用的替换字符串 replace-str，在执行时 replace-str 会被替换为 input item</span><br><span class="line">  - 通过使用 replace-str，可以将 input item 插入到 Command-Initial-Arguments 之中而不再是追加到末尾</span><br><span class="line">  - 默认为 &#x27;&#123;&#125;&#x27;，注意要使用单引号</span><br><span class="line">  - 注意</span><br><span class="line">    - replace-str 的使用隐含了 &quot;-L 1&quot;，即一次构建 Command 只会使用一个 input item</span><br><span class="line">    - 因此，replace-str 和 &quot;-L&quot; 选项不兼容，不论是否使用 &quot;-I&quot; 选项</span><br><span class="line"></span><br><span class="line">* -p, --interactive</span><br><span class="line">  - 每次执行 Command 前，都询问用户</span><br><span class="line"></span><br><span class="line">* -a File, --arg-file=File</span><br><span class="line">  - 从文件中读取输入而不是 stdin</span><br><span class="line"></span><br><span class="line">* -E eof-str, -e[eof-str], --eof[=eof-str]</span><br><span class="line">  - 将指定的字符串识别为 EOF</span><br><span class="line">  - 当 xargs 读取到 EOF 时，会停止对 input 的处理</span><br><span class="line">  - 推荐使用 &quot;-E&quot;</span><br><span class="line"></span><br><span class="line">* -n max-args, --max-args=max-args</span><br><span class="line">  - （测试 man 文档说的不对，需要再确认一下）</span><br><span class="line">  - （man 文档说，是在构建 Command 时，指定每条 Command 所具有的 Args 的最大数量，Args = init-Args + input-item）</span><br><span class="line">  - （实际测试时，与 &quot;-L&quot; 相同）</span><br><span class="line"></span><br><span class="line">* 其他选项</span><br><span class="line">  --help</span><br><span class="line">  --version</span><br><span class="line">  -t, --verbose</span><br><span class="line">  --show-limits       打印 xargs 的限制，如一个 Command 最多可以拥有多少个字符等</span><br><span class="line">  -0, --null          解析 input 时，将 null string 识别为 item 的分隔符，input 中的 newline、wightsapce、backslashe 等特殊字符会被还原为普通字符</span><br><span class="line">  -d Delim</span><br><span class="line">  --delimiter=Delim   解析 input 时，将指定的字符 Delim 识别为 item 的分隔符，只支持单字节字符</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">find /usr/sbin -perm /7000 | xargs ls -ld</span><br><span class="line"></span><br><span class="line">cut -d &#x27;:&#x27; -f 1 /etc/passwd | xargs -L 1 id</span><br><span class="line"># 指定 &quot;-L&quot;</span><br><span class="line"># id 指令只能处理一个参数，因此需要加 &quot;-L&quot;</span><br><span class="line"></span><br><span class="line">cut -d &#x27;:&#x27; -f 1 /etc/passwd | xargs -E &#x27;sync&#x27; -n 1 id</span><br><span class="line"># 指定 EOF</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="10-5-权限和属性"><a href="#10-5-权限和属性" class="headerlink" title="10.5 权限和属性"></a>10.5 权限和属性</h2><hr>
<h3 id="知识点：文件的权限"><a href="#知识点：文件的权限" class="headerlink" title="知识点：文件的权限"></a>知识点：文件的权限</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - r   read</span><br><span class="line">  - w   write</span><br><span class="line">  - x   excute</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>目录权限的意义</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* r</span><br><span class="line">  - 读取目录的内容</span><br><span class="line">  - 表现为获得目录下文件的清单</span><br><span class="line">  - tab 键补全文件名与此有关</span><br><span class="line"></span><br><span class="line">* w</span><br><span class="line">  - 修改目录的内容</span><br><span class="line">  - 表现为对目录下的文件进行新建、删除、改名、移动</span><br><span class="line"></span><br><span class="line">* x</span><br><span class="line">  - 可以切换 cwd 到目录</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：文件的时间"><a href="#知识点：文件的时间" class="headerlink" title="知识点：文件的时间"></a>知识点：文件的时间</h3><ol>
<li><strong>mtime</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - modification time</span><br><span class="line">  - 文件的修改时间</span><br><span class="line">  - 当该文件的内容发生变更时，就会更新 mtime</span><br><span class="line">  - 不涉及属性或权限变更</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>atime</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - access time</span><br><span class="line">  - 文件的访问时间</span><br><span class="line">  - 当文件的被访问时，就会更新 atime，例如被 cat 查看</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>ctime</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - status time</span><br><span class="line">  - 文件的状态改变时间</span><br><span class="line">  - 当文件的权限与属性发生变更，就会更新 ctime</span><br><span class="line">  - 由于 Linux 并不支持 btime(birth time)，因此在生成中当需要使用 btime 时，通常用 ctime 来替代</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：touch-指令"><a href="#知识点：touch-指令" class="headerlink" title="知识点：touch 指令"></a>知识点：touch 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 创建新文件</span><br><span class="line">  - 修改文件时间，默认修改文件的 atime 和 mtime</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  touch [OPTIONS] FILE</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* -a</span><br><span class="line">  - 仅修改 atime</span><br><span class="line"></span><br><span class="line">* -m</span><br><span class="line">  - 仅修改 mtime</span><br><span class="line"></span><br><span class="line">* -c, --no-create</span><br><span class="line">  - 仅修改 ctime</span><br><span class="line"></span><br><span class="line">* -d, --date=STRING</span><br><span class="line">  - 使用字符串指定时间</span><br><span class="line"></span><br><span class="line">* -t STAMP</span><br><span class="line">  - 使用 STAMP 指定时间，格式为 [[CC]YY]MMDDhhmm[.ss]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 新建文件</span><br><span class="line">touch FILE</span><br><span class="line"></span><br><span class="line"># 修改文件时间</span><br><span class="line">touch -d &quot;2 days ago&quot; bashrc</span><br><span class="line">touch -t 201406150202 bashrc</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：umask-指令-1"><a href="#知识点：umask-指令-1" class="headerlink" title="知识点：umask 指令"></a>知识点：umask 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - bash builtin</span><br><span class="line">  - 查看或设定自己的 umask</span><br><span class="line">  - umask 是用户在创建文件时的默认权限掩码</span><br><span class="line">    - 用户新建的文件的权限为初始值减去 umask</span><br><span class="line">    - 文件的初始值为 666，目录初始值为 777</span><br><span class="line">    - root 默认 umask 是 022，普通用户默认 umask 是 002</span><br><span class="line">    - 实际的 umask 为 4 位，第一位与文件的特殊权限有关</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  umask [-S] UMASK</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -S    以 rwx 的方式给出权限</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 设定自己的 umask 为 0022</span><br><span class="line">umask 0022</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：chmod-指令"><a href="#知识点：chmod-指令" class="headerlink" title="知识点：chmod 指令"></a>知识点：chmod 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 修改文件的权限</span><br><span class="line">  - 可以修改 SUID，SGID，SBIT</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  chmod [OPTIONS] MODE FILE</span><br><span class="line">  chmod [-R] xyz &lt;file&gt;</span><br><span class="line">  chmod [augo] [+-=] [rwx] &lt;file&gt;</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -R      进行递归修改</span><br><span class="line"></span><br><span class="line">* MODE</span><br><span class="line">  777           以数字的形式指定权限</span><br><span class="line">  a[+|-|=]rwx   设置所有用户的权限</span><br><span class="line">  u[+|-|=]rwx   设置文件拥有者的权限</span><br><span class="line">  g[+|-|=]rwx   设置组用户的权限</span><br><span class="line">  o[+|-|=]rwx   设置其他用户的权限</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">chmod u=rwx go=rx FILE</span><br><span class="line"></span><br><span class="line">chmod a+w FILE</span><br><span class="line"></span><br><span class="line">chmod 744 FILE</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：chown-指令"><a href="#知识点：chown-指令" class="headerlink" title="知识点：chown 指令"></a>知识点：chown 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 改变文件拥有者和组</span><br><span class="line">  - chgrp 指令可以只改变文件的组</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  chown [OPTIONS] [OWNER][:[GROUP]] FILE</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -R      递归修改</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 仅修改 OWNER</span><br><span class="line">chown OWNER FILE</span><br><span class="line"></span><br><span class="line"># 仅修改 GROUP</span><br><span class="line">chown :GRUOP FILE</span><br><span class="line"></span><br><span class="line"># 同时修改 OWNER 和 GROUP</span><br><span class="line">chown OWNER:GROUP FILE</span><br><span class="line"></span><br><span class="line"># chgrp 指令</span><br><span class="line">chgrp GROUP FILE</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="10-6-特殊权限和隐藏属性"><a href="#10-6-特殊权限和隐藏属性" class="headerlink" title="10.6 特殊权限和隐藏属性"></a>10.6 特殊权限和隐藏属性</h2><hr>
<h3 id="知识点：文件的特殊权限"><a href="#知识点：文件的特殊权限" class="headerlink" title="知识点：文件的特殊权限"></a>知识点：文件的特殊权限</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 特殊权限有三个，SUID，SGID，SBIT</span><br><span class="line">  - 文件的特殊权限设定后，若正常可使用，应该是小写字母</span><br><span class="line">  - 如果出现大写字母，则代表权限条件不足</span><br><span class="line">    - 例如设置了 SUID，但执行者没有对程序的 x 权限，此时 SUID 就会是大写的 S</span><br><span class="line">    - 这种情况下，虽然设置了特殊权限，但特殊权限其实不起作用</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>SUID</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Set UID</span><br><span class="line">  - 仅对二进制程序文件有效，对 shell script 没用</span><br><span class="line">  - 在二进制程序文件的 owner 选项的 x 位置出现 s 标志，称为 Set UID</span><br><span class="line"></span><br><span class="line">* 作用</span><br><span class="line">  - 非程序的拥有者执行该程序时，能获得该程序拥有者的权限</span><br><span class="line">  - 程序的运行时间结束后，执行者的权限又恢复为原来的状态</span><br><span class="line">  - 执行者要拥有程序的 x 权限</span><br><span class="line"></span><br><span class="line">* 范例</span><br><span class="line">  - 普通用户利用 passwd 来修改自己的密码</span><br><span class="line">    - 正常情况下，普通用户无权修改 /etc/passwd、/etc/shadow 这几个文件</span><br><span class="line">    - 但 passwd 设置了 SUID，那么普通用户使用 passwd 指令时，就可以修改这几个文件了</span><br><span class="line">    - 当 passwd 指令执行结束，普通用户的权限又恢复到原来的状态了</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>SGID</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Set GID</span><br><span class="line">  - 可以针对文件或目录来设定</span><br><span class="line">  - 文件的 group 选项的 x 位置如果出现 s 标志，称为 Set GID</span><br><span class="line"></span><br><span class="line">* 程序文件 set UID 作用</span><br><span class="line">  - 执行者在执行的过程中将会获得该程序组群的支持</span><br><span class="line">  - 执行者要拥有该程序的 x 权限</span><br><span class="line"></span><br><span class="line">* 目录 set UID 作用</span><br><span class="line">  - 当用户进入此目录后，其在此目录下的有效组 effective group 将会变成该目录的组</span><br><span class="line">  - 当用户离开此目录时，其有效组又恢复正常</span><br><span class="line">  - 需要用户对于此目录具有 r 与 x 的权限时，则用户能够进入此目录</span><br><span class="line"></span><br><span class="line">* 用途</span><br><span class="line">  - 主要用在软件开发过程中，让开发人员不用反复切换自己的主要组</span><br><span class="line">  - 如果没有 SGID</span><br><span class="line">    - 用户在目录中建立的文件，文件的组为用户当前的有效组</span><br><span class="line">    - 其他人员因为组不同，因此无法查看和修改</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>SBIT</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Sticky Bit</span><br><span class="line">  - 目录的 other 权限的 x 位置上出现 t，则称为 Sticky Bit</span><br><span class="line">  - 只针对目录有效，对于文件已经没有效果了</span><br><span class="line"></span><br><span class="line">* 作用</span><br><span class="line">  - 用户在该目录下建立文件或目录时，仅有自己与 root 才有权力删除该文件</span><br><span class="line">  - 用户必须对于此目录具有 w，x 权限，才能具有新建文件或修改文件的能力</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>设置 SUID&#x2F;SGID&#x2F;SBIT</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 数字选项方式</span><br><span class="line">  - SUID/SGID/SBIT 对应 4 位数的权限的第一位</span><br><span class="line">  - 4 为 SUID</span><br><span class="line">  - 2 为 SGID</span><br><span class="line">  - 1 为 SBIT</span><br><span class="line">  - 例如 chmod 4755 FILE</span><br><span class="line"></span><br><span class="line">* 字符方式</span><br><span class="line">  - chmod g+s FILE</span><br><span class="line">  - chmod o+t FILE</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：文件的隐藏属性"><a href="#知识点：文件的隐藏属性" class="headerlink" title="知识点：文件的隐藏属性"></a>知识点：文件的隐藏属性</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 仅在 Ext2/Ext3/Ext4 的文件系统上面才完全生效</span><br><span class="line">  - 其他的文件系统可能支持的不那么全</span><br><span class="line">  - xfs 文件系统仅支持 AadiS</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：lsattr-指令"><a href="#知识点：lsattr-指令" class="headerlink" title="知识点：lsattr 指令"></a>知识点：lsattr 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 显示文件的隐藏属性</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  lsattr [OPTIONS] [FILES]</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -a      同时显示隐藏文件</span><br><span class="line">  -d      对于目录，不进行递归显示</span><br><span class="line">  -R      对于目录，递归显示</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：chattr-指令"><a href="#知识点：chattr-指令" class="headerlink" title="知识点：chattr 指令"></a>知识点：chattr 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 设定文件或目录的隐藏属性</span><br><span class="line">  - 具体是否可行还需要参考文件系统</span><br><span class="line">  - 很多设定值只有 root 才能设定</span><br><span class="line">  - 比较常用的是 a 与 i 两个属性</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  chattr [OPTIONS] [MODE] FILE</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -R    递归设置</span><br><span class="line">  -V    verbose</span><br><span class="line"></span><br><span class="line">* MODE</span><br><span class="line">  - 格式 [+|-|=]ATTRS</span><br><span class="line">  - +   &lt;== 增加属性，其他原本存在的属性不动</span><br><span class="line">  - -   &lt;== 移除属性，其他原本存在的属性不动</span><br><span class="line">  - =   &lt;== 完全等于</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>ATTRS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">* A</span><br><span class="line">  - 不得修改 atime</span><br><span class="line">  - 可避免 I/O 较慢的机器过度的存取硬盘</span><br><span class="line">  - 目前建议使用文件系统挂载参数处理这个项目</span><br><span class="line"></span><br><span class="line">* S</span><br><span class="line">  - 强制对文件的任何修改都要同步写入要硬盘中</span><br><span class="line">  - 相当于每一步修改后立刻 syns</span><br><span class="line"></span><br><span class="line">* a</span><br><span class="line">  - 文件的内容只能增加，不能删除也不能修改内容</span><br><span class="line">  - 只有root 才能设定这属性</span><br><span class="line"></span><br><span class="line">* c</span><br><span class="line">  - 文件在储存时，将会先进行压缩后再储存</span><br><span class="line">  - 文件在被读取时，也会先解压缩再读取</span><br><span class="line">  - 对于大文件比较有利</span><br><span class="line"></span><br><span class="line">* d</span><br><span class="line">  - 当 dump 程序被执行的时候，设定 d 属性将可使该文件（或目录）不会被 dump 备份</span><br><span class="line"></span><br><span class="line">* i</span><br><span class="line">  - 让一个文件不能被删除、改名、设定连结，也无法写入或新增内容</span><br><span class="line">  - 在安全性上比较重要的一个属性</span><br><span class="line">  - 只有 root 能设定此属性</span><br><span class="line"></span><br><span class="line">* s</span><br><span class="line">  - 设定如果这个文件被删除，他将会被完全的移除出这个硬盘空间</span><br><span class="line">  - 所以如果误删了，就完全无法救回来了</span><br><span class="line"></span><br><span class="line">* u</span><br><span class="line">  - 设定如果该文件被删除了，则文件内容其实还存在硬盘中</span><br><span class="line">  - 与 s 相反的功能</span><br><span class="line">  - 可以使用来救援该文件</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 给文件加上 i 属性</span><br><span class="line">chattr +i FILE</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="10-7-压缩"><a href="#10-7-压缩" class="headerlink" title="10.7 压缩"></a>10.7 压缩</h2><hr>
<h3 id="知识点：tar-指令"><a href="#知识点：tar-指令" class="headerlink" title="知识点：tar 指令"></a>知识点：tar 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - tar，用来将多个文件打包成为一个归档 archive，支持压缩</span><br><span class="line">  - 归档可以是一个普通文件，也可以是一个设备，例如磁带机</span><br><span class="line"></span><br><span class="line">* 选项格式</span><br><span class="line">  - tar 支持三种选项格式，Traditional usage、UNIX-style usage、GNU-style usage</span><br><span class="line">  - tar 支持三种选项格式混用</span><br><span class="line">  - Traditional usage，tar xzvf 格式</span><br><span class="line">  - UNIX-style usage，tar -xzvf 格式</span><br><span class="line">  - GNU-style usage，tar --extract --gzip --verbose --file 格式</span><br><span class="line"></span><br><span class="line">* 指令格式</span><br><span class="line">  tar MODE -f ArchiveFile [OPTIONs] [FILEs]</span><br><span class="line"></span><br><span class="line">* 常用</span><br><span class="line">  tar xzv -f jdk-8u371-linux-x64.tar.gz -C /usr/local</span><br><span class="line">  tar czv -f etc.tar.gz /etc</span><br></pre></td></tr></table></figure></li>
<li><strong>操作模式 MODE</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 操作模式，用来指定 tar 指令执行哪种动作</span><br><span class="line">  - 操作模式有且只能有一个</span><br><span class="line"></span><br><span class="line">* -c, --create</span><br><span class="line">  - create，打包，创建一个 archive</span><br><span class="line"></span><br><span class="line">* -x, --extract, --get</span><br><span class="line">  - extract，解包</span><br><span class="line"></span><br><span class="line">* -t, --list</span><br><span class="line">  - list，查看 archive 的内容</span><br><span class="line"></span><br><span class="line">* -d, --diff, --compare</span><br><span class="line">  - 将 archive 的内容和文件系统的内容进行比较</span><br><span class="line">  - 如不指定 FILEs，则表示与 current working directory 进行比较</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>压缩选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* -z, --gzip, --gunzip, --ungzip</span><br><span class="line"></span><br><span class="line">* -j, --bzip2</span><br><span class="line"></span><br><span class="line">* -J, --xz</span><br><span class="line"></span><br><span class="line">* -a, --auto-compress</span><br><span class="line">  - 根据 archive 的后缀名，自动判断使用的压缩软件</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>通用选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">* -f, --file=ARCHIVE</span><br><span class="line">  - 指定 archive 文件</span><br><span class="line"></span><br><span class="line">* -C, --directory=DIR</span><br><span class="line">  - 指定 tar 的工作目录</span><br><span class="line"></span><br><span class="line">* --exclude=PATTERN</span><br><span class="line">  - 排除某些文件</span><br><span class="line"></span><br><span class="line">* -h, --dereference</span><br><span class="line">  - 对软链接进行追踪</span><br><span class="line"></span><br><span class="line">* -v, --verbose</span><br><span class="line"></span><br><span class="line">* -?, --help</span><br><span class="line">* --usage</span><br><span class="line">  - 查看帮助</span><br><span class="line"></span><br><span class="line">* --version</span><br><span class="line">  - 查看 tar 的版本</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：unzip-指令"><a href="#知识点：unzip-指令" class="headerlink" title="知识点：unzip 指令"></a>知识点：unzip 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 对 zip 压缩文件进行操作，包括查看、解压</span><br><span class="line">  - 如果目标文件已存在，则 unzip 会在 prompt 上要求用户进行确认，对于部分选项如 &quot;-B&quot;、&quot;-n&quot;、&quot;-o&quot;，则不会提示 prompt 而直接进行操作</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  unzip [OPTIONs] ZipFiles [-x exfiles] [-d dir]</span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* -d dir</span><br><span class="line">  - 指定解压的目标路径</span><br><span class="line">  - 默认为 current directory</span><br><span class="line"></span><br><span class="line">* -x exfiles</span><br><span class="line">  - 在解压时，排除某些文件</span><br><span class="line">  - 支持 wildcard</span><br><span class="line"></span><br><span class="line">* -l</span><br><span class="line">* -v</span><br><span class="line">  - 不解压，仅查看 zip 文件的内容</span><br><span class="line">  - &quot;-v&quot; 会打印更多信息</span><br><span class="line"></span><br><span class="line">* -t</span><br><span class="line">  - 不解压，仅对 zip 文件的完整性进行检查</span><br><span class="line"></span><br><span class="line">* -B</span><br><span class="line">  - 对于覆盖的文件创建备份</span><br><span class="line">  - 备份以 &quot;~&quot; 结尾，多个备份则再额外追加 &quot;N&quot;</span><br><span class="line">  - man unzip 中说，此选项并不是可以对所有的情况都能保证已存在文件的安全</span><br><span class="line"></span><br><span class="line">* -p PassWord</span><br><span class="line">  - 指定 zip 文件的密码</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="Chapter11-文件系统"><a href="#Chapter11-文件系统" class="headerlink" title="Chapter11 文件系统"></a>Chapter11 文件系统</h1><hr>
<h2 id="11-1-文件系统"><a href="#11-1-文件系统" class="headerlink" title="11.1 文件系统"></a>11.1 文件系统</h2><hr>
<h3 id="知识点：df-指令"><a href="#知识点：df-指令" class="headerlink" title="知识点：df 指令"></a>知识点：df 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 查看文件系统的磁盘空间大小</span><br><span class="line">  - 只能查看已挂载的文件系统</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  df [OPTIONS] [Files]</span><br><span class="line"></span><br><span class="line">* Files</span><br><span class="line">  - 只查看 Files 所在的文件系统</span><br><span class="line">  - 省略则查看所有已挂载的文件系统</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">* -T, --print-type</span><br><span class="line">  - 同时打印文件系统的类型</span><br><span class="line">  - 可能的值</span><br><span class="line">    - nfs</span><br><span class="line">    - ext2, ext3, ext4, xfs, btrfs, ...</span><br><span class="line">    - iso9660, cdfs，光盘</span><br><span class="line">    - ntfs,fat，Windows 文件系统</span><br><span class="line"></span><br><span class="line">* -l, --local</span><br><span class="line">  - 仅打印 local 本地的文件系统</span><br><span class="line">  - 默认同时也会打印 remote 远程的文件系统</span><br><span class="line"></span><br><span class="line">* -t, --type=TYPE</span><br><span class="line">  - 仅打印某一类型的文件系统</span><br><span class="line"></span><br><span class="line">* -x, --exclude-type=TYPE</span><br><span class="line">  - 不打印某一类型的文件系统</span><br><span class="line"></span><br><span class="line">* --total</span><br><span class="line">  - 当查看多个文件系统时，统计所有文件系统的总磁盘空间</span><br><span class="line"></span><br><span class="line">* -k, -m</span><br><span class="line">* -H, --si</span><br><span class="line">* -h, --human-readable</span><br><span class="line">* -B, --block-size=SIZE</span><br><span class="line">  - 指定显示的单位</span><br><span class="line"></span><br><span class="line">* -i, --inodes</span><br><span class="line">  - 显示 inode 的数量而不是磁盘空间大小</span><br><span class="line"></span><br><span class="line">* -a, --all</span><br><span class="line">  - 同时打印其他如 dummy、duplicate、inaccessible 的文件系统，如 /proc</span><br><span class="line">  - 默认情况情况下此些内容会被隐去</span><br><span class="line"></span><br><span class="line">* 其他选项</span><br><span class="line">  --help</span><br><span class="line">  --version</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>输出字段</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">* --output[=FIELD_LIST]</span><br><span class="line">  - 指定输出中包含的字段</span><br><span class="line">  - FIELD_LIST 使用 comma 进行间隔，不能有 space</span><br><span class="line"></span><br><span class="line">* 基础字段</span><br><span class="line">  - source    The source of the mount point, usually a device.</span><br><span class="line">  - fstype    File system type.</span><br><span class="line">  - file      The file name if specified on the command line.</span><br><span class="line">  - target    The mount point.</span><br><span class="line"></span><br><span class="line">* block 相关字段</span><br><span class="line">  - size      Total number of blocks.</span><br><span class="line">  - used      Number of used blocks.</span><br><span class="line">  - avail     Number of available blocks.</span><br><span class="line">  - pcent     Percentage of USED divided by SIZE.</span><br><span class="line"></span><br><span class="line">* inode 相关字段</span><br><span class="line">  - itotal    Total number of inodes.</span><br><span class="line">  - iused     Number of used inodes.</span><br><span class="line">  - iavail    Number of available inodes.</span><br><span class="line">  - ipcent    Percentage of IUSED divided by ITOTAL.</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 范例</span></span><br><span class="line">df -h --output=source,size,target</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：du-指令"><a href="#知识点：du-指令" class="headerlink" title="知识点：du 指令"></a>知识点：du 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 统计目录的总磁盘空间占用</span><br><span class="line">  - 会直接操硬盘来进行计算</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  du [OPTIONS] [Files]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">* 无选项</span><br><span class="line">  - 打印目录的总磁盘空间占用，和所有子目录的总磁盘空间占用</span><br><span class="line"></span><br><span class="line">* -s, --summarize</span><br><span class="line">  - 只打印目录的总磁盘占用量，不打印子目录</span><br><span class="line"></span><br><span class="line">* -d N, --max-depth=N</span><br><span class="line">  - 指定子目录的级别</span><br><span class="line">  - &quot;-s&quot; 相当于 &quot;--max-depth=0&quot;</span><br><span class="line"></span><br><span class="line">* -c, --total</span><br><span class="line">  - 当指定了多个 Files 时，打印所有的 Files 的总磁盘空间占用之和</span><br><span class="line"></span><br><span class="line">* -a, --all</span><br><span class="line">  - 同时打印每一个子文件的磁盘空间占用</span><br><span class="line"></span><br><span class="line">* -S, --separate-dirs</span><br><span class="line">  - 只统计目录本身占用的磁盘空间，子目录的占用量不算在内</span><br><span class="line"></span><br><span class="line">* -b, -k, -m</span><br><span class="line">* -B SIZE, --block-size=SIZE</span><br><span class="line">  - 指定对磁盘空间的显示单位</span><br><span class="line"></span><br><span class="line">* --si</span><br><span class="line">* -h, --human-readable</span><br><span class="line">  - 以人类易读的方式显示单位</span><br><span class="line">  - &quot;--si&quot; 表示使用 1000 进位制而不是 1024 进位制</span><br><span class="line"></span><br><span class="line">* -t, --threshold=SIZE</span><br><span class="line">  - 打印时，按照大小去除某些 entry</span><br><span class="line">  - SIZE 为正，则只打印磁盘空间大于 SIZE 的 entry</span><br><span class="line">  - SIZE 为负，则只打印磁盘空间小于 SIZE 的 entry</span><br><span class="line"></span><br><span class="line">* --exclude=PATTERN</span><br><span class="line">  - 打印时，按照 PATTERN 去除某些 entry</span><br><span class="line">  - PATTERN 采用部分匹配</span><br><span class="line">  - PATTERN 采用 shell pattern 而非 regular expression</span><br><span class="line"></span><br><span class="line">* -x, --one-file-system</span><br><span class="line">  - 去除不在同一个文件系统上的文件</span><br><span class="line"></span><br><span class="line">* --time</span><br><span class="line">* --time=WORD</span><br><span class="line">* --time-style=STYLE</span><br><span class="line">  - 同时打印文件/目录相关的时间</span><br><span class="line"></span><br><span class="line">* -P, --no-dereference</span><br><span class="line">  - 对于 symlink 不进行追踪</span><br><span class="line">  - 默认开启</span><br><span class="line"></span><br><span class="line">* 其他选项</span><br><span class="line">  --help</span><br><span class="line">  --version</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：lsblk-指令"><a href="#知识点：lsblk-指令" class="headerlink" title="知识点：lsblk 指令"></a>知识点：lsblk 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 查看块设备的信息</span><br><span class="line">  - 包括硬盘、文件系统，包括没有挂载的文件系统</span><br><span class="line">  - 默认以树型格式 tree-like 进行输出</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  lsblk [OPTIONS] [Devices]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">* -p, --paths</span><br><span class="line">  - 打印设备的完整文件名 full device paths</span><br><span class="line"></span><br><span class="line">* -b, --bytes</span><br><span class="line">  - 指定空间大小的单位</span><br><span class="line"></span><br><span class="line">* -d, --nodeps</span><br><span class="line">  - 仅查看硬盘本身，不查看硬盘上的分区</span><br><span class="line"></span><br><span class="line">* -f, --fs</span><br><span class="line">  - 打印与文件系统相关的信息</span><br><span class="line">  - 相当于 -o NAME,FSTYPE,LABEL,UUID,MOUNTPOINT.</span><br><span class="line"></span><br><span class="line">* -l, --list</span><br><span class="line">  - 以二维表的方式打印，会去除 tree-like 有关的信息</span><br><span class="line"></span><br><span class="line">* -J, --json</span><br><span class="line">  - 以 json 格式打印</span><br><span class="line"></span><br><span class="line">* -P, --pairs</span><br><span class="line">  - 以 key=value 的格式打印</span><br><span class="line"></span><br><span class="line">* -x, --sort Column</span><br><span class="line">  - 指定排序字段</span><br><span class="line">  - 默认会开启 &quot;--list&quot; 的输出格式</span><br><span class="line"></span><br><span class="line">* 其他选项</span><br><span class="line">  -V, --version</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>输出字段</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"> * -o, --output LIST</span><br><span class="line">   - 指定打印的字段</span><br><span class="line">   - LIST 使用 comma separated</span><br><span class="line">   - 支持使用 +Field 的方式，表示在已有的字段列表中新增打印的字段，如 lsblk -f -o +SIZE</span><br><span class="line"></span><br><span class="line"> * -h, --help</span><br><span class="line">   - 查看帮助信息</span><br><span class="line">   - 查看所有的 Filed 的标签名和含义</span><br><span class="line"></span><br><span class="line"> * 默认字段</span><br><span class="line">       NAME  device name</span><br><span class="line">    MAJ:MIN  major:minor device number</span><br><span class="line">         RM  removable device</span><br><span class="line">         RO  read-only device</span><br><span class="line">       SIZE  size of the device</span><br><span class="line">       TYPE  device type</span><br><span class="line"> MOUNTPOINT  where the device is mounted</span><br><span class="line"></span><br><span class="line"> * 文件系统相关</span><br><span class="line">    FSAVAIL  filesystem size available</span><br><span class="line">     FSSIZE  filesystem size</span><br><span class="line">     FSTYPE  filesystem type</span><br><span class="line">     FSUSED  filesystem size used</span><br><span class="line">     FSUSE%  filesystem use percentage</span><br><span class="line">      LABEL  filesystem LABEL</span><br><span class="line">       UUID  filesystem UUID</span><br><span class="line"></span><br><span class="line"> * 分区相关</span><br><span class="line">     PTUUID  partition table identifier (usually UUID)</span><br><span class="line">     PTTYPE  partition table type</span><br><span class="line">   PARTTYPE  partition type UUID</span><br><span class="line">  PARTLABEL  partition LABEL</span><br><span class="line">   PARTUUID  partition UUID</span><br><span class="line">  PARTFLAGS  partition flags</span><br><span class="line"></span><br><span class="line">* 其他字段</span><br><span class="line">      KNAME  internal kernel device name</span><br><span class="line">       PATH  path to the device node</span><br><span class="line">         RA  read-ahead of the device</span><br><span class="line">    HOTPLUG  removable or hotplug device (usb, pcmcia, ...)</span><br><span class="line">      MODEL  device identifier</span><br><span class="line">     SERIAL  disk serial number</span><br><span class="line">      STATE  state of the device</span><br><span class="line">      OWNER  user name</span><br><span class="line">      GROUP  group name</span><br><span class="line">       MODE  device node permissions</span><br><span class="line">  ALIGNMENT  alignment offset</span><br><span class="line">     MIN-IO  minimum I/O size</span><br><span class="line">     OPT-IO  optimal I/O size</span><br><span class="line">    PHY-SEC  physical sector size</span><br><span class="line">    LOG-SEC  logical sector size</span><br><span class="line">       ROTA  rotational device</span><br><span class="line">      SCHED  I/O scheduler name</span><br><span class="line">    RQ-SIZE  request queue size</span><br><span class="line">   DISC-ALN  discard alignment offset</span><br><span class="line">  DISC-GRAN  discard granularity</span><br><span class="line">   DISC-MAX  discard max bytes</span><br><span class="line">  DISC-ZERO  discard zeroes data</span><br><span class="line">      WSAME  write same max bytes</span><br><span class="line">        WWN  unique storage identifier</span><br><span class="line">       RAND  adds randomness</span><br><span class="line">     PKNAME  internal parent kernel device name</span><br><span class="line">       HCTL  Host:Channel:Target:Lun for SCSI</span><br><span class="line">       TRAN  device transport type</span><br><span class="line"> SUBSYSTEMS  de-duplicated chain of subsystems</span><br><span class="line">        REV  device revision</span><br><span class="line">     VENDOR  device vendor</span><br><span class="line">      ZONED  zone model</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：blkid-指令"><a href="#知识点：blkid-指令" class="headerlink" title="知识点：blkid 指令"></a>知识点：blkid 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 打印块设备、分区的信息</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  blkid [OPTIONS] [Devices]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项 OPTIONS</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">* -k</span><br><span class="line">  - 打印 blkid 能识别的文件系统类型和 raid 类型，而不是打印当前的块设备、分区的信息</span><br><span class="line">  - 如 ext4、lsi_mega_raid_member 等</span><br><span class="line"></span><br><span class="line">* -t, --match-token NAME=value</span><br><span class="line">  - 仅查看符合条件的块设备</span><br><span class="line">  - NAME 的可选值包括 TYPE、LABEL、UUID，必须大写</span><br><span class="line"></span><br><span class="line">* --label Label</span><br><span class="line">* --uuid UUID</span><br><span class="line">  - 查看 Label 或 UUID 所对应的设备名</span><br><span class="line"></span><br><span class="line">* -o, --output Format</span><br><span class="line">  - 指定打印格式</span><br><span class="line">  - Format 可选值</span><br><span class="line">    - full      以 K-V 方式打印，并且输出所有的标签</span><br><span class="line">    - list      以二维表的方式打印</span><br><span class="line">    - device    仅打印 device name</span><br><span class="line"></span><br><span class="line">* -p, --probe</span><br><span class="line">  - 底层探针模式 low-level superblock probing mode</span><br><span class="line">  - 不要研究</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="11-2-挂载"><a href="#11-2-挂载" class="headerlink" title="11.2 挂载"></a>11.2 挂载</h2><hr>
<h2 id="11-3-EXT4-文件系统"><a href="#11-3-EXT4-文件系统" class="headerlink" title="11.3 EXT4 文件系统"></a>11.3 EXT4 文件系统</h2><hr>
<h3 id="知识点：索引式文件系统"><a href="#知识点：索引式文件系统" class="headerlink" title="知识点：索引式文件系统"></a>知识点：索引式文件系统</h3><ol>
<li><strong>索引式介绍</strong></li>
<li><strong>superblock</strong></li>
<li><strong>block</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 每个 block 都有编号，大小为 4B</span><br><span class="line"></span><br><span class="line">* 大小有 1K、2K、4K 等，通常使用 4K</span><br><span class="line"></span><br><span class="line">* 原则上，block 的大小与数量在格式化后便无法改变</span><br><span class="line"></span><br><span class="line">* 一个 block 只能放一个文件的内容</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>inode</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">* 一个文件与一个 inode 一一对应</span><br><span class="line"></span><br><span class="line">* 系统读取文件时，先找到 inode，根据 inode 分析权限，符合权限才进一步读取 block 的内容</span><br><span class="line"></span><br><span class="line">* inode 里并不记录文件名，文件名被保存在目录的 block 中</span><br><span class="line"></span><br><span class="line">* inode 记录的内容</span><br><span class="line">  - 权限 rwx</span><br><span class="line">  - 拥有者与拥有者组</span><br><span class="line">  - 大小</span><br><span class="line">  - mtime、atime、ctime</span><br><span class="line">  - SUID、SGID、SBIT</span><br><span class="line">  - block id</span><br><span class="line"></span><br><span class="line">* inode 记录 block 号码的方式</span><br><span class="line">  - inode 记录一个 block 号码要花掉 4B，故 ext2 最多支持 2^32 = 4G 个 block</span><br><span class="line">  - inode 记录 block 号码的区域定义为 12 个直接，1 个间接，1 个双间接，1 个三间接</span><br><span class="line">  - 12 个直接指向 12 个存放文件数据的 block</span><br><span class="line">  - 1 个间接指向 1 个 block，最后指向存放文件数据的 block</span><br><span class="line">  - 1 个双间接指向 1 个双间接 block，再指向 block，最后指向存放文件数据的 block</span><br><span class="line">  - 1 个三间接指向 1 个三间接 block，再指向 block，再指向 block 号码，最后指向存放文件数据的 block</span><br><span class="line">  - 例如，block 为 1KB，则一个文件最大为 (12 + (1024/4) + (1024/4)^2 + (1024/4)^3)*1KB = 16GB</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>目录的 inode 和 block</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* inode 记录目录的权限、属性、block id</span><br><span class="line"></span><br><span class="line">* block 记录所有文件的文件名和 inode 列表</span><br><span class="line"></span><br><span class="line">* 一个目录下的所有文件均不能重名</span><br><span class="line"></span><br><span class="line">* 读取文件的流程</span><br><span class="line">  - 目录的 inode</span><br><span class="line">  - 目录的 block</span><br><span class="line">  - 文件的 inode</span><br><span class="line">  - 文件的 block</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：日志式文件系统"><a href="#知识点：日志式文件系统" class="headerlink" title="知识点：日志式文件系统"></a>知识点：日志式文件系统</h3><hr>
<h3 id="知识点：ext4-文件系统"><a href="#知识点：ext4-文件系统" class="headerlink" title="知识点：ext4 文件系统"></a>知识点：ext4 文件系统</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 特点</span><br><span class="line">  - 在格式化时就规划好全部的 inode 与 block</span><br><span class="line">  - 重新格式化、resize 文件系统会改变 inode 和 block 分布</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>结构</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 开头一个 boot sector</span><br><span class="line"></span><br><span class="line">* 后面多个 block group</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>boot sector</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* boot sector 里可以安装 boot loader</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>block group</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 每个 block group 都有独立的 inode/block/superblock 系统</span><br><span class="line"></span><br><span class="line">* block group 从前往后，分为六部分</span><br><span class="line">  - superblock</span><br><span class="line">    - 大小通常为 1024 byte</span><br><span class="line">    - Block Group 0 存放主 superblock</span><br><span class="line">    - Block Group N 不一定有 superblock，如果有的话则是作为主 superblock 的备份</span><br><span class="line">  - filesystem description</span><br><span class="line">    - 叫 Block Group Description 更合适</span><br><span class="line">    - 记录本 block group 的开始与结束的 block 号码</span><br><span class="line">    - 记录本 block group 的每个区段 superblock、bitmap、inodemap、data block 的开始和结束 block 号码</span><br><span class="line">  - block bitmap</span><br><span class="line">  - inode bitmap</span><br><span class="line">  - inode table</span><br><span class="line">  - data blocks</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：dumpe2fs-指令"><a href="#知识点：dumpe2fs-指令" class="headerlink" title="知识点：dumpe2fs 指令"></a>知识点：dumpe2fs 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 查看 Ext4 文件系统的信息</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  dumpe2fs [-bh] &lt;partition&gt;</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -b      仅列出保留为坏轨的部分</span><br><span class="line">  -h      仅查看 superblock 的信息</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="11-4-XFS-文件系统"><a href="#11-4-XFS-文件系统" class="headerlink" title="11.4 XFS 文件系统"></a>11.4 XFS 文件系统</h2><hr>
<h3 id="知识点：xfs-文件系统"><a href="#知识点：xfs-文件系统" class="headerlink" title="知识点：xfs 文件系统"></a>知识点：xfs 文件系统</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* xfs 文件系统的一个大坑，只能扩大，不能缩小</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：mkfs-xfs-指令"><a href="#知识点：mkfs-xfs-指令" class="headerlink" title="知识点：mkfs.xfs 指令"></a>知识点：mkfs.xfs 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 用来创建 xfs 文件系统</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  mkfs.xfs [-b &lt;block_size&gt;] [-d parms] [-i &lt;parms&gt;] [-l parms] [-L label] [-f] [-r parms] PARTITION</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">* -b</span><br><span class="line">  - 指定 block 的大小，范围为 512B 到 64k</span><br><span class="line">  - linux 的限制为 4k</span><br><span class="line"></span><br><span class="line">* -d</span><br><span class="line">  - 后面接的是重要的 data section 的相关参数值</span><br><span class="line">  - 主要的值有</span><br><span class="line">    - agcount=数值    设定需要几个储存组群的意思（AG），通常与 CPU 有关，建议 CPU 有几个 core，就设几个 AG</span><br><span class="line">    - agsize=数值     每个 AG 设定为多少容量的意思，通常 agcount/agsize 只选一个设定即可</span><br><span class="line">    - file            指的是格式化的设备是个文件而不是个设备的意思，例如用文件虚拟硬盘，或 loop 设备</span><br><span class="line">    - size=数值       设定整个 data section 的容量，亦即你可以不将全部的设备容量用完的意思</span><br><span class="line">    - su=数值         当有 RAID 时，那个 stripe 数值的意思，与底下的 sw 搭配使用</span><br><span class="line">    - sw=数值         当有 RAID 时，用于储存资料的硬盘数量，须扣除备份碟与备用碟，如 raid5 要减一</span><br><span class="line">    - sunit=数值      swidth，与 su 相当，不过单位使用的是几个 sector（512bytes大小）的意思</span><br><span class="line">    - swidth=数值     就是 su*sw 的数值，但是以几个 sector（512bytes大小）来设定</span><br><span class="line"></span><br><span class="line">* -f</span><br><span class="line">  - 强制格式化，常用来对文件格式化</span><br><span class="line"></span><br><span class="line">* -i &lt;parms&gt;</span><br><span class="line">  - 指定 inode 的参数</span><br><span class="line">  - size=&lt;size&gt;     指定 inode 的大小，最小值 256B，最大值 2k，默认 256B</span><br><span class="line"></span><br><span class="line">* -l</span><br><span class="line">  - 与 log section 有关的设置</span><br><span class="line">  - internal=[0|1]，log 设备是否为内建，默认为 1 内建，0 为使用外部设备，如果要用外部设备，要再加上 logdev 参数</span><br><span class="line">  - logdev=device，log 设备放在为后面接的那个设备上，需设定 internal=0 才可</span><br><span class="line">  - size=数值  ，指定这块登录区的容量，通常最小得要有 512 个 block，大约 2M 以上才行</span><br><span class="line"></span><br><span class="line">* -L</span><br><span class="line">  - 设置这个文件系统的标头名称 Label name</span><br><span class="line"></span><br><span class="line">* -r</span><br><span class="line">  - 指定 realtime section 的相关设定值</span><br><span class="line">  - extsize=数值，就是那个重要的 extent 数值，一般不须设定，但有 RAID 时，最好设定与 swidth 的数值相同较佳，最小为 4K 最大为 1G</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：xfs-growfs-指令"><a href="#知识点：xfs-growfs-指令" class="headerlink" title="知识点：xfs_growfs 指令"></a>知识点：xfs_growfs 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 扩大 xfs 文件系统的容量</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="11-5-NFS"><a href="#11-5-NFS" class="headerlink" title="11.5 NFS"></a>11.5 NFS</h2><hr>
<h1 id="Chapter12-磁盘和分区"><a href="#Chapter12-磁盘和分区" class="headerlink" title="Chapter12 磁盘和分区"></a>Chapter12 磁盘和分区</h1><hr>
<h2 id="12-1-分区"><a href="#12-1-分区" class="headerlink" title="12.1 分区"></a>12.1 分区</h2><hr>
<h3 id="知识点：MBR"><a href="#知识点：MBR" class="headerlink" title="知识点：MBR"></a>知识点：MBR</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Master Boot Record</span><br><span class="line"></span><br><span class="line">* 零扇区</span><br><span class="line">  - 硬盘第一个扇区，512B</span><br><span class="line">  - 存放主引导记录和分区表</span><br><span class="line">    - 主引导记录，MBR，446B，存放开机管理程序 boot loader</span><br><span class="line">    - 分区表，partition table，64B，存放硬盘的分区情况，每个分区 16 B</span><br><span class="line">    - 最后两个字节是引导标示，2B</span><br><span class="line"></span><br><span class="line">* MBR 最多支持 4 个分区</span><br><span class="line">  - 3 个主分区 Primary partition，号码为 1 2 3</span><br><span class="line">  - 1 个扩展分区 Extended partition，号码为 4</span><br><span class="line">  - MBR 划分分区的最小单位为 Cylinder，不过现在好像也能用 Sector 了</span><br><span class="line"></span><br><span class="line">* 逻辑分区</span><br><span class="line">  - 扩展分区上可以划分逻辑分区，logical partition，号码从 5 开始</span><br><span class="line">  - 逻辑分区以前最多能划分 63 个，好像现在能增多了</span><br><span class="line"></span><br><span class="line">* MBR 的缺点</span><br><span class="line">  - 硬盘容量不能超过 2.2T，因为分区表中用 4B 记录分区终止位置，2^32*512B=2TB</span><br><span class="line">  - 只有零扇区记录引导区块，若零扇区被破坏后，经常无法或很难救援</span><br><span class="line">  - MBR 内的存放开机管理程序的区块仅 446B，无法容纳较多的程序码</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：GPT"><a href="#知识点：GPT" class="headerlink" title="知识点：GPT"></a>知识点：GPT</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - GUID partition table</span><br><span class="line"></span><br><span class="line">* GPT 的缺点</span><br><span class="line">  - 并不是所有的软件都能认识 GPT，如 fdisk</span><br><span class="line">  - 并不是所有的开机引导程序都认识 GPT，如 Grub1</span><br><span class="line">    - grub2 可以识别 GPT</span><br><span class="line">    - 如果非要用 Grub1，则需要添加 bios boot 分区</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>LBA</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">* LBA</span><br><span class="line">  - Logical Block Address</span><br><span class="line">  - GPT 使用 LBA 记录分区信息</span><br><span class="line">  - LBA 默认 512B</span><br><span class="line"></span><br><span class="line">* LBA 0</span><br><span class="line">  - MBR 相容区块</span><br><span class="line">  - 与 MBA 模式相似</span><br><span class="line">  - 前 446B 存放开机管理程序</span><br><span class="line">  - 后 64B 存放了一个特殊的标志，表示这是一个 GPT 硬盘</span><br><span class="line">  - 不懂这个特殊标志的硬盘管理程序，就没法处理此硬盘</span><br><span class="line"></span><br><span class="line">* LBA 1</span><br><span class="line">  - GPT 头</span><br><span class="line">  - 记录了分区表的位置和大小</span><br><span class="line">  - 记录了备份分区表的位置</span><br><span class="line">  - 记录了分区表的检验机制码 CRC32</span><br><span class="line">    - 操作系统通过检验机制码，检查分区表是否有错误</span><br><span class="line">    - 如果有错误，还通过这个记录区来获得备份分区表，用以恢复</span><br><span class="line"></span><br><span class="line">* LBA 2-33</span><br><span class="line">  - 实际存放分区信息的位置</span><br><span class="line">  - 每个 LBA 可以存放 4 个分区信息</span><br><span class="line">    - 共 32 个 LBA 存放分区信息</span><br><span class="line">    - 故 GPT 最多可以有 128 个分区</span><br><span class="line">  - 每个分区信息可以用 128B</span><br><span class="line">    - 每个分区信息除了识别码和相关信息外，可以用 64bit 来记录开始/结束的磁区号码</span><br><span class="line">    - 所以理论上，GPT 分区最大为 2^64*512B = 8ZB</span><br><span class="line"></span><br><span class="line">* LBA -2 到 -33</span><br><span class="line">  - 每一个 LBA N 的备份</span><br><span class="line"></span><br><span class="line">* LBA -1</span><br><span class="line">  - LBA 1 的备份</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：partprobe-指令"><a href="#知识点：partprobe-指令" class="headerlink" title="知识点：partprobe 指令"></a>知识点：partprobe 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* 作用</span><br><span class="line">  - 手动更新 Linux Kernel 的分区表</span><br><span class="line">  - 硬盘中，如果已经有文件系统被挂载了，则新建的分区不会立刻被 Kernel 抓到，需要手动更新</span><br><span class="line"></span><br><span class="line">* /proc/partitions</span><br><span class="line">  - Kernel 的分区记录</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  partprobe [-s]</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -s        显示识别到的分区表</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：fdisk-指令"><a href="#知识点：fdisk-指令" class="headerlink" title="知识点：fdisk 指令"></a>知识点：fdisk 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  fdisk [OPTIONS] DEVICE</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -l      打印当前的设备列表</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>fdisk 内部指令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* d</span><br><span class="line">  - 删除分区</span><br><span class="line"></span><br><span class="line">* n</span><br><span class="line">  - 新建分区</span><br><span class="line"></span><br><span class="line">* l</span><br><span class="line">  - 查看支持的文件系统种类和变化</span><br><span class="line"></span><br><span class="line">* p</span><br><span class="line">  - 查看现在的分区表</span><br><span class="line"></span><br><span class="line">* w</span><br><span class="line">  - 保存修改</span><br><span class="line"></span><br><span class="line">* q</span><br><span class="line">  - 退出</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：parted-指令"><a href="#知识点：parted-指令" class="headerlink" title="知识点：parted 指令"></a>知识点：parted 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - parted 默认采用交互模式，也可以采用命令行模式</span><br><span class="line">  - 适合于写脚本</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  parted [OPTIONS] DEVICE [COMMAND [ARGUMENT]]</span><br><span class="line"></span><br><span class="line">* 常用</span><br><span class="line">  parted -l                     &lt;== 查看所有的分区</span><br><span class="line">  parted /dev/vdb               &lt;== 进入互动模式</span><br><span class="line">  parted /dev/vdb print</span><br><span class="line">  parted -s /dev/vdc mklabel gpt</span><br><span class="line">  parted -s /dev/vdc mkpart 1 1M 100%</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>parted 子命令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">* 注意</span><br><span class="line">  - 新建分区时，需要先 mklabel，再 mkpart</span><br><span class="line"></span><br><span class="line">* help COMMAND</span><br><span class="line">  - 查看命令帮助</span><br><span class="line"></span><br><span class="line">* print</span><br><span class="line">  - 查看分区表信息</span><br><span class="line">  - print devices</span><br><span class="line">  - print free</span><br><span class="line">  - print all</span><br><span class="line"></span><br><span class="line">* mklabel LABEL-TYPE</span><br><span class="line">  - 新建分区表</span><br><span class="line">  - LABEL-TYPE，mbr 或 gpt</span><br><span class="line"></span><br><span class="line">* mkpart [[PART-TYPE] NAME FS-TYPE] START END</span><br><span class="line">  - 新建分区</span><br><span class="line">  - PART-TYPE</span><br><span class="line">    - 指定分区类型</span><br><span class="line">    - 仅在 MBR 时需要设置</span><br><span class="line">    - 可选值包括 primary、logical、extended</span><br><span class="line">  - NAME</span><br><span class="line">    - 指定分区的编号</span><br><span class="line">    - gpt 分区要求必须写编号</span><br><span class="line">  - FS-TYPE</span><br><span class="line">    - 指定文件系统的类型</span><br><span class="line">    - 可省略</span><br><span class="line">  - START</span><br><span class="line">    - 分区开始的位置</span><br><span class="line">  - END</span><br><span class="line">    - 分区结束的位置</span><br><span class="line">  - 注意</span><br><span class="line">    - GPT 分区表，START 写 1M，align 问题，END 建议用百分比</span><br><span class="line"></span><br><span class="line">* resizepart PARTITION END</span><br><span class="line">  - 调整第 N 个分区的大小</span><br><span class="line"></span><br><span class="line">* rm partition</span><br><span class="line">  - 删除第 N 个分区</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="12-2-SWAP"><a href="#12-2-SWAP" class="headerlink" title="12.2 SWAP"></a>12.2 SWAP</h2><hr>
<h1 id="Chapter13-systemd"><a href="#Chapter13-systemd" class="headerlink" title="Chapter13 systemd"></a>Chapter13 systemd</h1><hr>
<h2 id="13-1-systemd-介绍"><a href="#13-1-systemd-介绍" class="headerlink" title="13.1 systemd 介绍"></a>13.1 systemd 介绍</h2><hr>
<h3 id="知识点：守护进程-daemon"><a href="#知识点：守护进程-daemon" class="headerlink" title="知识点：守护进程 daemon"></a>知识点：守护进程 daemon</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 守护进程，是对常驻后台、用来提供某些功能的进程的特殊叫法，通常用来提供系统级别的服务</span><br><span class="line">  - 守护进程的主要特点，后台运行、长期运行、提供服务</span><br><span class="line">  - 守护进程的命名，通常以 &#x27;d&#x27; 结尾，如 sshd、mysqld 等</span><br><span class="line">  - 在 Linux 中，几乎可以认为 daemon 和 service 等价</span><br><span class="line"></span><br><span class="line">* 守护进程的管理机制</span><br><span class="line">  - linux 中提供了如 SysV 和 systemd 的对守护进程的管理机制。目前基本都是使用的 systemd</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：systemd"><a href="#知识点：systemd" class="headerlink" title="知识点：systemd"></a>知识点：systemd</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - systemd 是 Linux 的系统和服务管理器</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="13-2-unit"><a href="#13-2-unit" class="headerlink" title="13.2 unit"></a>13.2 unit</h2><hr>
<h3 id="知识点：unit-介绍"><a href="#知识点：unit-介绍" class="headerlink" title="知识点：unit 介绍"></a>知识点：unit 介绍</h3><ol>
<li><strong>unit 介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - unit 是 systemd 对 daemon 的管理，称为单元</span><br><span class="line">  - 一个 unti 就对应一个 daemon</span><br><span class="line">  - 最常见的 unit 是 service 和 target</span><br><span class="line"></span><br><span class="line">  unit 是 systemd 在管理系统时，对资源的封装</span><br><span class="line">  unit 有 12 种</span><br><span class="line"></span><br><span class="line">  unit 有五种状态，active、inactive、activating、deactivating、failed</span><br><span class="line">  failed 特指 unit 发生错误并且非正常的结束。此时原因会被记录。</span><br><span class="line">  不同的 unit 有各自的子状态，但都会被映射到五种一般化状态的某一个</span><br><span class="line">  如 started  -&gt; active，stopped -&gt; inactive</span><br><span class="line"></span><br><span class="line">  unit 的命名取决于其配置文件名</span><br><span class="line"></span><br><span class="line">  11 种 unit</span><br><span class="line">  Service，用来启动和管理守护进程 daemon</span><br><span class="line">  Socket</span><br><span class="line">  Target，用来打包多个 unit，通常是用作系统启动使用</span><br><span class="line">  Device</span><br><span class="line">  Mount</span><br><span class="line">  Automount</span><br><span class="line">  Timer</span><br><span class="line">  Swap</span><br><span class="line">  Path</span><br><span class="line">  Slice</span><br><span class="line">  Scope</span><br><span class="line"></span><br><span class="line">  依赖关系 dependency</span><br><span class="line">  unit 中可以定义两个 unit 的依赖关系</span><br><span class="line">  包括需求依赖关系 positive / negative requirement dependencies，使用 Requires= 或 Conflicts= 来定义</span><br><span class="line">  包括顺序依赖关系 ordering dependencies，使用 After= 或 Before= 来定义</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>unit 的五种状态</strong></li>
<li><strong>unit 相关目录</strong></li>
<li><strong>实例化方式的 unit</strong></li>
</ol>
<hr>
<h3 id="知识点：unit-块"><a href="#知识点：unit-块" class="headerlink" title="知识点：unit 块"></a>知识点：unit 块</h3><hr>
<h3 id="知识点：install-块"><a href="#知识点：install-块" class="headerlink" title="知识点：install 块"></a>知识点：install 块</h3><hr>
<h3 id="知识点：unit-依赖"><a href="#知识点：unit-依赖" class="headerlink" title="知识点：unit 依赖"></a>知识点：unit 依赖</h3><ol>
<li><strong>requirement dependency</strong></li>
<li><strong>ordering dependency</strong></li>
</ol>
<hr>
<h3 id="知识点：unit-占位符"><a href="#知识点：unit-占位符" class="headerlink" title="知识点：unit 占位符"></a>知识点：unit 占位符</h3><hr>
<h3 id="知识点：unit-重启控制"><a href="#知识点：unit-重启控制" class="headerlink" title="知识点：unit 重启控制"></a>知识点：unit 重启控制</h3><hr>
<h2 id="13-3-service"><a href="#13-3-service" class="headerlink" title="13.3 service"></a>13.3 service</h2><hr>
<h3 id="知识点：service"><a href="#知识点：service" class="headerlink" title="知识点：service"></a>知识点：service</h3><ol>
<li><strong>service 介绍</strong></li>
<li><strong>service 的类型</strong></li>
</ol>
<hr>
<h3 id="知识点：service-启动和停止和重启"><a href="#知识点：service-启动和停止和重启" class="headerlink" title="知识点：service 启动和停止和重启"></a>知识点：service 启动和停止和重启</h3><hr>
<h3 id="知识点：service-执行环境"><a href="#知识点：service-执行环境" class="headerlink" title="知识点：service 执行环境"></a>知识点：service 执行环境</h3><ol>
<li><strong>用户和组</strong></li>
<li><strong>环境变量</strong></li>
<li><strong>日志和标准输出</strong></li>
</ol>
<hr>
<h3 id="知识点：service-资源限制"><a href="#知识点：service-资源限制" class="headerlink" title="知识点：service 资源限制"></a>知识点：service 资源限制</h3><ol>
<li><strong>CPU</strong></li>
<li><strong>内存</strong></li>
<li><hr>
</li>
</ol>
<hr>
<h2 id="13-4-journal"><a href="#13-4-journal" class="headerlink" title="13.4 journal"></a>13.4 journal</h2><hr>
<h3 id="知识点：journal"><a href="#知识点：journal" class="headerlink" title="知识点：journal"></a>知识点：journal</h3><ol>
<li><strong>journal 介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - journal 是 systemd 的日志存储系统</span><br><span class="line">  - journal 中即包含 systemd 以及 unit 所产生的日志，也会接受其他来源的日志，如 kmsg、syslog</span><br><span class="line">  - 默认情况下，unit 的 stdout 和 stderr 会被保存到 journal 中</span><br><span class="line"></span><br><span class="line">* journald</span><br><span class="line">  - systemd 中负责收集和存储日志的程序</span><br><span class="line">  - systemd 通过 systemd-journald.service 来管理 journald</span><br><span class="line"></span><br><span class="line">* journal 的存储</span><br><span class="line">  - 默认情况下，journald 会首先存储在 /run/log/journal 下，之后再持久化到 /var/log/journal 下</span><br><span class="line">  - /var/log/journal 中的日志文件会根据 SystemMaxFiles 的配置进行轮替</span><br><span class="line">  - journal 的轮替主要采用 size-based 策略，但可以添加 time-based 策略来进行优化</span><br><span class="line">  - journactl 的 vacuum 操作只会清除已归档的 journal</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>journal 的结构</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - journal 是结构化的</span><br><span class="line">  - 一条记录称为一个 entry</span><br><span class="line">  - 一个 entry 中包含多个 field</span><br><span class="line"></span><br><span class="line">* field 的命名</span><br><span class="line">  - 以 &quot;_&quot; 开头的 field 的来源是 journald，被称为 TRUSTED JOURNAL FIELDS</span><br><span class="line">  - 以 SYS 开头的 field 的来源是 syslog</span><br><span class="line">  - 以 &quot;__&quot; 开头的 field 只是在以 json 格式查看 journal 时会被映射出，并不是 journal 里的真实的 field</span><br><span class="line"></span><br><span class="line">* MESSAGE</span><br><span class="line">  - human-readable 字符串，用来记录 entry 的内容</span><br><span class="line">  </span><br><span class="line">* PRIORITY</span><br><span class="line">  - entry 的严重程度，继承自 syslog 的日志级别</span><br><span class="line">  - emerg (0)、alert (1)、crit (2)、err (3)、warning (4)、notice (5)、info (6)、debug (7)</span><br><span class="line"></span><br><span class="line">* SYSLOG_TIMESTAMP</span><br><span class="line">  - 日志的生成时间</span><br><span class="line"></span><br><span class="line">* __REALTIME_TIMESTAMP</span><br><span class="line">  - 日志的生成时间，microseconds since the epoch UTC</span><br><span class="line"></span><br><span class="line">* UNIT、USER_UNIT、_SYSTEMD_UNIT</span><br><span class="line">  - 日志对应的 unit</span><br><span class="line"></span><br><span class="line">* SYSLOG_PID、_PID</span><br><span class="line">  - 日志对应的进程 pid</span><br><span class="line"></span><br><span class="line">* _UID、_GID</span><br><span class="line">  - 日志对应的进程的 uid、pid</span><br><span class="line"></span><br><span class="line">* _COMM、_EXE、 _CMDLINE</span><br><span class="line">  - 日志对应的进程的程序，带执行参数或不带执行参数</span><br><span class="line"></span><br><span class="line">* _HOSTNAME</span><br><span class="line">  - 日志对应的主机</span><br><span class="line"></span><br><span class="line">* _TRANSPORT</span><br><span class="line">  - 日志的来源，值范围为 audit、driver、syslog、journal、stdout、kernel</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>journal.conf</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - journald 的配置文件，默认为 /etc/systemd/journald.conf、/etc/systemd/journald.conf.d/*.conf</span><br><span class="line">  - 一般是在编译时确定的，都不建议修改，用处只是让 administrator 知晓 journald 的配置</span><br><span class="line"></span><br><span class="line">* [Journal] section</span><br><span class="line">  - 在 unit 文件中，可以通过 [Journal] 块来个性化指定日志相关的配置</span><br><span class="line"></span><br><span class="line">* Storage=</span><br><span class="line">  - 指定 journal 的存储位置</span><br><span class="line">  - 可选值为 volatile、persistent、auto、none</span><br><span class="line">  - volatile 表示存储在 /run/log/journal</span><br><span class="line">  - persistent 表示存储在 /var/log/journal</span><br><span class="line"></span><br><span class="line">* SystemMaxUse、SystemKeepFree、SystemMaxFileSize、SystemMaxFiles</span><br><span class="line">* RuntimeMaxUse、RuntimeKeepFree、RuntimeMaxFileSize、RuntimeMaxFiles</span><br><span class="line">  - 配置 journal 的空间使用，size-based 策略</span><br><span class="line">  - 默认的 size-based 策略通常不会让 journal 超过 4G</span><br><span class="line">  - System 开头，表示配置 /var/log/journal</span><br><span class="line">  - Runtime 开头，表示配置 /run/log/journal</span><br><span class="line"></span><br><span class="line">* MaxFileSec</span><br><span class="line">* MaxRetentionSec</span><br><span class="line">  - 配置 journal 的空间使用，time-based 策略</span><br><span class="line"></span><br><span class="line">* SyncIntervalSec</span><br><span class="line">  - 配置 journal 持久化到磁盘的时间间隔，默认为 5 分钟</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：journalctl-指令"><a href="#知识点：journalctl-指令" class="headerlink" title="知识点：journalctl 指令"></a>知识点：journalctl 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - journalct 指令，主要用来查询 journal，也可以对 journal 进行管理</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  journalctl [OPTIONs] [MATCHs] [FILEs]</span><br><span class="line"></span><br><span class="line">* MATCH</span><br><span class="line">  - &quot;FIELD=VALUE&quot; 形式的筛选条件，FIELD 就是 journal 的 field</span><br><span class="line">  - 如果指定多个 MATCH，则按照 and 逻辑</span><br><span class="line">  - 如果对同一个 FIELD 指定了多次 MATCH，则按照 or 逻辑</span><br><span class="line">  - &quot;+&quot; 用来实现 OR 逻辑，此时 &quot;+&quot; 以前的所有 MATCH 为一个整体，&quot;+&quot; 以后的所有 MATCH 为一个整体，两个整体之间为 OR 逻辑</span><br><span class="line">  - journalctl 的许多查询选项，本质上就是在添加 MATCH，如 &quot;-u&quot; 就是添加 &quot;_SYSTEMD_UNIT&quot; MATCH</span><br><span class="line"></span><br><span class="line">* FILE  </span><br><span class="line">  - 简化的指定 MATCH 的方式，用来指定 journal 对应的进程的程序文件</span><br><span class="line">  - 可以是二进制程序文件，也可以是脚本，也可以是软链</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>查询选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">* --no-pager</span><br><span class="line">  - 输出不经过 pager</span><br><span class="line"></span><br><span class="line">* -u, --unit=UNIT</span><br><span class="line">  - 指定 unit</span><br><span class="line"></span><br><span class="line">* -f, --follow</span><br><span class="line">  - 追踪模式</span><br><span class="line"></span><br><span class="line">* -n, --lines=N</span><br><span class="line">  - 指定打印的 entry 数量</span><br><span class="line"></span><br><span class="line">* -o, --output=FORMAT</span><br><span class="line">  - 指定输出格式，常用可选值包括 short、short-full、short-iso、verbose、json、json-pretty</span><br><span class="line"></span><br><span class="line">* -p, --priority=</span><br><span class="line">  - 对 journal 的级别进行筛选</span><br><span class="line">  - 支持按范围进行筛选，格式为 FROM..TO</span><br><span class="line"></span><br><span class="line">* -g, --grep=PATTERN</span><br><span class="line">  - 对 journal 的 MESSAGE 进行筛选</span><br><span class="line">  - 支持 pcre</span><br><span class="line"></span><br><span class="line">* -S, --since=</span><br><span class="line">* -U, --until=</span><br><span class="line">  - 对 journal 的时间进行筛选</span><br><span class="line">  - 支持 &quot;2012-10-30 18:17:16&quot; 的格式，或 &quot;2012-10-30&quot; 的格式</span><br><span class="line"></span><br><span class="line">* -b, --boot[=[ID][±offset]|all]</span><br><span class="line">  - 只查看某次 boot 的 journal，用法见 man</span><br><span class="line">  - 默认只查看 current boot 的 journal</span><br><span class="line"></span><br><span class="line">* --list-boots</span><br><span class="line">  - 查看系统的 boot 历史以及其偏移及其 id</span><br><span class="line"></span><br><span class="line">* -k, --dmesg</span><br><span class="line">  - 只查看 kernel messages</span><br><span class="line"></span><br><span class="line">* --utc</span><br><span class="line">  - 输出时将 timestamp 转换为 utc 时间而不是 local 时间</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>管理选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* --disk-usage</span><br><span class="line">  - 查看 journal 的空间占用</span><br><span class="line"></span><br><span class="line">* --rotate</span><br><span class="line">  - 对 journal 进行轮替</span><br><span class="line"></span><br><span class="line">* --vacuum-size=</span><br><span class="line">* --vacuum-time=</span><br><span class="line">* --vacuum-files=</span><br><span class="line">  - 清除归档的 journal</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看 journal</span></span><br><span class="line">journalctl -u sshd.service --no-pager -n 1</span><br><span class="line">journalctl -u sshd.service --no-pager -n 1 -o json-pretty</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 只查看上次启动的 journal</span></span><br><span class="line">journalctl -u sshd.service --no-pager -b -1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看系统的 boot 历史以及其偏移及其 id</span></span><br><span class="line">journal --list-boots</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 清除归档的 journal，以使空间占用降至 90M 以下</span></span><br><span class="line">journalctl --disk-usage</span><br><span class="line">journalctl --vacuum-size=90M</span><br><span class="line"> </span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="13-5-systemd-指令"><a href="#13-5-systemd-指令" class="headerlink" title="13.5 systemd 指令"></a>13.5 systemd 指令</h2><hr>
<h3 id="知识点：systemctl-指令"><a href="#知识点：systemctl-指令" class="headerlink" title="知识点：systemctl 指令"></a>知识点：systemctl 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 管理 systemd</span><br><span class="line">  - 管理 systemd unit</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  systemctl [OPTIONs] SUBCOMMAND [UNITs]</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>子命令</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">* list-units [PATTERNs]</span><br><span class="line">  - systemctl 的默认子命令，列出 systemd 已经加载到内存中的 unit</span><br><span class="line">  - 选项</span><br><span class="line">    - --all，列出所有的 unit，包括已经加载到内存中的和以及还没加载到内存中的</span><br><span class="line">    - -t, --type=TYPE，限制输出的 unit 的类型</span><br><span class="line"></span><br><span class="line">* status [PATTERNs|PIDs]</span><br><span class="line">  - 省略 PATTERN 表示查看 system 的详细信息</span><br><span class="line">  - 添加 PATTERN 表示查看 unit 的详细新题，包括 unit 下有哪些进程</span><br><span class="line">  - 如果指定的是 PIDs，则查看此进程所归属的 unit</span><br><span class="line">  - 选项</span><br><span class="line">    - -n, --lines=N，指定 journal 的输出行数，默认只输出 10 行，0 表示全部输出</span><br><span class="line">    - -o, --output=FORMAT，指定 journal 的输出格式</span><br><span class="line">    - --all，列出所有的 unit</span><br><span class="line"></span><br><span class="line">* start PATTERNs</span><br><span class="line">* stop PATTERNs</span><br><span class="line">* restart PATTERNs</span><br><span class="line">  - 启动/停止/重启某个 unit</span><br><span class="line">  - restart 本质上也是先 stop 再 start</span><br><span class="line"></span><br><span class="line">* enable PATTERNs</span><br><span class="line">* disable PATTERNs</span><br><span class="line">  - 开启/关闭 unit 的开机启动</span><br><span class="line">  - &quot;--now&quot; 选项：在 enable 时同时 start unit</span><br><span class="line"></span><br><span class="line">* daemon-reload</span><br><span class="line">  - 指导 systemd 重新加载所有 unit 的配置</span><br><span class="line"></span><br><span class="line">* cat PATTERNs</span><br><span class="line">  - 查看 unit file 的内容</span><br><span class="line"></span><br><span class="line">* musk UNITs</span><br><span class="line">* unmusk UNITs</span><br><span class="line">  - 掩盖/取消掩盖 unit</span><br><span class="line">  - 所谓掩盖，就是将 unit file 指向 /dev/null，相当于彻底禁用 unit，对 unit 的 start/enable 等操作都会失效</span><br><span class="line"></span><br><span class="line">* is-active PATTERNs</span><br><span class="line">* is-failed PATTERNs</span><br><span class="line">* is-enabled UNIT</span><br><span class="line">  - 检查 unit 的状态</span><br><span class="line"></span><br><span class="line">* show [PATTERNs]</span><br><span class="line">  - 省略 PATTERN 表示查看 systemd 的状态信息</span><br><span class="line">  - 添加 PATTERN 表示查看 unit 的状态</span><br><span class="line">  - 与 status 的区别，status 的输出是 human-readable，show 的输出是 computer-parsable</span><br><span class="line">  - 选项</span><br><span class="line">    - --all，列出所有的 property</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* --no-pager</span><br><span class="line">  - 不将输出通过 pager 进行解析</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="Chapter14-常用服务"><a href="#Chapter14-常用服务" class="headerlink" title="Chapter14 常用服务"></a>Chapter14 常用服务</h1><hr>
<h2 id="14-1-crontab"><a href="#14-1-crontab" class="headerlink" title="14.1 crontab"></a>14.1 crontab</h2><hr>
<h3 id="知识点：crontab"><a href="#知识点：crontab" class="headerlink" title="知识点：crontab"></a>知识点：crontab</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - Linux 的定时任务功能，由 crond.service 或 cron.service 负责进行运行</span><br><span class="line"></span><br><span class="line">* /var/spool/cron</span><br><span class="line">  - 用户层的 crontab 设置</span><br><span class="line">  - 每个用户都拥有自己的 crontab 设置，文件名就是用户名，如 /var/spool/cron/root</span><br><span class="line">  - 用户执行 crontab -l 就是查看的这些文件</span><br><span class="line">  - 可以通过直接编辑 /var/spool/cron 下的文件来修改某个用户的 crontab 设置，但不推荐</span><br><span class="line"></span><br><span class="line">* /etc/crontab 和 /etc/cron*</span><br><span class="line">  - 系统层自动任务设置</span><br><span class="line"></span><br><span class="line">* 日志</span><br><span class="line">  - crontab 自动任务的 stdout 和 stderr 会记录在 crond.service 的 journal 中</span><br><span class="line">  - crontab 对自动任务的执行也会记录在 crond.service 的 journal 中，包括何时开始、何时结束、执行了何种命令</span><br><span class="line"></span><br><span class="line">* cron.allow 和 cron.deny</span><br><span class="line">  - 配置用户对于 crontab 的权限</span><br><span class="line">  - /etc/cron.allow</span><br><span class="line">    - 白名单方式，管理允许进行 crontab 的用户</span><br><span class="line">    - 只要文件存在，就表示采用此方式</span><br><span class="line">  - /etc/cron.deny</span><br><span class="line">    - 黑名单方式，管理允许进行 crontab 的用户</span><br><span class="line">    - 只要文件存在，就表示采用此方式</span><br><span class="line">  - 如果 cron.allow 和 cron.deny 都不存在，则只有 superuser 可以进行 crontab</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>指令格式</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 格式</span><br><span class="line">  crontab [OPTIONs]</span><br><span class="line"></span><br><span class="line">* 选项</span><br><span class="line">  -l    列出当前的 crontab 设置</span><br><span class="line">  -e    修改 crontab 设置</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>任务格式</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 允许空行</span><br><span class="line">  - 允许 leading spaces and tabs</span><br><span class="line">  - 井号 &quot;#&quot; 表示注释，支持行注释，不支持行内注释</span><br><span class="line">  - 0 和 7 都代表星期天</span><br><span class="line"></span><br><span class="line">* 格式</span><br><span class="line">  * * * * * Program</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>配置语法</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">* five fields</span><br><span class="line">  - minute         0-59</span><br><span class="line">  - hour           0-23</span><br><span class="line">  - day of month   1-31</span><br><span class="line">  - month          1-12 (or names, see below)</span><br><span class="line">  - day of week    0-7 (0 or 7 is Sunday, or use names)</span><br><span class="line"></span><br><span class="line">* Ranges of numbers: 8-11</span><br><span class="line"></span><br><span class="line">* Lists:</span><br><span class="line">  - 1,2,5,9</span><br><span class="line">  - 0-4,8-12</span><br><span class="line"></span><br><span class="line">* Step values</span><br><span class="line">  - 0-23/2</span><br><span class="line">  - */2</span><br><span class="line"></span><br><span class="line">* EXTENSIONS</span><br><span class="line">  - @reboot    :    Run once after reboot.</span><br><span class="line">  - @yearly    :    Run once a year, ie.  &quot;0 0 1 1 *&quot;.</span><br><span class="line">  - @annually  :    Run once a year, ie.  &quot;0 0 1 1 *&quot;.</span><br><span class="line">  - @monthly   :    Run once a month, ie. &quot;0 0 1 * *&quot;.</span><br><span class="line">  - @weekly    :    Run once a week, ie.  &quot;0 0 * * 0&quot;.</span><br><span class="line">  - @daily     :    Run once a day, ie.   &quot;0 0 * * *&quot;.</span><br><span class="line">  - @hourly    :    Run once an hour, ie. &quot;0 * * * *&quot;.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="知识点：at-指令"><a href="#知识点：at-指令" class="headerlink" title="知识点：at 指令"></a>知识点：at 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - at 指令，用来设置定时任务，从 stdin 或 file 中读取 command，并在指定的时间执行</span><br><span class="line">  - 由 atd.service 来负责管理</span><br><span class="line">  - 如果没有指定 command，则开启一个 prompt，在其中输入 command，以 EOT(C-D) 表示输入结束</span><br><span class="line">  - 任务的 stdout 和 stderr 会以 mail 的形式发送到用户的邮箱中</span><br><span class="line"></span><br><span class="line">* at quene</span><br><span class="line">  - at 任务会被放在队列中，等待执行</span><br><span class="line">  - at 有 26 个任务队列，分别以英文字母 a-z 来表示，a 队列为 nice 值最高</span><br><span class="line">  - &quot;a&quot; 队列为默认队列</span><br><span class="line">  - &quot;=&quot; 队列表示正在执行的任务的队列</span><br><span class="line">  - 大写字母，表示在添加任务到队列中时，同时指定 &quot;-b&quot; 选项</span><br><span class="line"></span><br><span class="line">* TimeSpec</span><br><span class="line">  - at 支持格式化的指定时间的方式，如 HH:MM、HH:MMam、HH:MMpm</span><br><span class="line">  - at 还支持语言化的时间指定方式，如 midnight、noon、11pm today、1am tomorrow</span><br><span class="line">  - at 也支持指定日期，如 [CC]YY-MM-DD、DD.MM.[CC]YY、MM/DD/[CC]YY 等，日期需要放在时间之后</span><br><span class="line">  - at 也支持通过计算的方式指定任务的执行时间，如 now + 3 hours、4pm + 3 days</span><br><span class="line">  - 如果指定的任务执行时间已经过去，则若未指定日期则任务会被放到明天相应的时间执行，如果指定了日期则任务会被立刻执行</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>格式</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* at [OPTIONS] TimeSpec</span><br><span class="line">* at [OPTIONS] -t Time</span><br><span class="line"></span><br><span class="line">* at -l</span><br><span class="line"></span><br><span class="line">* at -r Job</span><br><span class="line">* at -d Job</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>选项</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">* -V</span><br><span class="line">  - 打印 at 的版本</span><br><span class="line"></span><br><span class="line">* -f File</span><br><span class="line">  - 从文件中读取 command</span><br><span class="line"></span><br><span class="line">* -t Time</span><br><span class="line">  - 以 &quot;[[CC]YY]MMDDhhmm[.ss]&quot; 的格式指定 command 的执行时间</span><br><span class="line"></span><br><span class="line">* -l</span><br><span class="line">  - 列出自己当前等待执行的 at 任务列表，superuser 会列出所有用户的 at 任务</span><br><span class="line">  - 输出格式为: Job number, date, hour, queue, and username.</span><br><span class="line">  - 也写作 atq</span><br><span class="line"></span><br><span class="line">* -r Job</span><br><span class="line">* -d Job</span><br><span class="line">  - 删除某个 at 任务，Job 表示 Job number</span><br><span class="line">  - 也写作 atrm</span><br><span class="line"></span><br><span class="line">* -b</span><br><span class="line">  - 基于系统负载，来执行任务</span><br><span class="line">  - 系统负载不超过 atd.service 中的设置的数值时，才执行任务，默认为 1.5</span><br><span class="line">  - 也写作 batch</span><br><span class="line"></span><br><span class="line">* -c Job</span><br><span class="line">  - 查看某个任务的详细信息</span><br><span class="line"></span><br><span class="line">* -q Quene</span><br><span class="line">  - 指定 at 队列</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="14-2-ntpd-和-chronyd"><a href="#14-2-ntpd-和-chronyd" class="headerlink" title="14.2 ntpd 和 chronyd"></a>14.2 ntpd 和 chronyd</h2><hr>
<h2 id="14-3-ftpd"><a href="#14-3-ftpd" class="headerlink" title="14.3 ftpd"></a>14.3 ftpd</h2><hr>
<h1 id="Chapter15-硬件"><a href="#Chapter15-硬件" class="headerlink" title="Chapter15 硬件"></a>Chapter15 硬件</h1><hr>
<h2 id="15-1-硬件查看"><a href="#15-1-硬件查看" class="headerlink" title="15.1 硬件查看"></a>15.1 硬件查看</h2><hr>
<h3 id="知识点：lscpu-指令"><a href="#知识点：lscpu-指令" class="headerlink" title="知识点：lscpu 指令"></a>知识点：lscpu 指令</h3><ol>
<li><strong>介绍</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 介绍</span><br><span class="line">  - 查看 cpu 的架构信息</span><br><span class="line">  - 本质上是对 sysfs 中的内容进行的精简，包括 cpuinfo 等</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>范例</strong><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@oHly0LgWEtnyGSkm ~]# lscpu</span><br><span class="line">Architecture:          x86_64</span><br><span class="line">CPU op-mode(s):        32-bit, 64-bit</span><br><span class="line">Byte Order:            Little Endian</span><br><span class="line">CPU(s):                4</span><br><span class="line">On-line CPU(s) list:   0-3</span><br><span class="line">Thread(s) per core:    1</span><br><span class="line">Core(s) per socket:    1</span><br><span class="line">Socket(s):             4</span><br><span class="line">NUMA node(s):          1</span><br><span class="line">Vendor ID:             GenuineIntel</span><br><span class="line">CPU family:            6</span><br><span class="line">Model:                 85</span><br><span class="line">Model name:            Intel Xeon Processor (Skylake, IBRS)</span><br><span class="line">Stepping:              4</span><br><span class="line">CPU MHz:               2299.998</span><br><span class="line">BogoMIPS:              4599.99</span><br><span class="line">Hypervisor vendor:     KVM</span><br><span class="line">Virtualization type:   full</span><br><span class="line">L1d cache:             32K</span><br><span class="line">L1i cache:             32K</span><br><span class="line">L2 cache:              4096K</span><br><span class="line">L3 cache:              16384K</span><br><span class="line">NUMA node0 CPU(s):     0-3</span><br><span class="line">Flags:                 fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc rep_good nopl xtopology eagerfpu pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch invpcid_single ssbd rsb_ctxsw ibrs ibpb stibp fsgsbase tsc_adjust bmi1 hle avx2 smep bmi2 erms invpcid rtm mpx avx512f avx512dq rdseed adx smap clflushopt clwb avx512cd avx512bw avx512vl xsaveopt xsavec xgetbv1 arat pku ospke spec_ctrl intel_stibp</span><br><span class="line"></span><br><span class="line">[root@oHly0LgWEtnyGSkm ~]# lscpu -a -e</span><br><span class="line">CPU NODE SOCKET CORE L1d:L1i:L2:L3 ONLINE</span><br><span class="line">0   0    0      0    0:0:0:0       yes</span><br><span class="line">1   0    1      1    1:1:1:1       yes</span><br><span class="line">2   0    2      2    2:2:2:2       yes</span><br><span class="line">3   0    3      3    3:3:3:3       yes</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2000/01/01/Blog00-Miscellaneous/" rel="prev" title="Blog00-Miscellaneous">
                  <i class="fa fa-chevron-left"></i> Blog00-Miscellaneous
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2000/01/01/Blog02-Ansible/" rel="next" title="Blog02-Ansible">
                  Blog02-Ansible <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2000 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"per_page":true,"tags":"none","cdn":"//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
